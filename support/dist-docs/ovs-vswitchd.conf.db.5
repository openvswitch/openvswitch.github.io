'\" p
.\" -*- nroff -*-
.TH "ovs-vswitchd.conf.db" 5 " DB Schema 8.4.0" "Open vSwitch 3.2.0" "Open vSwitch Manual"
.fp 5 L CR              \\" Make fixed-width font available as \\fL.
.de TQ
.  br
.  ns
.  TP "\\$1"
..
.de ST
.  PP
.  RS -0.15in
.  I "\\$1"
.  RE
..
.SH NAME
ovs-vswitchd\[char46]conf\[char46]db \- Open_vSwitch database schema
.PP
.PP
.PP
.PP
A database with this schema holds the configuration for one Open vSwitch daemon\[char46] The top-level configuration for the daemon is the \fBOpen_vSwitch\fR table, which must have exactly one record\[char46] Records in other tables are significant only when they can be reached directly or indirectly from the \fBOpen_vSwitch\fR table\[char46] Records that are not reachable from the \fBOpen_vSwitch\fR table are automatically deleted from the database, except for records in a few distinguished ``root set\(cq\(cq tables\[char46]
.SS "Common Columns"
.PP
.PP
Most tables contain two special columns, named \fBother_config\fR and \fBexternal_ids\fR\[char46] These columns have the same form and purpose each place that they appear, so we describe them here to save space later\[char46]
.RS
.TP
\fBother_config\fR: map of string-string pairs
Key-value pairs for configuring rarely used features\[char46] Supported keys, along with the forms taken by their values, are documented individually for each table\[char46]
.IP
A few tables do not have \fBother_config\fR columns because no key-value pairs have yet been defined for them\[char46]
.TP
\fBexternal_ids\fR: map of string-string pairs
Key-value pairs for use by external frameworks that integrate with Open vSwitch, rather than by Open vSwitch itself\[char46] System integrators should either use the Open vSwitch development mailing list to coordinate on common key-value definitions, or choose key names that are likely to be unique\[char46] In some cases, where key-value pairs have been defined that are likely to be widely useful, they are documented individually for each table\[char46]
.RE
.SH "TABLE SUMMARY"
.PP
The following list summarizes the purpose of each of the tables in the
\fBOpen_vSwitch\fR database.  Each table is described in more detail on a later
page.
.IP "Table" 1in
Purpose
.TQ 1in
\fBOpen_vSwitch\fR
Open vSwitch configuration\[char46]
.TQ 1in
\fBBridge\fR
Bridge configuration\[char46]
.TQ 1in
\fBPort\fR
Port configuration\[char46]
.TQ 1in
\fBInterface\fR
One physical network device in a Port\[char46]
.TQ 1in
\fBFlow_Table\fR
OpenFlow table configuration
.TQ 1in
\fBQoS\fR
Quality of Service configuration
.TQ 1in
\fBQueue\fR
QoS output queue\[char46]
.TQ 1in
\fBMirror\fR
Port mirroring\[char46]
.TQ 1in
\fBController\fR
OpenFlow controller configuration\[char46]
.TQ 1in
\fBManager\fR
OVSDB management connection\[char46]
.TQ 1in
\fBNetFlow\fR
NetFlow configuration\[char46]
.TQ 1in
\fBDatapath\fR
Datapath configuration\[char46]
.TQ 1in
\fBCT_Zone\fR
CT_Zone configuration\[char46]
.TQ 1in
\fBCT_Timeout_Policy\fR
CT_Timeout_Policy configuration\[char46]
.TQ 1in
\fBSSL\fR
SSL configuration\[char46]
.TQ 1in
\fBsFlow\fR
sFlow configuration\[char46]
.TQ 1in
\fBIPFIX\fR
IPFIX configuration\[char46]
.TQ 1in
\fBFlow_Sample_Collector_Set\fR
Flow_Sample_Collector_Set configuration\[char46]
.TQ 1in
\fBAutoAttach\fR
AutoAttach configuration\[char46]
.\" check if in troff mode (TTY)
.if t \{
.bp
.SH "TABLE RELATIONSHIPS"
.PP
The following diagram shows the relationship among tables in the
database.  Each node represents a table.  Tables that are part of the
``root set'' are shown with double borders.  Each edge leads from the
table that contains it and points to the table that its value
represents.  Edges are labeled with their column names, followed by a
constraint on the number of allowed values: \fB?\fR for zero or one,
\fB*\fR for zero or more, \fB+\fR for one or more.  Thick lines
represent strong references; thin lines represent weak references.
.RS -1in
.ps -3
.PS
linethick = 1;
linethick = 0.500000;
box at 0.485799,1.363863 wid 0.538248 height 0.164210 "Open_vSwitch"
box at 0.485799,1.363863 wid 0.482692 height 0.108654
linethick = 1.000000;
box at 1.918071,1.222445 wid 0.378603 height 0.164210 "Datapath"
linethick = 1.000000;
box at 1.918071,0.925947 wid 0.296491 height 0.164210 "Bridge"
linethick = 1.000000;
box at 1.918071,1.715075 wid 0.364907 height 0.164210 "Manager"
linethick = 1.000000;
box at 1.918071,1.468760 wid 0.246315 height 0.164210 "SSL"
linethick = 1.000000;
box at 4.333173,1.090157 wid 0.246315 height 0.164210 "Port"
linethick = 1.000000;
box at 3.083503,1.067365 wid 0.291929 height 0.164210 "Mirror"
linethick = 1.000000;
box at 3.083503,0.821050 wid 0.351212 height 0.164210 "NetFlow"
linethick = 1.000000;
box at 3.083503,0.574735 wid 0.269120 height 0.164210 "sFlow"
linethick = 1.000000;
box at 3.083503,0.082105 wid 0.255439 height 0.164210 "IPFIX"
linethick = 1.000000;
box at 3.083503,0.328420 wid 0.405960 height 0.164210 "Controller"
linethick = 1.000000;
box at 3.083503,1.792615 wid 0.437882 height 0.164210 "Flow_Table"
linethick = 1.000000;
box at 3.083503,1.546300 wid 0.437882 height 0.164210 "AutoAttach"
linethick = 1.000000;
box at 5.407435,1.213315 wid 0.369472 height 0.164210 "Interface"
linethick = 0.500000;
box at 5.407435,0.967000 wid 0.246315 height 0.164210 "QoS"
box at 5.407435,0.967000 wid 0.190759 height 0.108654
linethick = 0.500000;
box at 6.358540,0.967000 wid 0.282806 height 0.164210 "Queue"
box at 6.358540,0.967000 wid 0.227250 height 0.108654
linethick = 0.500000;
box at 0.485799,0.296491 wid 0.971565 height 0.164210 "Flow_Sample_Collector_Set"
box at 0.485799,0.296491 wid 0.916009 height 0.108654
linethick = 1.000000;
box at 3.083503,2.038930 wid 0.355777 height 0.164210 "CT_Zone"
linethick = 1.000000;
box at 4.333173,2.038930 wid 0.684197 height 0.164210 "CT_Timeout_Policy"
linethick = 1.000000;
spline -> from 0.756351,1.337425 to 0.756351,1.337425 to 1.039548,1.309279 to 1.480287,1.265501 to 1.728080,1.240869
"datapaths value*" at 1.350167,1.343336
linethick = 1.000000;
spline -> from 0.715200,1.279491 to 0.715200,1.279491 to 0.817831,1.242084 to 0.941317,1.198634 to 1.053670,1.163165 to 1.302514,1.084640 to 1.596285,1.006706 to 1.768016,0.962632
"bridges*" at 1.350167,1.197354
linethick = 1.000000;
spline -> from 0.755596,1.448201 to 0.755596,1.448201 to 0.849327,1.476708 to 0.955735,1.507612 to 1.053670,1.532638 to 1.287275,1.592312 to 1.560061,1.647815 to 1.734682,1.681576
"manager_options*" at 1.350167,1.694549
linethick = 1.000000;
spline -> from 0.756351,1.383469 to 0.756351,1.383469 to 1.066905,1.406360 to 1.566892,1.443209 to 1.794191,1.459958
"ssl?" at 1.350167,1.480156
linethick = 1.000000;
spline -> from 2.074104,1.306520 to 2.074104,1.306520 to 2.086814,1.318278 to 2.098243,1.331316 to 2.107373,1.345602 to 2.236409,1.547942 to 2.021918,1.707488 to 2.189478,1.879285 to 2.374608,2.069112 to 2.702929,2.077880 to 2.904711,2.061919
"ct_zones value*" at 2.485942,2.100509
linethick = 1.000000;
spline -> from 2.014430,1.010023 to 2.014430,1.010023 to 2.062905,1.049466 to 2.125534,1.093113 to 2.189478,1.117548 to 2.903725,1.390629 to 3.149187,1.257454 to 3.909183,1.172262 to 4.010993,1.160866 to 4.124955,1.137910 to 4.208374,1.119157
"ports*" at 3.083503,1.315946
linethick = 1.000000;
spline -> from 2.067897,0.943715 to 2.067897,0.943715 to 2.291124,0.971039 to 2.715771,1.022963 to 2.936962,1.049992
"mirrors*" at 2.485942,1.065099
linethick = 1.000000;
spline -> from 2.068488,0.885814 to 2.068488,0.885814 to 2.107504,0.876520 to 2.149837,0.867718 to 2.189478,0.862102 to 2.436679,0.827126 to 2.725952,0.819966 to 2.905860,0.819408
"netflow?" at 2.485942,0.896324
linethick = 1.000000;
spline -> from 2.017615,0.841839 to 2.017615,0.841839 to 2.065959,0.803348 to 2.127472,0.760588 to 2.189478,0.734380 to 2.443773,0.626822 to 2.768843,0.591714 to 2.947143,0.580252
"sflow?" at 2.485942,0.768601
linethick = 1.000000;
spline -> from 1.929894,0.842003 to 1.929894,0.842003 to 1.947268,0.696546 to 2.004643,0.398735 to 2.189478,0.246315 to 2.204224,0.234137 to 2.712585,0.145234 to 2.954007,0.103557
"ipfix?" at 2.485942,0.280527
linethick = 1.000000;
spline -> from 1.952752,0.843087 to 1.952752,0.843087 to 1.991999,0.747418 to 2.070031,0.592732 to 2.189478,0.510890 to 2.395561,0.369604 to 2.687428,0.333346 to 2.879849,0.326187
"controller*" at 2.485942,0.545079
linethick = 1.000000;
spline -> from 2.035580,1.009432 to 2.035580,1.009432 to 2.063167,1.035246 to 2.089802,1.065789 to 2.107373,1.099287 to 2.221630,1.317128 to 2.016729,1.471519 to 2.189478,1.646665 to 2.280943,1.739411 to 2.629692,1.773271 to 2.862345,1.785587
"flow_tables value*" at 2.485942,1.813141
linethick = 1.000000;
spline -> from 2.030654,1.009366 to 2.030654,1.009366 to 2.058898,1.035574 to 2.087076,1.066347 to 2.107373,1.099287 to 2.174994,1.209078 to 2.093875,1.291019 to 2.189478,1.377525 to 2.371816,1.542622 to 2.663650,1.568928 to 2.862936,1.564462
"auto_attach?" at 2.485942,1.594216
linethick = 1.000000;
spline -> from 4.457973,1.104050 to 4.457973,1.104050 to 4.644187,1.125561 to 5.003150,1.167106 to 5.221221,1.192296
"interfaces+" at 4.948961,1.215614
linethick = 1.000000;
spline -> from 4.457973,1.076298 to 4.457973,1.076298 to 4.663236,1.052553 to 5.078358,1.004538 to 5.283293,0.980859
"qos?" at 4.948961,1.074196
linethick = 0.500000;
spline -> from 3.229748,0.996952 to 3.229748,0.996952 to 3.255201,0.981319 to 3.280587,0.963551 to 3.302592,0.944207 to 3.347913,0.903910 to 3.330179,0.861938 to 3.384697,0.834745 to 3.592915,0.730472 to 3.684544,0.771787 to 3.909183,0.834745 to 4.028071,0.868113 to 4.146959,0.945653 to 4.227751,1.006574
"select_src_port*" at 3.646776,0.868934
linethick = 0.500000;
spline -> from 3.231324,1.072258 to 3.231324,1.072258 to 3.279963,1.073769 to 3.334448,1.075346 to 3.384697,1.076495 to 3.680275,1.083195 to 4.028400,1.087234 to 4.208045,1.089041
"select_dst_port*" at 3.646776,1.119814
linethick = 0.500000;
spline -> from 3.231357,1.021977 to 3.231357,1.021977 to 3.279536,1.008873 to 3.333791,0.996328 to 3.384697,0.989825 to 3.615904,0.960070 to 3.677647,0.962533 to 3.909183,0.989825 to 4.011650,1.001911 to 4.125612,1.030155 to 4.209031,1.053571
"output_port?" at 3.646776,1.024046
linethick = 1.000000;
spline -> from 5.531250,0.967000 to 5.531250,0.967000 to 5.705969,0.967000 to 6.031105,0.967000 to 6.216005,0.967000
"queues value*" at 5.904663,1.001221
linethick = 1.000000;
spline -> from 0.680815,0.380737 to 0.680815,0.380737 to 0.969364,0.508361 to 1.511060,0.747977 to 1.769363,0.862201
"bridge" at 1.350167,0.841576
linethick = 1.000000;
spline -> from 0.973535,0.251524 to 0.973535,0.251524 to 1.313483,0.220416 to 1.779150,0.178867 to 2.189478,0.145963 to 2.461836,0.124123 to 2.781455,0.102043 to 2.953678,0.090437
"ipfix?" at 1.918071,0.221227
linethick = 1.000000;
spline -> from 3.263181,2.038930 to 3.263181,2.038930 to 3.451366,2.038930 to 3.754497,2.038930 to 3.989646,2.038930
"timeout_policy?" at 3.646776,2.073151
.ps +3
.PE
.RE\}
.bp
.SH "Open_vSwitch TABLE"
.PP
Configuration for an Open vSwitch daemon\[char46] There must be exactly one record in the \fBOpen_vSwitch\fR table\[char46]
.SS "Summary:
.TQ .25in
\fIConfiguration:\fR
.RS .25in
.TQ 2.75in
\fBdatapaths\fR
map of string-\fBDatapath\fR pairs
.TQ 2.75in
\fBbridges\fR
set of \fBBridge\fRs
.TQ 2.75in
\fBssl\fR
optional \fBSSL\fR
.TQ 2.75in
\fBexternal_ids : system-id\fR
optional string
.TQ 2.75in
\fBexternal_ids : hostname\fR
optional string
.TQ 2.75in
\fBexternal_ids : rundir\fR
optional string
.TQ 2.75in
\fBother_config : stats-update-interval\fR
optional string, containing an integer, at least 5,000
.TQ 2.75in
\fBother_config : flow-restore-wait\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : flow-limit\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBother_config : max-idle\fR
optional string, containing an integer, at least 500
.TQ 2.75in
\fBother_config : max-revalidator\fR
optional string, containing an integer, at least 100
.TQ 2.75in
\fBother_config : min-revalidate-pps\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBother_config : offloaded-stats-delay\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBother_config : hw-offload\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : n-offload-threads\fR
optional string, containing an integer, in range 1 to 10
.TQ 2.75in
\fBother_config : tc-policy\fR
optional string, one of \fBnone\fR, \fBskip_hw\fR, or \fBskip_sw\fR
.TQ 2.75in
\fBother_config : dpdk-init\fR
optional string, one of \fBfalse\fR, \fBtrue\fR, or \fBtry\fR
.TQ 2.75in
\fBother_config : dpdk-lcore-mask\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : pmd-cpu-mask\fR
optional string
.TQ 2.75in
\fBother_config : dpdk-alloc-mem\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBother_config : dpdk-socket-mem\fR
optional string
.TQ 2.75in
\fBother_config : dpdk-socket-limit\fR
optional string
.TQ 2.75in
\fBother_config : dpdk-hugepage-dir\fR
optional string
.TQ 2.75in
\fBother_config : dpdk-extra\fR
optional string
.TQ 2.75in
\fBother_config : vhost-sock-dir\fR
optional string
.TQ 2.75in
\fBother_config : vhost-iommu-support\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : vhost-postcopy-support\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : per-port-memory\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : shared-mempool-config\fR
optional string
.TQ 2.75in
\fBother_config : tx-flush-interval\fR
optional string, containing an integer, in range 0 to 1,000,000
.TQ 2.75in
\fBother_config : pmd-perf-metrics\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : smc-enable\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : pmd-rxq-assign\fR
optional string, one of \fBcycles\fR, \fBgroup\fR, or \fBroundrobin\fR
.TQ 2.75in
\fBother_config : pmd-rxq-isolate\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : n-handler-threads\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : n-revalidator-threads\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : emc-insert-inv-prob\fR
optional string, containing an integer, in range 0 to 4,294,967,295
.TQ 2.75in
\fBother_config : vlan-limit\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBother_config : bundle-idle-timeout\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : offload-rebalance\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : pmd-auto-lb\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : pmd-auto-lb-rebal-interval\fR
optional string, containing an integer, in range 0 to 20,000
.TQ 2.75in
\fBother_config : pmd-auto-lb-load-threshold\fR
optional string, containing an integer, in range 0 to 100
.TQ 2.75in
\fBother_config : pmd-auto-lb-improvement-threshold\fR
optional string, containing an integer, in range 0 to 100
.TQ 2.75in
\fBother_config : pmd-sleep-max\fR
optional string, containing an integer, in range 0 to 10,000
.TQ 2.75in
\fBother_config : userspace-tso-enable\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fIStatus:\fR
.RS .25in
.TQ 2.75in
\fBnext_cfg\fR
integer
.TQ 2.75in
\fBcur_cfg\fR
integer
.TQ 2.75in
\fBdpdk_initialized\fR
boolean
.TQ .25in
\fIStatistics:\fR
.RS .25in
.TQ 2.50in
\fBother_config : enable-statistics\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBstatistics : cpu\fR
optional string, containing an integer, at least 1
.TQ 2.50in
\fBstatistics : load_average\fR
optional string
.TQ 2.50in
\fBstatistics : memory\fR
optional string
.TQ 2.50in
\fBstatistics : process_NAME\fR
optional string
.TQ 2.50in
\fBstatistics : file_systems\fR
optional string
.RE
.RE
.TQ .25in
\fIVersion Reporting:\fR
.RS .25in
.TQ 2.75in
\fBovs_version\fR
optional string
.TQ 2.75in
\fBdb_version\fR
optional string
.TQ 2.75in
\fBsystem_type\fR
optional string
.TQ 2.75in
\fBsystem_version\fR
optional string
.TQ 2.75in
\fBdpdk_version\fR
optional string
.RE
.TQ .25in
\fICapabilities:\fR
.RS .25in
.TQ 2.75in
\fBdatapath_types\fR
set of strings
.TQ 2.75in
\fBiface_types\fR
set of strings
.RE
.TQ .25in
\fIDatabase Configuration:\fR
.RS .25in
.TQ 2.75in
\fBmanager_options\fR
set of \fBManager\fRs
.RE
.TQ .25in
\fIIPsec:\fR
.RS .25in
.TQ 2.75in
\fBother_config : private_key\fR
optional string
.TQ 2.75in
\fBother_config : certificate\fR
optional string
.TQ 2.75in
\fBother_config : ca_cert\fR
optional string
.TQ .25in
\fIPlaintext Tunnel Policy:\fR
.RS .25in
.TQ 2.50in
\fBother_config : ipsec_skb_mark\fR
optional string
.RE
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.ST "Configuration:"
.PP
.IP "\fBdatapaths\fR: map of string-\fBDatapath\fR pairs"
Map of datapath types to datapaths\[char46] The \fBdatapath_type\fR column of the \fBBridge\fR table is used as a key for this map\[char46] The value points to a row in the \fBDatapath\fR table\[char46]
.IP "\fBbridges\fR: set of \fBBridge\fRs"
Set of bridges managed by the daemon\[char46]
.IP "\fBssl\fR: optional \fBSSL\fR"
SSL used globally by the daemon\[char46]
.IP "\fBexternal_ids : system-id\fR: optional string"
A unique identifier for the Open vSwitch\(cqs physical host\[char46] The form of the identifier depends on the type of the host\[char46]
.IP "\fBexternal_ids : hostname\fR: optional string"
The hostname for the host running Open vSwitch\[char46] This is a fully qualified domain name since version 2\[char46]6\[char46]2\[char46]
.IP "\fBexternal_ids : rundir\fR: optional string"
In Open vSwitch 2\[char46]8 and later, the run directory of the running Open vSwitch daemon\[char46] This directory is used for runtime state such as control and management sockets\[char46] The value of \fBother_config:vhost-sock-dir\fR is relative to this directory\[char46]
.IP "\fBother_config : stats-update-interval\fR: optional string, containing an integer, at least 5,000"
Interval for updating statistics to the database, in milliseconds\[char46] This option will affect the update of the \fBstatistics\fR column in the following tables: \fBPort\fR, \fBInterface
\fR, \fBMirror\fR\[char46]
.IP
Default value is 5000 ms\[char46]
.IP
Getting statistics more frequently can be achieved via OpenFlow\[char46]
.IP "\fBother_config : flow-restore-wait\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
When \fBovs\-vswitchd\fR starts up, it has an empty flow table and therefore it handles all arriving packets in its default fashion according to its configuration, by dropping them or sending them to an OpenFlow controller or switching them as a standalone switch\[char46] This behavior is ordinarily desirable\[char46] However, if \fBovs\-vswitchd\fR is restarting as part of a ``hot-upgrade,\(cq\(cq then this leads to a relatively long period during which packets are mishandled\[char46]
.IP
This option allows for improvement\[char46] When \fBovs\-vswitchd\fR starts with this value set as \fBtrue\fR, it will neither flush or expire previously set datapath flows nor will it send and receive any packets to or from the datapath\[char46] When this value is later set to \fBfalse\fR, \fBovs\-vswitchd\fR will start receiving packets from the datapath and re-setup the flows\[char46]
.IP
Additionally, \fBovs\-vswitchd\fR is prevented from connecting to controllers when this value is set to \fBtrue\fR\[char46] This prevents controllers from making changes to the flow table in the middle of flow restoration, which could result in undesirable intermediate states\[char46] Once this value has been set to \fBfalse\fR and the desired flow state has been restored, \fBovs\-vswitchd\fR will be able to reconnect to controllers and process any new flow table modifications\[char46]
.IP
Thus, with this option, the procedure for a hot-upgrade of \fBovs\-vswitchd\fR becomes roughly the following:
.RS
.IP 1. .4in
Stop \fBovs\-vswitchd\fR\[char46]
.IP 2. .4in
Set \fBother_config:flow-restore-wait\fR to \fBtrue\fR\[char46]
.IP 3. .4in
Start \fBovs\-vswitchd\fR\[char46]
.IP 4. .4in
Use \fBovs\-ofctl\fR (or some other program, such as an OpenFlow controller) to restore the OpenFlow flow table to the desired state\[char46]
.IP 5. .4in
Set \fBother_config:flow-restore-wait\fR to \fBfalse\fR (or remove it entirely from the database)\[char46]
.RE
.IP
The \fBovs\-ctl\fR\(cqs ``restart\(cq\(cq and ``force-reload-kmod\(cq\(cq functions use the above config option during hot upgrades\[char46]
.IP "\fBother_config : flow-limit\fR: optional string, containing an integer, at least 0"
The maximum number of flows allowed in the datapath flow table\[char46] Internally OVS will choose a flow limit which will likely be lower than this number, based on real time network conditions\[char46] Tweaking this value is discouraged unless you know exactly what you\(cqre doing\[char46]
.IP
The default is 200000\[char46]
.IP "\fBother_config : max-idle\fR: optional string, containing an integer, at least 500"
The maximum time (in ms) that idle flows will remain cached in the datapath\[char46] Internally OVS will check the validity and activity for datapath flows regularly and may expire flows quicker than this number, based on real time network conditions\[char46] Tweaking this value is discouraged unless you know exactly what you\(cqre doing\[char46]
.IP
The default is 10000\[char46]
.IP "\fBother_config : max-revalidator\fR: optional string, containing an integer, at least 100"
The maximum time (in ms) that revalidator threads will wait before executing flow revalidation\[char46] Note that this is maximum allowed value\[char46] Actual timeout used by OVS is minimum of max-idle and max-revalidator values\[char46] Tweaking this value is discouraged unless you know exactly what you\(cqre doing\[char46]
.IP
The default is 500\[char46]
.IP "\fBother_config : min-revalidate-pps\fR: optional string, containing an integer, at least 0"
Set minimum pps that flow must have in order to be revalidated when revalidation duration exceeds half of max-revalidator config variable\[char46] Setting to 0 means always revalidate flows regardless of pps\[char46]
.IP
The default is 5\[char46]
.IP "\fBother_config : offloaded-stats-delay\fR: optional string, containing an integer, at least 0"
Set worst case delay (in ms) it might take before statistics of offloaded flows are updated\[char46] Offloaded flows younger than this delay will always be revalidated regardless of \fBother_config:min-revalidate-pps\fR\[char46]
.IP
The default is 2000\[char46]
.IP "\fBother_config : hw-offload\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set this value to \fBtrue\fR to enable netdev flow offload\[char46]
.IP
The default value is \fBfalse\fR\[char46] Changing this value requires restarting the daemon
.IP
Currently Open vSwitch supports hardware offloading on Linux systems\[char46] On other systems, this value is ignored\[char46] This functionality is considered \(cqexperimental\(cq\[char46] Depending on which OpenFlow matches and actions are configured, which kernel version is used, and what hardware is available, Open vSwitch may not be able to offload functionality to hardware\[char46]
.IP
In order to dump HW offloaded flows use \fBovs\-appctl dpctl/dump\-flows\fR, \fBovs\-dpctl\fR doesn\(cqt support this functionality\[char46] See ovs-vswitchd(8) for details\[char46]
.IP "\fBother_config : n-offload-threads\fR: optional string, containing an integer, in range 1 to 10"
Set this value to the number of threads created to manage hardware offloads\[char46]
.IP
The default value is \fB1\fR\[char46] Changing this value requires restarting the daemon\[char46]
.IP
This is only relevant for userspace datapath and only if \fBother_config:hw-offload\fR is enabled\[char46]
.IP "\fBother_config : tc-policy\fR: optional string, one of \fBnone\fR, \fBskip_hw\fR, or \fBskip_sw\fR"
Specified the policy used with HW offloading\[char46] Options:
.RS
.TP
\fBnone\fR
Add software rule and offload rule to HW\[char46]
.TP
\fBskip_sw\fR
Offload rule to HW only\[char46]
.TP
\fBskip_hw\fR
Add software rule without offloading rule to HW\[char46]
.RE
.IP
This is only relevant if \fBother_config:hw-offload\fR is enabled\[char46]
.IP
The default value is \fBnone\fR\[char46]
.IP "\fBother_config : dpdk-init\fR: optional string, one of \fBfalse\fR, \fBtrue\fR, or \fBtry\fR"
Set this value to \fBtrue\fR or \fBtry\fR to enable runtime support for DPDK ports\[char46] The vswitch must have compile-time support for DPDK as well\[char46]
.IP
A value of \fBtrue\fR will cause the ovs-vswitchd process to abort if DPDK cannot be initialized\[char46] A value of \fBtry\fR will allow the ovs-vswitchd process to continue running even if DPDK cannot be initialized\[char46]
.IP
The default value is \fBfalse\fR\[char46] Changing this value requires restarting the daemon
.IP
If this value is \fBfalse\fR at startup, any dpdk ports which are configured in the bridge will fail due to memory errors\[char46]
.IP "\fBother_config : dpdk-lcore-mask\fR: optional string, containing an integer, at least 1"
Specifies the CPU cores where dpdk lcore threads should be spawned\[char46] The DPDK lcore threads are used for DPDK library tasks, such as library internal message processing, logging, etc\[char46] Value should be in the form of a hex string (so \(cq0x123\(cq) similar to the \(cqtaskset\(cq mask input\[char46]
.IP
The lowest order bit corresponds to the first CPU core\[char46] A set bit means the corresponding core is available and an lcore thread will be created and pinned to it\[char46] If the input does not cover all cores, those uncovered cores are considered not set\[char46]
.IP
For performance reasons, it is best to set this to a single core on the system, rather than allow lcore threads to float\[char46]
.IP
If not specified, the value will be determined by choosing the lowest CPU core from initial cpu affinity list\[char46] Otherwise, the value will be passed directly to the DPDK library\[char46]
.IP "\fBother_config : pmd-cpu-mask\fR: optional string"
Specifies CPU mask for setting the cpu affinity of PMD (Poll Mode Driver) threads\[char46] Value should be in the form of hex string, similar to the dpdk EAL \(cq-c COREMASK\(cq option input or the \(cqtaskset\(cq mask input\[char46]
.IP
The lowest order bit corresponds to the first CPU core\[char46] A set bit means the corresponding core is available and a pmd thread will be created and pinned to it\[char46] If the input does not cover all cores, those uncovered cores are considered not set\[char46]
.IP
If not specified, one pmd thread will be created for each numa node and pinned to any available core on the numa node by default\[char46]
.IP "\fBother_config : dpdk-alloc-mem\fR: optional string, containing an integer, at least 0"
Specifies the amount of memory to preallocate from the hugepage pool, regardless of socket\[char46] It is recommended that dpdk-socket-mem is used instead\[char46]
.IP "\fBother_config : dpdk-socket-mem\fR: optional string"
Specifies the amount of memory to preallocate from the hugepage pool, on a per-socket basis\[char46]
.IP
The specifier is a comma-separated string, in ascending order of CPU socket\[char46] E\[char46]g\[char46] On a four socket system 1024,0,2048 would set socket 0 to preallocate 1024MB, socket 1 to preallocate 0MB, socket 2 to preallocate 2048MB and socket 3 (no value given) to preallocate 0MB\[char46]
.IP
If \fBother_config:dpdk-socket-mem\fR and \fBother_config:dpdk-alloc-mem\fR are not specified, neither will be used and there will be no default value for each numa node\[char46] DPDK defaults will be used instead\[char46] If \fBother_config:dpdk-socket-mem\fR and \fBother_config:dpdk-alloc-mem\fR are specified at the same time, \fBother_config:dpdk-socket-mem\fR will be used as default\[char46] Changing this value requires restarting the daemon\[char46]
.IP "\fBother_config : dpdk-socket-limit\fR: optional string"
Limits the maximum amount of memory that can be used from the hugepage pool, on a per-socket basis\[char46]
.IP
The specifier is a comma-separated list of memory limits per socket\[char46] \fB0\fR will disable the limit for a particular socket\[char46]
.IP
If not specified, OVS will not configure limits by default\[char46] Changing this value requires restarting the daemon\[char46]
.IP "\fBother_config : dpdk-hugepage-dir\fR: optional string"
Specifies the path to the hugetlbfs mount point\[char46]
.IP
If not specified, this will be guessed by the DPDK library (default is /dev/hugepages)\[char46] Changing this value requires restarting the daemon\[char46]
.IP "\fBother_config : dpdk-extra\fR: optional string"
Specifies additional eal command line arguments for DPDK\[char46]
.IP
The default is empty\[char46] Changing this value requires restarting the daemon
.IP "\fBother_config : vhost-sock-dir\fR: optional string"
Specifies a relative path from \fBexternal_ids:rundir\fR to the vhost-user unix domain socket files\[char46] If this value is unset, the sockets are put directly in \fBexternal_ids:rundir\fR\[char46]
.IP
Changing this value requires restarting the daemon\[char46]
.IP "\fBother_config : vhost-iommu-support\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
vHost IOMMU is a security feature, which restricts the vhost memory that a virtio device may access\[char46] vHost IOMMU support is disabled by default, due to a bug in QEMU implementations of the vhost REPLY_ACK protocol, (on which vHost IOMMU relies) prior to v2\[char46]9\[char46]1\[char46] Setting this value to \fBtrue\fR enables vHost IOMMU support for vHost User Client ports in OvS-DPDK, starting from DPDK v17\[char46]11\[char46]
.IP
Changing this value requires restarting the daemon\[char46]
.IP "\fBother_config : vhost-postcopy-support\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
vHost post-copy is a feature which allows switching live migration of VM attached to dpdkvhostuserclient port to post-copy mode if default pre-copy migration can not be converged or takes too long to converge\[char46] Setting this value to \fBtrue\fR enables vHost post-copy support for all dpdkvhostuserclient ports\[char46] Available starting from DPDK v18\[char46]11 and QEMU 2\[char46]12\[char46]
.IP
Changing this value requires restarting the daemon\[char46]
.IP "\fBother_config : per-port-memory\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
By default OVS DPDK uses a shared memory model wherein devices that have the same MTU and socket values can share the same mempool\[char46] Setting this value to \fBtrue\fR changes this behaviour\[char46] Per port memory allow DPDK devices to use private memory per device\[char46] This can provide greater transparency as regards memory usage but potentially at the cost of greater memory requirements\[char46]
.IP
Changing this value requires restarting the daemon if dpdk-init has already been set to true\[char46]
.IP "\fBother_config : shared-mempool-config\fR: optional string"
Specifies dpdk shared mempool config\[char46]
.IP
Value should be set in the following form:
.IP
\fBother_config:shared\-mempool\-config=<
user\-shared\-mempool\-mtu\-list>\fR
.IP
where
.IP
.RS
.IP \(bu
<user-shared-mempool-mtu-list> ::= NULL | <non-empty-list>
.IP \(bu
<non-empty-list> ::= <user-mtus> | <user-mtus> , <non-empty-list>
.IP \(bu
<user-mtus> ::= <mtu-all-socket> | <mtu-socket-pair>
.IP \(bu
<mtu-all-socket> ::= <mtu>
.IP \(bu
<mtu-socket-pair> ::= <mtu> : <socket-id>
.RE
.IP
Changing this value requires restarting the daemon if dpdk-init has already been set to true\[char46]
.IP "\fBother_config : tx-flush-interval\fR: optional string, containing an integer, in range 0 to 1,000,000"
Specifies the time in microseconds that a packet can wait in output batch for sending i\[char46]e\[char46] amount of time that packet can spend in an intermediate output queue before sending to netdev\[char46] This option can be used to configure balance between throughput and latency\[char46] Lower values decreases latency while higher values may be useful to achieve higher performance\[char46]
.IP
Defaults to 0 i\[char46]e\[char46] instant packet sending (latency optimized)\[char46]
.IP "\fBother_config : pmd-perf-metrics\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Enables recording of detailed PMD performance metrics for analysis and trouble-shooting\[char46] This can have a performance impact in the order of 1%\[char46]
.IP
Defaults to false but can be changed at any time\[char46]
.IP "\fBother_config : smc-enable\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Signature match cache or SMC is a cache between EMC and megaflow cache\[char46] It does not store the full key of the flow, so it is more memory efficient comparing to EMC cache\[char46] SMC is especially useful when flow count is larger than EMC capacity\[char46]
.IP
Defaults to false but can be changed at any time\[char46]
.IP "\fBother_config : pmd-rxq-assign\fR: optional string, one of \fBcycles\fR, \fBgroup\fR, or \fBroundrobin\fR"
Specifies how RX queues will be automatically assigned to CPU cores\[char46] Options:
.RS
.TP
\fBcycles\fR
Rxqs will be sorted by order of measured processing cycles before being assigned to CPU cores\[char46]
.TP
\fBroundrobin\fR
Rxqs will be round-robined across CPU cores\[char46]
.TP
\fBgroup\fR
Rxqs will be sorted by order of measured processing cycles before being assigned to CPU cores with lowest estimated load\[char46]
.RE
.IP
The default value is \fBcycles\fR\[char46]
.IP
Changing this value will affect an automatic re-assignment of Rxqs to CPUs\[char46] Note: Rxqs mapped to CPU cores with \fBpmd\-rxq\-affinity\fR are unaffected\[char46]
.IP "\fBother_config : pmd-rxq-isolate\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Specifies if a CPU core will be isolated after being pinned with an Rx queue\[char46]
.IP
Set this value to \fBfalse\fR to non-isolate a CPU core after it is pinned with an Rxq using \fBpmd\-rxq\-affinity\fR\[char46] This will allow OVS to assign other Rxqs to that CPU core\[char46]
.IP
The default value is \fBtrue\fR\[char46]
.IP
This can only be \fBfalse\fR when \fBpmd\-rxq\-assign\fR is set to \fBgroup\fR\[char46]
.IP "\fBother_config : n-handler-threads\fR: optional string, containing an integer, at least 1"
Attempts to specify the number of threads for software datapaths to use for handling new flows\[char46] Some datapaths may choose to ignore this and it will be set to a sensible option for the datapath type\[char46]
.IP
This configuration is per datapath\[char46] If you have more than one software datapath (e\[char46]g\[char46] some \fBsystem\fR bridges and some \fBnetdev\fR bridges), then the total number of threads is \fBn\-handler\-threads\fR times the number of software datapaths\[char46]
.IP "\fBother_config : n-revalidator-threads\fR: optional string, containing an integer, at least 1"
Attempts to specify the number of threads for software datapaths to use for revalidating flows in the datapath\[char46] Some datapaths may choose to ignore this and will set to a sensible option for the datapath type\[char46]
.IP
Typically, there is a direct correlation between the number of revalidator threads, and the number of flows allowed in the datapath\[char46] The default is the number of cpu cores divided by four plus one\[char46] If \fBn\-handler\-threads\fR is set, the default changes to the number of cpu cores minus the number of handler threads\[char46]
.IP
This configuration is per datapath\[char46] If you have more than one software datapath (e\[char46]g\[char46] some \fBsystem\fR bridges and some \fBnetdev\fR bridges), then the total number of threads is \fBn\-handler\-threads\fR times the number of software datapaths\[char46]
.IP "\fBother_config : emc-insert-inv-prob\fR: optional string, containing an integer, in range 0 to 4,294,967,295"
Specifies the inverse probability (1/emc-insert-inv-prob) of a flow being inserted into the Exact Match Cache (EMC)\[char46] On average one in every \fBemc\-insert\-inv\-prob\fR packets that generate a unique flow will cause an insertion into the EMC\[char46] A value of 1 will result in an insertion for every flow (1/1 = 100%) whereas a value of zero will result in no insertions and essentially disable the EMC\[char46]
.IP
Defaults to 100 ie\[char46] there is (1/100 =) 1% chance of EMC insertion\[char46]
.IP "\fBother_config : vlan-limit\fR: optional string, containing an integer, at least 0"
Limits the number of VLAN headers that can be matched to the specified number\[char46] Further VLAN headers will be treated as payload, e\[char46]g\[char46] a packet with more 802\[char46]1q headers will match Ethernet type 0x8100\[char46]
.IP
Open vSwitch userspace currently supports at most 2 VLANs, and each datapath has its own limit\[char46] If \fBvlan\-limit\fR is nonzero, it acts as a further limit\[char46]
.IP
If this value is absent, the default is currently 1\[char46] This maintains backward compatibility with controllers that were designed for use with Open vSwitch versions earlier than 2\[char46]8, which only supported one VLAN\[char46]
.IP "\fBother_config : bundle-idle-timeout\fR: optional string, containing an integer, at least 1"
The maximum time (in seconds) that idle bundles will wait to be expired since it was either opened, modified or closed\[char46]
.IP
OpenFlow specification mandates the timeout to be at least one second\[char46] The default is 10 seconds\[char46]
.IP "\fBother_config : offload-rebalance\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Configures HW offload rebalancing, that allows to dynamically offload and un-offload flows while an offload-device is out of resources (OOR)\[char46] This policy allows flows to be selected for offloading based on the packets-per-second (pps) rate of flows\[char46]
.IP
Set this value to \fBtrue\fR to enable this option\[char46]
.IP
The default value is \fBfalse\fR\[char46] Changing this value requires restarting the daemon\[char46]
.IP
This is only relevant if HW offloading is enabled (hw-offload)\[char46] When this policy is enabled, it also requires \(cqtc-policy\(cq to be set to \(cqskip_sw\(cq\[char46]
.IP "\fBother_config : pmd-auto-lb\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Configures PMD Auto Load Balancing that allows automatic assignment of RX queues to PMDs if any of PMDs is overloaded (i\[char46]e\[char46] a processing cycles > \fBother_config:pmd-auto-lb-load-threshold\fR)\[char46]
.IP
It uses current scheme of cycle based assignment of RX queues that are not statically pinned to PMDs\[char46]
.IP
The default value is \fBfalse\fR\[char46]
.IP
Set this value to \fBtrue\fR to enable this option\[char46] It is currently disabled by default and an experimental feature\[char46]
.IP
This only comes in effect if cycle based assignment is enabled and there are more than one non-isolated PMDs present and at least one of it polls more than one queue\[char46]
.IP "\fBother_config : pmd-auto-lb-rebal-interval\fR: optional string, containing an integer, in range 0 to 20,000"
The minimum time (in minutes) 2 consecutive PMD Auto Load Balancing iterations\[char46]
.IP
The default value is 1 min\[char46] If configured to 0 then it would be converted to default value i\[char46]e\[char46] 1 min
.IP
This option can be configured to avoid frequent trigger of auto load balancing of PMDs\[char46] For e\[char46]g\[char46] set the value (in min) such that it occurs once in few hours or a day or a week\[char46]
.IP "\fBother_config : pmd-auto-lb-load-threshold\fR: optional string, containing an integer, in range 0 to 100"
Specifies the minimum PMD thread load threshold (% of used cycles) of any non-isolated PMD threads when a PMD Auto Load Balance may be triggered\[char46]
.IP
The default value is \fB95%\fR\[char46]
.IP "\fBother_config : pmd-auto-lb-improvement-threshold\fR: optional string, containing an integer, in range 0 to 100"
Specifies the minimum evaluated % improvement in load distribution across the non-isolated PMD threads that will allow a PMD Auto Load Balance to occur\[char46]
.IP
Note, setting this parameter to 0 will always allow an auto load balance to occur regardless of estimated improvement or not\[char46]
.IP
The default value is \fB25%\fR\[char46]
.IP "\fBother_config : pmd-sleep-max\fR: optional string, containing an integer, in range 0 to 10,000"
Specifies the maximum sleep time that will be requested in microseconds per iteration for a PMD thread which has received zero or a small amount of packets from the Rx queues it is polling\[char46]
.IP
The actual sleep time requested is based on the load of the Rx queues that the PMD polls and may be less than the maximum value\[char46]
.IP
The default value is \fB0 microseconds\fR, which means that the PMD will not sleep regardless of the load from the Rx queues that it polls\[char46]
.IP
The maximum value is \fB10000 microseconds\fR\[char46]
.IP "\fBother_config : userspace-tso-enable\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set this value to \fBtrue\fR to enable userspace support for TCP Segmentation Offloading (TSO)\[char46] When it is enabled, the interfaces can provide an oversized TCP segment to the datapath and the datapath will offload the TCP segmentation and checksum calculation to the interfaces when necessary\[char46]
.IP
The default value is \fBfalse\fR\[char46] Changing this value requires restarting the daemon\[char46]
.IP
The feature only works if Open vSwitch is built with DPDK support\[char46]
.IP
The feature is considered experimental\[char46]
.ST "Status:"
.PP
.IP "\fBnext_cfg\fR: integer"
Sequence number for client to increment\[char46] When a client modifies any part of the database configuration and wishes to wait for Open vSwitch to finish applying the changes, it may increment this sequence number\[char46]
.IP "\fBcur_cfg\fR: integer"
Sequence number that Open vSwitch sets to the current value of \fBnext_cfg\fR after it finishes applying a set of configuration changes\[char46]
.IP "\fBdpdk_initialized\fR: boolean"
True if \fBother_config:dpdk-init\fR is set to true and the DPDK library is successfully initialized\[char46]
.ST "Statistics:"
.PP
.PP
.PP
The \fBstatistics\fR column contains key-value pairs that report statistics about a system running an Open vSwitch\[char46] These are updated periodically (currently, every 5 seconds)\[char46] Key-value pairs that cannot be determined or that do not apply to a platform are omitted\[char46]
.IP "\fBother_config : enable-statistics\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Statistics are disabled by default to avoid overhead in the common case when statistics gathering is not useful\[char46] Set this value to \fBtrue\fR to enable populating the \fBstatistics\fR column or to \fBfalse\fR to explicitly disable it\[char46]
.IP "\fBstatistics : cpu\fR: optional string, containing an integer, at least 1"
Number of CPU processors, threads, or cores currently online and available to the operating system on which Open vSwitch is running, as an integer\[char46] This may be less than the number installed, if some are not online or if they are not available to the operating system\[char46]
.IP
Open vSwitch userspace processes are not multithreaded, but the Linux kernel-based datapath is\[char46]
.IP "\fBstatistics : load_average\fR: optional string"
A comma-separated list of three floating-point numbers, representing the system load average over the last 1, 5, and 15 minutes, respectively\[char46]
.IP "\fBstatistics : memory\fR: optional string"
A comma-separated list of integers, each of which represents a quantity of memory in kilobytes that describes the operating system on which Open vSwitch is running\[char46] In respective order, these values are:
.RS
.IP 1. .4in
Total amount of RAM allocated to the OS\[char46]
.IP 2. .4in
RAM allocated to the OS that is in use\[char46]
.IP 3. .4in
RAM that can be flushed out to disk or otherwise discarded if that space is needed for another purpose\[char46] This number is necessarily less than or equal to the previous value\[char46]
.IP 4. .4in
Total disk space allocated for swap\[char46]
.IP 5. .4in
Swap space currently in use\[char46]
.RE
.IP
On Linux, all five values can be determined and are included\[char46] On other operating systems, only the first two values can be determined, so the list will only have two values\[char46]
.IP "\fBstatistics : process_NAME\fR: optional string"
One such key-value pair, with \fBNAME\fR replaced by a process name, will exist for each running Open vSwitch daemon process, with \fIname\fR replaced by the daemon\(cqs name (e\[char46]g\[char46] \fBprocess_ovs\-vswitchd\fR)\[char46] The value is a comma-separated list of integers\[char46] The integers represent the following, with memory measured in kilobytes and durations in milliseconds:
.RS
.IP 1. .4in
The process\(cqs virtual memory size\[char46]
.IP 2. .4in
The process\(cqs resident set size\[char46]
.IP 3. .4in
The amount of user and system CPU time consumed by the process\[char46]
.IP 4. .4in
The number of times that the process has crashed and been automatically restarted by the monitor\[char46]
.IP 5. .4in
The duration since the process was started\[char46]
.IP 6. .4in
The duration for which the process has been running\[char46]
.RE
.IP
The interpretation of some of these values depends on whether the process was started with the \fB\-\-monitor\fR\[char46] If it was not, then the crash count will always be 0 and the two durations will always be the same\[char46] If \fB\-\-monitor\fR was given, then the crash count may be positive; if it is, the latter duration is the amount of time since the most recent crash and restart\[char46]
.IP
There will be one key-value pair for each file in Open vSwitch\(cqs ``run directory\(cq\(cq (usually \fB/var/run/openvswitch\fR) whose name ends in \fB\[char46]pid\fR, whose contents are a process ID, and which is locked by a running process\[char46] The \fIname\fR is taken from the pidfile\(cqs name\[char46]
.IP
Currently Open vSwitch is only able to obtain all of the above detail on Linux systems\[char46] On other systems, the same key-value pairs will be present but the values will always be the empty string\[char46]
.IP "\fBstatistics : file_systems\fR: optional string"
A space-separated list of information on local, writable file systems\[char46] Each item in the list describes one file system and consists in turn of a comma-separated list of the following:
.RS
.IP 1. .4in
Mount point, e\[char46]g\[char46] \fB/\fR or \fB/var/log\fR\[char46] Any spaces or commas in the mount point are replaced by underscores\[char46]
.IP 2. .4in
Total size, in kilobytes, as an integer\[char46]
.IP 3. .4in
Amount of storage in use, in kilobytes, as an integer\[char46]
.RE
.IP
This key-value pair is omitted if there are no local, writable file systems or if Open vSwitch cannot obtain the needed information\[char46]
.ST "Version Reporting:"
.PP
.PP
.PP
These columns report the types and versions of the hardware and software running Open vSwitch\[char46] We recommend in general that software should test whether specific features are supported instead of relying on version number checks\[char46] These values are primarily intended for reporting to human administrators\[char46]
.IP "\fBovs_version\fR: optional string"
The Open vSwitch version number, e\[char46]g\[char46] \fB1\[char46]1\[char46]0\fR\[char46]
.IP "\fBdb_version\fR: optional string"
The database schema version number, e\[char46]g\[char46] \fB1\[char46]2\[char46]3\fR\[char46] See ovsdb-tool(1) for an explanation of the numbering scheme\[char46]
.IP
The schema version is part of the database schema, so it can also be retrieved by fetching the schema using the Open vSwitch database protocol\[char46]
.IP "\fBsystem_type\fR: optional string"
An identifier for the type of system on top of which Open vSwitch runs, e\[char46]g\[char46] \fBKVM\fR\[char46]
.IP
System integrators are responsible for choosing and setting an appropriate value for this column\[char46]
.IP "\fBsystem_version\fR: optional string"
The version of the system identified by \fBsystem_type\fR, e\[char46]g\[char46] \fB4\[char46]18\[char46]0\-372\[char46]19\[char46]1\[char46]el8_6\fR on RHEL 8\[char46]6 with kernel 4\[char46]18\[char46]0\-372\[char46]19\[char46]1\[char46]
.IP
System integrators are responsible for choosing and setting an appropriate value for this column\[char46]
.IP "\fBdpdk_version\fR: optional string"
The version of the linked DPDK library\[char46]
.ST "Capabilities:"
.PP
.PP
.PP
These columns report capabilities of the Open vSwitch instance\[char46]
.IP "\fBdatapath_types\fR: set of strings"
This column reports the different dpifs registered with the system\[char46] These are the values that this instance supports in the \fBdatapath_type\fR column of the \fBBridge\fR table\[char46]
.IP "\fBiface_types\fR: set of strings"
This column reports the different netdevs registered with the system\[char46] These are the values that this instance supports in the \fBtype\fR column of the \fBInterface\fR table\[char46]
.ST "Database Configuration:"
.PP
.PP
.PP
These columns primarily configure the Open vSwitch database (\fBovsdb\-server\fR), not the Open vSwitch switch (\fBovs\-vswitchd\fR)\[char46] The OVSDB database also uses the \fBssl\fR settings\[char46]
.PP
.PP
The Open vSwitch switch does read the database configuration to determine remote IP addresses to which in-band control should apply\[char46]
.IP "\fBmanager_options\fR: set of \fBManager\fRs"
Database clients to which the Open vSwitch database server should connect or to which it should listen, along with options for how these connections should be configured\[char46] See the \fBManager\fR table for more information\[char46]
.IP
For this column to serve its purpose, \fBovsdb\-server\fR must be configured to honor it\[char46] The easiest way to do this is to invoke \fBovsdb\-server\fR with the option \fB\-\-remote=db:Open_vSwitch,Open_vSwitch,manager_options\fR The startup scripts that accompany Open vSwitch do this by default\[char46]
.ST "IPsec:"
.PP
.PP
.PP
These settings control the global configuration of IPsec tunnels\[char46] The \fBoptions\fR column of the \fBInterface\fR table configures IPsec for individual tunnels\[char46] The \fBoptions\fR column also allows for custom options prefixed with \fBipsec_\fR to be passed to the individual connections\[char46]
.PP
.PP
OVS IPsec supports the following three forms of authentication\[char46] Currently, all IPsec tunnels must use the same form:
.RS
.IP 1. .4in
Pre-shared keys: Omit the global settings\[char46] On each tunnel, set \fBoptions:psk\fR\[char46]
.IP 2. .4in
Self-signed certificates: Set the \fBprivate_key\fR and \fBcertificate\fR global settings\[char46] On each tunnel, set \fBoptions:remote_cert\fR\[char46] The remote certificate can be self-signed\[char46]
.IP 3. .4in
CA-signed certificates: Set all of the global settings\[char46] On each tunnel, set \fBoptions:remote_name\fR to the common name (CN) of the remote certificate\[char46] The remote certificate must be signed by the CA\[char46]
.RE
.IP "\fBother_config : private_key\fR: optional string"
Name of a PEM file containing the private key used as the switch\(cqs identity for IPsec tunnels\[char46]
.IP "\fBother_config : certificate\fR: optional string"
Name of a PEM file containing a certificate that certifies the switch\(cqs private key, and identifies a trustworthy switch for IPsec tunnels\[char46] The certificate must be x\[char46]509 version 3 and with the string in common name (CN) also set in the subject alternative name (SAN)\[char46]
.IP "\fBother_config : ca_cert\fR: optional string"
Name of a PEM file containing the CA certificate used to verify that a remote switch of the IPsec tunnel is trustworthy\[char46]
.ST "Plaintext Tunnel Policy:"
.PP
.PP
.PP
When an IPsec tunnel is configured in this database, multiple independent components take responsibility for implementing it\[char46] \fBovs\-vswitchd\fR and its datapath handle packet forwarding to the tunnel and a separate daemon pushes the tunnel\(cqs IPsec policy configuration to the kernel or other entity that implements it\[char46] There is a race: if the former configuration completes before the latter, then packets sent by the local host over the tunnel can be transmitted in plaintext\[char46] Using this setting, OVS users can avoid this undesirable situation\[char46]
.IP "\fBother_config : ipsec_skb_mark\fR: optional string"
This setting takes the form \fB\fIvalue\fB/\fImask\fB\fR\[char46] If it is specified, then the \fBskb_mark\fR field in every outgoing tunneled packet sent in plaintext is compared against it and, if it matches, the packet is dropped\[char46] This is a global setting that is applied to every tunneled packet, regardless of whether IPsec encryption is enabled for the tunnel, the type of tunnel, or whether OVS is involved\[char46]
.IP
Example policies:
.RS
.TP
\fB1/1\fR
Drop all unencrypted tunneled packets in which the least-significant bit of \fBskb_mark\fR is 1\[char46] This would be a useful policy given an OpenFlow flow table that sets \fBskb_mark\fR to 1 for traffic that should be encrypted\[char46] The default \fBskb_mark\fR is 0, so this would not affect other traffic\[char46]
.TP
\fB0/1\fR
Drop all unencrypted tunneled packets in which the least-significant bit of \fBskb_mark\fR is 0\[char46] This would be a useful policy if no unencrypted tunneled traffic should exit the system without being specially permitted by setting \fBskb_mark\fR to 1\[char46]
.TP
(empty)
If this setting is empty or unset, then all unencrypted tunneled packets are transmitted in the usual way\[char46]
.RE
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBother_config\fR: map of string-string pairs"
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Bridge TABLE"
.PP
.PP
.PP
Configuration for a bridge within an \fBOpen_vSwitch\fR\[char46]
.PP
.PP
A \fBBridge\fR record represents an Ethernet switch with one or more ``ports,\(cq\(cq which are the \fBPort\fR records pointed to by the \fBBridge\fR\(cqs \fBports\fR column\[char46]
.SS "Summary:
.TQ .25in
\fICore Features:\fR
.RS .25in
.TQ 2.75in
\fBname\fR
immutable string (must be unique within table)
.TQ 2.75in
\fBports\fR
set of \fBPort\fRs
.TQ 2.75in
\fBmirrors\fR
set of \fBMirror\fRs
.TQ 2.75in
\fBnetflow\fR
optional \fBNetFlow\fR
.TQ 2.75in
\fBsflow\fR
optional \fBsFlow\fR
.TQ 2.75in
\fBipfix\fR
optional \fBIPFIX\fR
.TQ 2.75in
\fBflood_vlans\fR
set of up to 4,096 integers, in range 0 to 4,095
.TQ 2.75in
\fBauto_attach\fR
optional \fBAutoAttach\fR
.RE
.TQ .25in
\fIOpenFlow Configuration:\fR
.RS .25in
.TQ 2.75in
\fBcontroller\fR
set of \fBController\fRs
.TQ 2.75in
\fBflow_tables\fR
map of integer-\fBFlow_Table\fR pairs, key in range 0 to 254
.TQ 2.75in
\fBfail_mode\fR
optional string, either \fBsecure\fR or \fBstandalone\fR
.TQ 2.75in
\fBdatapath_id\fR
optional string
.TQ 2.75in
\fBdatapath_version\fR
string
.TQ 2.75in
\fBother_config : datapath-id\fR
optional string
.TQ 2.75in
\fBother_config : dp-desc\fR
optional string
.TQ 2.75in
\fBother_config : dp-sn\fR
optional string
.TQ 2.75in
\fBother_config : disable-in-band\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : in-band-queue\fR
optional string, containing an integer, in range 0 to 4,294,967,295
.TQ 2.75in
\fBother_config : controller-queue-size\fR
optional string, containing an integer, in range 1 to 512
.TQ 2.75in
\fBprotocols\fR
set of strings, one of \fBOpenFlow10\fR, \fBOpenFlow11\fR, \fBOpenFlow12\fR, \fBOpenFlow13\fR, \fBOpenFlow14\fR, or \fBOpenFlow15\fR
.RE
.TQ .25in
\fISpanning Tree Configuration:\fR
.RS .25in
.TQ .25in
\fISTP Configuration:\fR
.RS .25in
.TQ 2.50in
\fBstp_enable\fR
boolean
.TQ 2.50in
\fBother_config : stp-system-id\fR
optional string
.TQ 2.50in
\fBother_config : stp-priority\fR
optional string, containing an integer, in range 0 to 65,535
.TQ 2.50in
\fBother_config : stp-hello-time\fR
optional string, containing an integer, in range 1 to 10
.TQ 2.50in
\fBother_config : stp-max-age\fR
optional string, containing an integer, in range 6 to 40
.TQ 2.50in
\fBother_config : stp-forward-delay\fR
optional string, containing an integer, in range 4 to 30
.TQ 2.50in
\fBother_config : mcast-snooping-aging-time\fR
optional string, containing an integer, at least 1
.TQ 2.50in
\fBother_config : mcast-snooping-table-size\fR
optional string, containing an integer, at least 1
.TQ 2.50in
\fBother_config : mcast-snooping-disable-flood-unregistered\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fISTP Status:\fR
.RS .25in
.TQ 2.50in
\fBstatus : stp_bridge_id\fR
optional string
.TQ 2.50in
\fBstatus : stp_designated_root\fR
optional string
.TQ 2.50in
\fBstatus : stp_root_path_cost\fR
optional string
.RE
.RE
.TQ .25in
\fIRapid Spanning Tree:\fR
.RS .25in
.TQ .25in
\fIRSTP Configuration:\fR
.RS .25in
.TQ 2.50in
\fBrstp_enable\fR
boolean
.TQ 2.50in
\fBother_config : rstp-address\fR
optional string
.TQ 2.50in
\fBother_config : rstp-priority\fR
optional string, containing an integer, in range 0 to 61,440
.TQ 2.50in
\fBother_config : rstp-ageing-time\fR
optional string, containing an integer, in range 10 to 1,000,000
.TQ 2.50in
\fBother_config : rstp-force-protocol-version\fR
optional string, containing an integer
.TQ 2.50in
\fBother_config : rstp-max-age\fR
optional string, containing an integer, in range 6 to 40
.TQ 2.50in
\fBother_config : rstp-forward-delay\fR
optional string, containing an integer, in range 4 to 30
.TQ 2.50in
\fBother_config : rstp-transmit-hold-count\fR
optional string, containing an integer, in range 1 to 10
.RE
.TQ .25in
\fIRSTP Status:\fR
.RS .25in
.TQ 2.50in
\fBrstp_status : rstp_bridge_id\fR
optional string
.TQ 2.50in
\fBrstp_status : rstp_root_id\fR
optional string
.TQ 2.50in
\fBrstp_status : rstp_root_path_cost\fR
optional string, containing an integer, at least 0
.TQ 2.50in
\fBrstp_status : rstp_designated_id\fR
optional string
.TQ 2.50in
\fBrstp_status : rstp_designated_port_id\fR
optional string
.TQ 2.50in
\fBrstp_status : rstp_bridge_port_id\fR
optional string
.RE
.RE
.TQ .25in
\fIMulticast Snooping Configuration:\fR
.RS .25in
.TQ 2.75in
\fBmcast_snooping_enable\fR
boolean
.RE
.TQ .25in
\fIOther Features:\fR
.RS .25in
.TQ 2.75in
\fBdatapath_type\fR
string
.TQ 2.75in
\fBexternal_ids : bridge-id\fR
optional string
.TQ 2.75in
\fBother_config : hwaddr\fR
optional string
.TQ 2.75in
\fBother_config : forward-bpdu\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : mac-aging-time\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : mac-table-size\fR
optional string, containing an integer, at least 1
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.ST "Core Features:"
.PP
.IP "\fBname\fR: immutable string (must be unique within table)"
Bridge identifier\[char46] Must be unique among the names of ports, interfaces, and bridges on a host\[char46]
.IP
The name must be alphanumeric and must not contain forward or backward slashes\[char46] The name of a bridge is also the name of an \fBInterface\fR (and a \fBPort\fR) within the bridge, so the restrictions on the \fBname\fR column in the \fBInterface\fR table, particularly on length, also apply to bridge names\[char46] Refer to the documentation for \fBInterface\fR names for details\[char46]
.IP "\fBports\fR: set of \fBPort\fRs"
Ports included in the bridge\[char46]
.IP "\fBmirrors\fR: set of \fBMirror\fRs"
Port mirroring configuration\[char46]
.IP "\fBnetflow\fR: optional \fBNetFlow\fR"
NetFlow configuration\[char46]
.IP "\fBsflow\fR: optional \fBsFlow\fR"
sFlow(R) configuration\[char46]
.IP "\fBipfix\fR: optional \fBIPFIX\fR"
IPFIX configuration\[char46]
.IP "\fBflood_vlans\fR: set of up to 4,096 integers, in range 0 to 4,095"
VLAN IDs of VLANs on which MAC address learning should be disabled, so that packets are flooded instead of being sent to specific ports that are believed to contain packets\(cq destination MACs\[char46] This should ordinarily be used to disable MAC learning on VLANs used for mirroring (RSPAN VLANs)\[char46] It may also be useful for debugging\[char46]
.IP
SLB bonding (see the \fBbond_mode\fR column in the \fBPort\fR table) is incompatible with \fBflood_vlans\fR\[char46] Consider using another bonding mode or a different type of mirror instead\[char46]
.IP "\fBauto_attach\fR: optional \fBAutoAttach\fR"
Auto Attach configuration\[char46]
.ST "OpenFlow Configuration:"
.PP
.IP "\fBcontroller\fR: set of \fBController\fRs"
OpenFlow controller set\[char46] If unset, then no OpenFlow controllers will be used\[char46]
.IP
If there are primary controllers, removing all of them clears the OpenFlow flow tables, group table, and meter table\[char46] If there are no primary controllers, adding one also clears these tables\[char46] Other changes to the set of controllers, such as adding or removing a service controller, adding another primary controller to supplement an existing primary controller, or removing only one of two primary controllers, have no effect on these tables\[char46]
.IP "\fBflow_tables\fR: map of integer-\fBFlow_Table\fR pairs, key in range 0 to 254"
Configuration for OpenFlow tables\[char46] Each pair maps from an OpenFlow table ID to configuration for that table\[char46]
.IP "\fBfail_mode\fR: optional string, either \fBsecure\fR or \fBstandalone\fR"
When a controller is configured, it is, ordinarily, responsible for setting up all flows on the switch\[char46] Thus, if the connection to the controller fails, no new network connections can be set up\[char46] If the connection to the controller stays down long enough, no packets can pass through the switch at all\[char46] This setting determines the switch\(cqs response to such a situation\[char46] It may be set to one of the following:
.RS
.TP
\fBstandalone\fR
If no message is received from the controller for three times the inactivity probe interval (see \fBinactivity_probe\fR), then Open vSwitch will take over responsibility for setting up flows\[char46] In this mode, Open vSwitch causes the bridge to act like an ordinary MAC-learning switch\[char46] Open vSwitch will continue to retry connecting to the controller in the background and, when the connection succeeds, it will discontinue its standalone behavior\[char46]
.TP
\fBsecure\fR
Open vSwitch will not set up flows on its own when the controller connection fails or when no controllers are defined\[char46] The bridge will continue to retry connecting to any defined controllers forever\[char46]
.RE
.IP
The default is \fBstandalone\fR if the value is unset, but future versions of Open vSwitch may change the default\[char46]
.IP
The \fBstandalone\fR mode can create forwarding loops on a bridge that has more than one uplink port unless STP is enabled\[char46] To avoid loops on such a bridge, configure \fBsecure\fR mode or enable STP (see \fBstp_enable\fR)\[char46]
.IP
The \fBfail_mode\fR setting applies only to primary controllers\[char46] When more than one primary controller is configured, \fBfail_mode\fR is considered only when none of the configured controllers can be contacted\[char46]
.IP
Changing \fBfail_mode\fR when no primary controllers are configured clears the OpenFlow flow tables, group table, and meter table\[char46]
.IP "\fBdatapath_id\fR: optional string"
Reports the OpenFlow datapath ID in use\[char46] Exactly 16 hex digits\[char46] (Setting this column has no useful effect\[char46] Set \fBother-config:datapath-id\fR instead\[char46])
.IP "\fBdatapath_version\fR: string"
Reports the datapath version\[char46] This column is maintained for backwards compatibility\[char46] The preferred locatation is the \fBdatapath_id\fR column of the \fBDatapath\fR table\[char46] The full documentation for this column is there\[char46]
.IP "\fBother_config : datapath-id\fR: optional string"
Overrides the default OpenFlow datapath ID, setting it to the specified value specified in hex\[char46] The value must either have a \fB0x\fR prefix or be exactly 16 hex digits long\[char46] May not be all-zero\[char46]
.IP "\fBother_config : dp-desc\fR: optional string"
Human readable description of datapath\[char46] It is a maximum 256 byte-long free-form string to describe the datapath for debugging purposes, e\[char46]g\[char46] \fBswitch3 in room 3120\fR\[char46] The value is returned by the switch as a part of reply to OFPMP_DESC request (ofp_desc)\[char46] The OpenFlow specification (e\[char46]g\[char46] 1\[char46]3\[char46]5) describes the ofp_desc structure to contaion \(dqNULL terminated ASCII strings\(dq\[char46] For the compatibility reasons no more than 255 ASCII characters should be used\[char46]
.IP "\fBother_config : dp-sn\fR: optional string"
Serial number\[char46] It is a maximum 32 byte-long free-form string to provide an additional switch identification\[char46] The value is returned by the switch as a part of reply to OFPMP_DESC request (ofp_desc)\[char46] Same as mentioned in the description of \fBother-config:dp-desc\fR, the string should be no more than 31 ASCII characters for the compatibility\[char46]
.IP "\fBother_config : disable-in-band\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, disable in-band control on the bridge regardless of controller and manager settings\[char46]
.IP "\fBother_config : in-band-queue\fR: optional string, containing an integer, in range 0 to 4,294,967,295"
A queue ID as a nonnegative integer\[char46] This sets the OpenFlow queue ID that will be used by flows set up by in-band control on this bridge\[char46] If unset, or if the port used by an in-band control flow does not have QoS configured, or if the port does not have a queue with the specified ID, the default queue is used instead\[char46]
.IP "\fBother_config : controller-queue-size\fR: optional string, containing an integer, in range 1 to 512"
This sets the maximum size of the queue of packets that need to be sent to the OpenFlow management controller\[char46] The value must be less than 512\[char46] If not specified the queue size is limited to 100 packets by default\[char46] Note: increasing the queue size might have a negative impact on latency\[char46]
.IP "\fBprotocols\fR: set of strings, one of \fBOpenFlow10\fR, \fBOpenFlow11\fR, \fBOpenFlow12\fR, \fBOpenFlow13\fR, \fBOpenFlow14\fR, or \fBOpenFlow15\fR"
List of OpenFlow protocols that may be used when negotiating a connection with a controller\[char46] OpenFlow 1\[char46]0, 1\[char46]1, 1\[char46]2, 1\[char46]3, 1\[char46]4, and 1\[char46]5 are enabled by default if this column is empty\[char46]
.ST "Spanning Tree Configuration:"
.PP
.PP
.PP
The IEEE 802\[char46]1D Spanning Tree Protocol (STP) is a network protocol that ensures loop-free topologies\[char46] It allows redundant links to be included in the network to provide automatic backup paths if the active links fails\[char46]
.PP
.PP
These settings configure the slower-to-converge but still widely supported version of Spanning Tree Protocol, sometimes known as 802\[char46]1D\-1998\[char46] Open vSwitch also supports the newer Rapid Spanning Tree Protocol (RSTP), documented later in the section titled \fBRapid
Spanning Tree Configuration\fR\[char46]
.ST "STP Configuration:"
.PP
.IP "\fBstp_enable\fR: boolean"
Enable spanning tree on the bridge\[char46] By default, STP is disabled on bridges\[char46] Bond, internal, and mirror ports are not supported and will not participate in the spanning tree\[char46]
.IP
STP and RSTP are mutually exclusive\[char46] If both are enabled, RSTP will be used\[char46]
.IP "\fBother_config : stp-system-id\fR: optional string"
The bridge\(cqs STP identifier (the lower 48 bits of the bridge-id) in the form \fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR\[char46] By default, the identifier is the MAC address of the bridge\[char46]
.IP "\fBother_config : stp-priority\fR: optional string, containing an integer, in range 0 to 65,535"
The bridge\(cqs relative priority value for determining the root bridge (the upper 16 bits of the bridge-id)\[char46] A bridge with the lowest bridge-id is elected the root\[char46] By default, the priority is 0x8000\[char46]
.IP "\fBother_config : stp-hello-time\fR: optional string, containing an integer, in range 1 to 10"
The interval between transmissions of hello messages by designated ports, in seconds\[char46] By default the hello interval is 2 seconds\[char46]
.IP "\fBother_config : stp-max-age\fR: optional string, containing an integer, in range 6 to 40"
The maximum age of the information transmitted by the bridge when it is the root bridge, in seconds\[char46] By default, the maximum age is 20 seconds\[char46]
.IP "\fBother_config : stp-forward-delay\fR: optional string, containing an integer, in range 4 to 30"
The delay to wait between transitioning root and designated ports to \fBforwarding\fR, in seconds\[char46] By default, the forwarding delay is 15 seconds\[char46]
.IP "\fBother_config : mcast-snooping-aging-time\fR: optional string, containing an integer, at least 1"
The maximum number of seconds to retain a multicast snooping entry for which no packets have been seen\[char46] The default is currently 300 seconds (5 minutes)\[char46] The value, if specified, is forced into a reasonable range, currently 15 to 3600 seconds\[char46]
.IP "\fBother_config : mcast-snooping-table-size\fR: optional string, containing an integer, at least 1"
The maximum number of multicast snooping addresses to learn\[char46] The default is currently 2048\[char46] The value, if specified, is forced into a reasonable range, currently 10 to 1,000,000\[char46]
.IP "\fBother_config : mcast-snooping-disable-flood-unregistered\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBfalse\fR, unregistered multicast packets are forwarded to all ports\[char46] If set to \fBtrue\fR, unregistered multicast packets are forwarded to ports connected to multicast routers\[char46]
.ST "STP Status:"
.PP
.PP
.PP
These key-value pairs report the status of 802\[char46]1D\-1998\[char46] They are present only if STP is enabled (via the \fBstp_enable\fR column)\[char46]
.IP "\fBstatus : stp_bridge_id\fR: optional string"
The bridge ID used in spanning tree advertisements, in the form \fIxxxx\fR\[char46]\fIyyyyyyyyyyyy\fR where the \fIx\fRs are the STP priority, the \fIy\fRs are the STP system ID, and each \fIx\fR and \fIy\fR is a hex digit\[char46]
.IP "\fBstatus : stp_designated_root\fR: optional string"
The designated root for this spanning tree, in the same form as \fBstatus:stp_bridge_id\fR\[char46] If this bridge is the root, this will have the same value as \fBstatus:stp_bridge_id\fR, otherwise it will differ\[char46]
.IP "\fBstatus : stp_root_path_cost\fR: optional string"
The path cost of reaching the designated bridge\[char46] A lower number is better\[char46] The value is 0 if this bridge is the root, otherwise it is higher\[char46]
.ST "Rapid Spanning Tree:"
.PP
.PP
.PP
Rapid Spanning Tree Protocol (RSTP), like STP, is a network protocol that ensures loop-free topologies\[char46] RSTP superseded STP with the publication of 802\[char46]1D\-2004\[char46] Compared to STP, RSTP converges more quickly and recovers more quickly from failures\[char46]
.ST "RSTP Configuration:"
.PP
.IP "\fBrstp_enable\fR: boolean"
Enable Rapid Spanning Tree on the bridge\[char46] By default, RSTP is disabled on bridges\[char46] Bond, internal, and mirror ports are not supported and will not participate in the spanning tree\[char46]
.IP
STP and RSTP are mutually exclusive\[char46] If both are enabled, RSTP will be used\[char46]
.IP "\fBother_config : rstp-address\fR: optional string"
The bridge\(cqs RSTP address (the lower 48 bits of the bridge-id) in the form \fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR\[char46] By default, the address is the MAC address of the bridge\[char46]
.IP "\fBother_config : rstp-priority\fR: optional string, containing an integer, in range 0 to 61,440"
The bridge\(cqs relative priority value for determining the root bridge (the upper 16 bits of the bridge-id)\[char46] A bridge with the lowest bridge-id is elected the root\[char46] By default, the priority is 0x8000 (32768)\[char46] This value needs to be a multiple of 4096, otherwise it\(cqs rounded to the nearest inferior one\[char46]
.IP "\fBother_config : rstp-ageing-time\fR: optional string, containing an integer, in range 10 to 1,000,000"
The Ageing Time parameter for the Bridge\[char46] The default value is 300 seconds\[char46]
.IP "\fBother_config : rstp-force-protocol-version\fR: optional string, containing an integer"
The Force Protocol Version parameter for the Bridge\[char46] This can take the value 0 (STP Compatibility mode) or 2 (the default, normal operation)\[char46]
.IP "\fBother_config : rstp-max-age\fR: optional string, containing an integer, in range 6 to 40"
The maximum age of the information transmitted by the Bridge when it is the Root Bridge\[char46] The default value is 20\[char46]
.IP "\fBother_config : rstp-forward-delay\fR: optional string, containing an integer, in range 4 to 30"
The delay used by STP Bridges to transition Root and Designated Ports to Forwarding\[char46] The default value is 15\[char46]
.IP "\fBother_config : rstp-transmit-hold-count\fR: optional string, containing an integer, in range 1 to 10"
The Transmit Hold Count used by the Port Transmit state machine to limit transmission rate\[char46] The default value is 6\[char46]
.ST "RSTP Status:"
.PP
.PP
.PP
These key-value pairs report the status of 802\[char46]1D\-2004\[char46] They are present only if RSTP is enabled (via the \fBrstp_enable\fR column)\[char46]
.IP "\fBrstp_status : rstp_bridge_id\fR: optional string"
The bridge ID used in rapid spanning tree advertisements, in the form \fIx\fR\[char46]\fIyyy\fR\[char46]\fIzzzzzzzzzzzz\fR where \fIx\fR is the RSTP priority, the \fIy\fRs are a locally assigned system ID extension, the \fIz\fRs are the STP system ID, and each \fIx\fR, \fIy\fR, or \fIz\fR is a hex digit\[char46]
.IP "\fBrstp_status : rstp_root_id\fR: optional string"
The root of this spanning tree, in the same form as \fBrstp_status:rstp_bridge_id\fR\[char46] If this bridge is the root, this will have the same value as \fBrstp_status:rstp_bridge_id\fR, otherwise it will differ\[char46]
.IP "\fBrstp_status : rstp_root_path_cost\fR: optional string, containing an integer, at least 0"
The path cost of reaching the root\[char46] A lower number is better\[char46] The value is 0 if this bridge is the root, otherwise it is higher\[char46]
.IP "\fBrstp_status : rstp_designated_id\fR: optional string"
The RSTP designated ID, in the same form as \fBrstp_status:rstp_bridge_id\fR\[char46]
.IP "\fBrstp_status : rstp_designated_port_id\fR: optional string"
The RSTP designated port ID, as a 4-digit hex number\[char46]
.IP "\fBrstp_status : rstp_bridge_port_id\fR: optional string"
The RSTP bridge port ID, as a 4-digit hex number\[char46]
.ST "Multicast Snooping Configuration:"
.PP
Multicast snooping (RFC 4541) monitors the Internet Group Management Protocol (IGMP) and Multicast Listener Discovery traffic between hosts and multicast routers\[char46] The switch uses what IGMP and MLD snooping learns to forward multicast traffic only to interfaces that are connected to interested receivers\[char46] Currently it supports IGMPv1, IGMPv2, IGMPv3, MLDv1 and MLDv2 protocols\[char46]
.IP "\fBmcast_snooping_enable\fR: boolean"
Enable multicast snooping on the bridge\[char46] For now, the default is disabled\[char46]
.ST "Other Features:"
.PP
.IP "\fBdatapath_type\fR: string"
Name of datapath provider\[char46] The kernel datapath has type \fBsystem\fR\[char46] The userspace datapath has type \fBnetdev\fR\[char46] A manager may refer to the \fBdatapath_types\fR column of the \fBOpen_vSwitch\fR table for a list of the types accepted by this Open vSwitch instance\[char46]
.IP "\fBexternal_ids : bridge-id\fR: optional string"
A unique identifier of the bridge\[char46]
.IP "\fBother_config : hwaddr\fR: optional string"
An Ethernet address in the form \fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR to set the hardware address of the local port and influence the datapath ID\[char46]
.IP "\fBother_config : forward-bpdu\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Controls forwarding of BPDUs and other network control frames when NORMAL action is invoked\[char46] When this option is \fBfalse\fR or unset, frames with reserved Ethernet addresses (see table below) will not be forwarded\[char46] When this option is \fBtrue\fR, such frames will not be treated specially\[char46]
.IP
The above general rule has the following exceptions:
.RS
.IP \(bu
If STP is enabled on the bridge (see the \fBstp_enable\fR column in the \fBBridge\fR table), the bridge processes all received STP packets and never passes them to OpenFlow or forwards them\[char46] This is true even if STP is disabled on an individual port\[char46]
.IP \(bu
If LLDP is enabled on an interface (see the \fBlldp\fR column in the \fBInterface\fR table), the interface processes received LLDP packets and never passes them to OpenFlow or forwards them\[char46]
.RE
.IP
Set this option to \fBtrue\fR if the Open vSwitch bridge connects different Ethernet networks and is not configured to participate in STP\[char46]
.IP
This option affects packets with the following destination MAC addresses:
.RS
.TP
\fB01:80:c2:00:00:00\fR
IEEE 802\[char46]1D Spanning Tree Protocol (STP)\[char46]
.TP
\fB01:80:c2:00:00:01\fR
IEEE Pause frame\[char46]
.TP
\fB01:80:c2:00:00:0\fIx\fB\fR
Other reserved protocols\[char46]
.TP
\fB00:e0:2b:00:00:00\fR
Extreme Discovery Protocol (EDP)\[char46]
.TP
\fB00:e0:2b:00:00:04\fR and \fB00:e0:2b:00:00:06\fR
Ethernet Automatic Protection Switching (EAPS)\[char46]
.TP
\fB01:00:0c:cc:cc:cc\fR
Cisco Discovery Protocol (CDP), VLAN Trunking Protocol (VTP), Dynamic Trunking Protocol (DTP), Port Aggregation Protocol (PAgP), and others\[char46]
.TP
\fB01:00:0c:cc:cc:cd\fR
Cisco Shared Spanning Tree Protocol PVSTP+\[char46]
.TP
\fB01:00:0c:cd:cd:cd\fR
Cisco STP Uplink Fast\[char46]
.TP
\fB01:00:0c:00:00:00\fR
Cisco Inter Switch Link\[char46]
.TP
\fB01:00:0c:cc:cc:c\fIx\fB\fR
Cisco CFM\[char46]
.RE
.IP "\fBother_config : mac-aging-time\fR: optional string, containing an integer, at least 1"
The maximum number of seconds to retain a MAC learning entry for which no packets have been seen\[char46] The default is currently 300 seconds (5 minutes)\[char46] The value, if specified, is forced into a reasonable range, currently 15 to 3600 seconds\[char46]
.IP
A short MAC aging time allows a network to more quickly detect that a host is no longer connected to a switch port\[char46] However, it also makes it more likely that packets will be flooded unnecessarily, when they are addressed to a connected host that rarely transmits packets\[char46] To reduce the incidence of unnecessary flooding, use a MAC aging time longer than the maximum interval at which a host will ordinarily transmit packets\[char46]
.IP "\fBother_config : mac-table-size\fR: optional string, containing an integer, at least 1"
The maximum number of MAC addresses to learn\[char46] The default is currently 8192\[char46] The value, if specified, is forced into a reasonable range, currently 10 to 1,000,000\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBother_config\fR: map of string-string pairs"
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Port TABLE"
.PP
.PP
.PP
A port within a \fBBridge\fR\[char46]
.PP
.PP
Most commonly, a port has exactly one ``interface,\(cq\(cq pointed to by its \fBinterfaces\fR column\[char46] Such a port logically corresponds to a port on a physical Ethernet switch\[char46] A port with more than one interface is a ``bonded port\(cq\(cq (see \fBBonding Configuration\fR)\[char46]
.PP
.PP
Some properties that one might think as belonging to a port are actually part of the port\(cqs \fBInterface\fR members\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
immutable string (must be unique within table)
.TQ 3.00in
\fBinterfaces\fR
set of 1 or more \fBInterface\fRs
.TQ .25in
\fIVLAN Configuration:\fR
.RS .25in
.TQ 2.75in
\fBvlan_mode\fR
optional string, one of \fBaccess\fR, \fBdot1q\-tunnel\fR, \fBnative\-tagged\fR, \fBnative\-untagged\fR, or \fBtrunk\fR
.TQ 2.75in
\fBtag\fR
optional integer, in range 0 to 4,095
.TQ 2.75in
\fBtrunks\fR
set of up to 4,096 integers, in range 0 to 4,095
.TQ 2.75in
\fBcvlans\fR
set of up to 4,096 integers, in range 0 to 4,095
.TQ 2.75in
\fBother_config : qinq-ethtype\fR
optional string, either \fB802\[char46]1ad\fR or \fB802\[char46]1q\fR
.TQ 2.75in
\fBother_config : priority-tags\fR
optional string, one of \fBalways\fR, \fBif\-nonzero\fR, or \fBnever\fR
.RE
.TQ .25in
\fIBonding Configuration:\fR
.RS .25in
.TQ 2.75in
\fBbond_mode\fR
optional string, one of \fBactive\-backup\fR, \fBbalance\-slb\fR, or \fBbalance\-tcp\fR
.TQ 2.75in
\fBother_config : bond-hash-basis\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : lb-output-action\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : bond-primary\fR
optional string
.TQ 2.75in
\fBother_config : all-members-active\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ .25in
\fILink Failure Detection:\fR
.RS .25in
.TQ 2.50in
\fBother_config : bond-detect-mode\fR
optional string, either \fBcarrier\fR or \fBmiimon\fR
.TQ 2.50in
\fBother_config : bond-miimon-interval\fR
optional string, containing an integer
.TQ 2.50in
\fBbond_updelay\fR
integer
.TQ 2.50in
\fBbond_downdelay\fR
integer
.RE
.TQ .25in
\fILACP Configuration:\fR
.RS .25in
.TQ 2.50in
\fBlacp\fR
optional string, one of \fBactive\fR, \fBoff\fR, or \fBpassive\fR
.TQ 2.50in
\fBother_config : lacp-system-id\fR
optional string
.TQ 2.50in
\fBother_config : lacp-system-priority\fR
optional string, containing an integer, in range 1 to 65,535
.TQ 2.50in
\fBother_config : lacp-time\fR
optional string, either \fBfast\fR or \fBslow\fR
.TQ 2.50in
\fBother_config : lacp-fallback-ab\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fIRebalancing Configuration:\fR
.RS .25in
.TQ 2.50in
\fBother_config : bond-rebalance-interval\fR
optional string, containing an integer, in range 0 to 2,147,483,647
.RE
.TQ 2.75in
\fBbond_fake_iface\fR
boolean
.RE
.TQ .25in
\fISpanning Tree Protocol:\fR
.RS .25in
.TQ .25in
\fISTP Configuration:\fR
.RS .25in
.TQ 2.50in
\fBother_config : stp-enable\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBother_config : stp-port-num\fR
optional string, containing an integer, in range 1 to 255
.TQ 2.50in
\fBother_config : stp-port-priority\fR
optional string, containing an integer, in range 0 to 255
.TQ 2.50in
\fBother_config : stp-path-cost\fR
optional string, containing an integer, in range 0 to 65,535
.RE
.TQ .25in
\fISTP Status:\fR
.RS .25in
.TQ 2.50in
\fBstatus : stp_port_id\fR
optional string
.TQ 2.50in
\fBstatus : stp_state\fR
optional string, one of \fBblocking\fR, \fBdisabled\fR, \fBforwarding\fR, \fBlearning\fR, or \fBlistening\fR
.TQ 2.50in
\fBstatus : stp_sec_in_state\fR
optional string, containing an integer, at least 0
.TQ 2.50in
\fBstatus : stp_role\fR
optional string, one of \fBalternate\fR, \fBdesignated\fR, or \fBroot\fR
.RE
.RE
.TQ .25in
\fIRapid Spanning Tree Protocol:\fR
.RS .25in
.TQ .25in
\fIRSTP Configuration:\fR
.RS .25in
.TQ 2.50in
\fBother_config : rstp-enable\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBother_config : rstp-port-priority\fR
optional string, containing an integer, in range 0 to 240
.TQ 2.50in
\fBother_config : rstp-port-num\fR
optional string, containing an integer, in range 1 to 4,095
.TQ 2.50in
\fBother_config : rstp-path-cost\fR
optional string, containing an integer
.TQ 2.50in
\fBother_config : rstp-port-admin-edge\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBother_config : rstp-port-auto-edge\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBother_config : rstp-port-mcheck\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fIRSTP Status:\fR
.RS .25in
.TQ 2.50in
\fBrstp_status : rstp_port_id\fR
optional string
.TQ 2.50in
\fBrstp_status : rstp_port_role\fR
optional string, one of \fBAlternate\fR, \fBBackup\fR, \fBDesignated\fR, \fBDisabled\fR, or \fBRoot\fR
.TQ 2.50in
\fBrstp_status : rstp_port_state\fR
optional string, one of \fBDisabled\fR, \fBDiscarding\fR, \fBForwarding\fR, or \fBLearning\fR
.TQ 2.50in
\fBrstp_status : rstp_designated_bridge_id\fR
optional string
.TQ 2.50in
\fBrstp_status : rstp_designated_port_id\fR
optional string
.TQ 2.50in
\fBrstp_status : rstp_designated_path_cost\fR
optional string, containing an integer
.RE
.TQ .25in
\fIRSTP Statistics:\fR
.RS .25in
.TQ 2.50in
\fBrstp_statistics : rstp_tx_count\fR
optional integer
.TQ 2.50in
\fBrstp_statistics : rstp_rx_count\fR
optional integer
.TQ 2.50in
\fBrstp_statistics : rstp_error_count\fR
optional integer
.TQ 2.50in
\fBrstp_statistics : rstp_uptime\fR
optional integer
.RE
.RE
.TQ .25in
\fIMulticast Snooping:\fR
.RS .25in
.TQ 2.75in
\fBother_config : mcast-snooping-flood\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : mcast-snooping-flood-reports\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fIOther Features:\fR
.RS .25in
.TQ 2.75in
\fBqos\fR
optional \fBQoS\fR
.TQ 2.75in
\fBmac\fR
optional string
.TQ 2.75in
\fBfake_bridge\fR
boolean
.TQ 2.75in
\fBprotected\fR
boolean
.TQ 2.75in
\fBexternal_ids : fake-bridge-*\fR
optional string
.TQ 2.75in
\fBother_config : transient\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ 3.00in
\fBbond_active_slave\fR
optional string
.TQ .25in
\fIPort Statistics:\fR
.RS .25in
.TQ .25in
\fIStatistics: STP transmit and receive counters:\fR
.RS .25in
.TQ 2.50in
\fBstatistics : stp_tx_count\fR
optional integer
.TQ 2.50in
\fBstatistics : stp_rx_count\fR
optional integer
.TQ 2.50in
\fBstatistics : stp_error_count\fR
optional integer
.RE
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: immutable string (must be unique within table)"
Port name\[char46] For a non-bonded port, this should be the same as its interface\(cqs name\[char46] Port names must otherwise be unique among the names of ports, interfaces, and bridges on a host\[char46] Because port and interfaces names are usually the same, the restrictions on the \fBname\fR column in the \fBInterface\fR table, particularly on length, also apply to port names\[char46] Refer to the documentation for \fBInterface\fR names for details\[char46]
.IP "\fBinterfaces\fR: set of 1 or more \fBInterface\fRs"
The port\(cqs interfaces\[char46] If there is more than one, this is a bonded Port\[char46]
.ST "VLAN Configuration:"
.PP
.PP
.PP
In short, a VLAN (short for ``virtual LAN\(cq\(cq) is a way to partition a single switch into multiple switches\[char46] VLANs can be confusing, so for an introduction, please refer to the question ``What\(cqs a VLAN?\(cq\(cq in the Open vSwitch FAQ\[char46]
.PP
.PP
A VLAN is sometimes encoded into a packet using a 802\[char46]1Q or 802\[char46]1ad VLAN header, but every packet is part of some VLAN whether or not it is encoded in the packet\[char46] (A packet that appears to have no VLAN is part of VLAN 0, by default\[char46]) As a result, it\(cqs useful to think of a VLAN as a metadata property of a packet, separate from how the VLAN is encoded\[char46] For a given port, this column determines how the encoding of a packet that ingresses or egresses the port maps to the packet\(cqs VLAN\[char46] When a packet enters the switch, its VLAN is determined based on its setting in this column and its VLAN headers, if any, and then, conceptually, the VLAN headers are then stripped off\[char46] Conversely, when a packet exits the switch, its VLAN and the settings in this column determine what VLAN headers, if any, are pushed onto the packet before it egresses the port\[char46]
.PP
.PP
The VLAN configuration in this column affects Open vSwitch only when it is doing ``normal switching\[char46]\(cq\(cq It does not affect flows set up by an OpenFlow controller, outside of the OpenFlow ``normal action\[char46]\(cq\(cq
.PP
.PP
Bridge ports support the following types of VLAN configuration:
.RS
.TP
trunk
A trunk port carries packets on one or more specified VLANs specified in the \fBtrunks\fR column (often, on every VLAN)\[char46] A packet that ingresses on a trunk port is in the VLAN specified in its 802\[char46]1Q header, or VLAN 0 if the packet has no 802\[char46]1Q header\[char46] A packet that egresses through a trunk port will have an 802\[char46]1Q header if it has a nonzero VLAN ID\[char46]
.IP
Any packet that ingresses on a trunk port tagged with a VLAN that the port does not trunk is dropped\[char46]
.TP
access
An access port carries packets on exactly one VLAN specified in the \fBtag\fR column\[char46] Packets egressing on an access port have no 802\[char46]1Q header\[char46]
.IP
Any packet with an 802\[char46]1Q header with a nonzero VLAN ID that ingresses on an access port is dropped, regardless of whether the VLAN ID in the header is the access port\(cqs VLAN ID\[char46]
.TP
native-tagged
A native-tagged port resembles a trunk port, with the exception that a packet without an 802\[char46]1Q header that ingresses on a native-tagged port is in the ``native VLAN\(cq\(cq (specified in the \fBtag\fR column)\[char46]
.TP
native-untagged
A native-untagged port resembles a native-tagged port, with the exception that a packet that egresses on a native-untagged port in the native VLAN will not have an 802\[char46]1Q header\[char46]
.TP
dot1q-tunnel
A dot1q-tunnel port is somewhat like an access port\[char46] Like an access port, it carries packets on the single VLAN specified in the \fBtag\fR column and this VLAN, called the service VLAN, does not appear in an 802\[char46]1Q header for packets that ingress or egress on the port\[char46] The main difference lies in the behavior when packets that include a 802\[char46]1Q header ingress on the port\[char46] Whereas an access port drops such packets, a dot1q-tunnel port treats these as double-tagged with the outer service VLAN \fBtag\fR and the inner customer VLAN taken from the 802\[char46]1Q header\[char46] Correspondingly, to egress on the port, a packet outer VLAN (or only VLAN) must be \fBtag\fR, which is removed before egress, which exposes the inner (customer) VLAN if one is present\[char46]
.IP
If \fBcvlans\fR is set, only allows packets in the specified customer VLANs\[char46]
.RE
.PP
.PP
A packet will only egress through bridge ports that carry the VLAN of the packet, as described by the rules above\[char46]
.IP "\fBvlan_mode\fR: optional string, one of \fBaccess\fR, \fBdot1q\-tunnel\fR, \fBnative\-tagged\fR, \fBnative\-untagged\fR, or \fBtrunk\fR"
The VLAN mode of the port, as described above\[char46] When this column is empty, a default mode is selected as follows:
.RS
.IP \(bu
If \fBtag\fR contains a value, the port is an access port\[char46] The \fBtrunks\fR column should be empty\[char46]
.IP \(bu
Otherwise, the port is a trunk port\[char46] The \fBtrunks\fR column value is honored if it is present\[char46]
.RE
.IP "\fBtag\fR: optional integer, in range 0 to 4,095"
For an access port, the port\(cqs implicitly tagged VLAN\[char46] For a native-tagged or native-untagged port, the port\(cqs native VLAN\[char46] Must be empty if this is a trunk port\[char46]
.IP "\fBtrunks\fR: set of up to 4,096 integers, in range 0 to 4,095"
For a trunk, native-tagged, or native-untagged port, the 802\[char46]1Q VLAN or VLANs that this port trunks; if it is empty, then the port trunks all VLANs\[char46] Must be empty if this is an access port\[char46]
.IP
A native-tagged or native-untagged port always trunks its native VLAN, regardless of whether \fBtrunks\fR includes that VLAN\[char46]
.IP "\fBcvlans\fR: set of up to 4,096 integers, in range 0 to 4,095"
For a dot1q-tunnel port, the customer VLANs that this port includes\[char46] If this is empty, the port includes all customer VLANs\[char46]
.IP
For other kinds of ports, this setting is ignored\[char46]
.IP "\fBother_config : qinq-ethtype\fR: optional string, either \fB802\[char46]1ad\fR or \fB802\[char46]1q\fR"
For a dot1q-tunnel port, this is the TPID for the service tag, that is, for the 802\[char46]1Q header that contains the service VLAN ID\[char46] Because packets that actually ingress and egress a dot1q-tunnel port do not include an 802\[char46]1Q header for the service VLAN, this does not affect packets on the dot1q-tunnel port itself\[char46] Rather, it determines the service VLAN for a packet that ingresses on a dot1q-tunnel port and egresses on a trunk port\[char46]
.IP
The value \fB802\[char46]1ad\fR specifies TPID 0x88a8, which is also the default if the setting is omitted\[char46] The value \fB802\[char46]1q\fR specifies TPID 0x8100\[char46]
.IP
For other kinds of ports, this setting is ignored\[char46]
.IP "\fBother_config : priority-tags\fR: optional string, one of \fBalways\fR, \fBif\-nonzero\fR, or \fBnever\fR"
An 802\[char46]1Q header contains two important pieces of information: a VLAN ID and a priority\[char46] A frame with a zero VLAN ID, called a ``priority-tagged\(cq\(cq frame, is supposed to be treated the same way as a frame without an 802\[char46]1Q header at all (except for the priority)\[char46]
.IP
However, some network elements ignore any frame that has 802\[char46]1Q header at all, even when the VLAN ID is zero\[char46] Therefore, by default Open vSwitch does not output priority-tagged frames, instead omitting the 802\[char46]1Q header entirely if the VLAN ID is zero\[char46] Set this key to \fBif\-nonzero\fR to enable priority-tagged frames on a port\[char46]
.IP
For \fBif\-nonzero\fR Open vSwitch omits the 802\[char46]1Q header on output if both the VLAN ID and priority would be zero\[char46] Set to \fBalways\fR to retain the 802\[char46]1Q header in such frames as well\[char46]
.IP
All frames output to native-tagged ports have a nonzero VLAN ID, so this setting is not meaningful on native-tagged ports\[char46]
.ST "Bonding Configuration:"
.PP
.PP
.PP
A port that has more than one interface is a ``bonded port\[char46]\(cq\(cq Bonding allows for load balancing and fail-over\[char46]
.PP
.PP
The following types of bonding will work with any kind of upstream switch\[char46] On the upstream switch, do not configure the interfaces as a bond:
.RS
.TP
\fBbalance\-slb\fR
Balances flows among members based on source MAC address and output VLAN, with periodic rebalancing as traffic patterns change\[char46]
.TP
\fBactive\-backup\fR
Assigns all flows to one member, failing over to a backup member when the active member is disabled\[char46] This is the only bonding mode in which interfaces may be plugged into different upstream switches\[char46]
.RE
.PP
.PP
The following modes require the upstream switch to support 802\[char46]3ad with successful LACP negotiation\[char46] If LACP negotiation fails and other-config:lacp-fallback-ab is true, then \fBactive\-backup\fR mode is used:
.RS
.TP
\fBbalance\-tcp\fR
Balances flows among members based on L3 and L4 protocol information such as IP addresses and TCP/UDP ports\[char46]
.RE
.PP
.PP
These columns apply only to bonded ports\[char46] Their values are otherwise ignored\[char46]
.IP "\fBbond_mode\fR: optional string, one of \fBactive\-backup\fR, \fBbalance\-slb\fR, or \fBbalance\-tcp\fR"
The type of bonding used for a bonded port\[char46] Defaults to \fBactive\-backup\fR if unset\[char46]
.IP "\fBother_config : bond-hash-basis\fR: optional string, containing an integer"
An integer hashed along with flows when choosing output members in load balanced bonds\[char46] When changed, all flows will be assigned different hash values possibly causing member selection decisions to change\[char46] Does not affect bonding modes which do not employ load balancing such as \fBactive\-backup\fR\[char46]
.IP "\fBother_config : lb-output-action\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Enable/disable usage of optimized \fBlb_output\fR action for balancing flows among output members in load balanced bonds in \fBbalance\-tcp\fR\[char46] When enabled, it uses optimized path for balance-tcp mode by using rss hash and avoids recirculation\[char46] This knob does not affect other balancing modes\[char46]
.IP "\fBother_config : bond-primary\fR: optional string"
If a slave interface with this name exists in the bond and is up, it will be made active\[char46] Relevant only when \fBother_config:bond_mode\fR is \fBactive\-backup\fR or if \fBbalance\-tcp\fR falls back to \fBactive\-backup\fR (e\[char46]g\[char46], LACP negotiation fails and \fBother_config:lacp-fallback-ab\fR is \fBtrue\fR)\[char46]
.IP "\fBother_config : all-members-active\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Enable/Disable delivery of broadcast/multicast packets on secondary interface of a balance-slb bond\[char46] Relevant only when \fBlacp\fR is \fBoff\fR\[char46]
.IP
This parameter is identical to \fBall_slaves_active\fR for Linux kernel bonds\[char46] Disabled by default as it is not a desirable configuration for most users\[char46]
.ST "Link Failure Detection:"
.PP
.PP
.PP
An important part of link bonding is detecting that links are down so that they may be disabled\[char46] These settings determine how Open vSwitch detects link failure\[char46]
.IP "\fBother_config : bond-detect-mode\fR: optional string, either \fBcarrier\fR or \fBmiimon\fR"
The means used to detect link failures\[char46] Defaults to \fBcarrier\fR which uses each interface\(cqs carrier to detect failures\[char46] When set to \fBmiimon\fR, will check for failures by polling each interface\(cqs MII\[char46]
.IP "\fBother_config : bond-miimon-interval\fR: optional string, containing an integer"
The interval, in milliseconds, between successive attempts to poll each interface\(cqs MII\[char46] Relevant only when \fBother_config:bond-detect-mode\fR is \fBmiimon\fR\[char46]
.IP "\fBbond_updelay\fR: integer"
The number of milliseconds for which the link must stay up on an interface before the interface is considered to be up\[char46] Specify \fB0\fR to enable the interface immediately\[char46]
.IP
This setting is honored only when at least one bonded interface is already enabled\[char46] When no interfaces are enabled, then the first bond interface to come up is enabled immediately\[char46]
.IP "\fBbond_downdelay\fR: integer"
The number of milliseconds for which the link must stay down on an interface before the interface is considered to be down\[char46] Specify \fB0\fR to disable the interface immediately\[char46]
.ST "LACP Configuration:"
.PP
.PP
.PP
LACP, the Link Aggregation Control Protocol, is an IEEE standard that allows switches to automatically detect that they are connected by multiple links and aggregate across those links\[char46] These settings control LACP behavior\[char46]
.IP "\fBlacp\fR: optional string, one of \fBactive\fR, \fBoff\fR, or \fBpassive\fR"
Configures LACP on this port\[char46] LACP allows directly connected switches to negotiate which links may be bonded\[char46] LACP may be enabled on non-bonded ports for the benefit of any switches they may be connected to\[char46] \fBactive\fR ports are allowed to initiate LACP negotiations\[char46] \fBpassive\fR ports are allowed to participate in LACP negotiations initiated by a remote switch, but not allowed to initiate such negotiations themselves\[char46] If LACP is enabled on a port whose partner switch does not support LACP, the bond will be disabled, unless other-config:lacp-fallback-ab is set to true\[char46] Defaults to \fBoff\fR if unset\[char46]
.IP "\fBother_config : lacp-system-id\fR: optional string"
The LACP system ID of this \fBPort\fR\[char46] The system ID of a LACP bond is used to identify itself to its partners\[char46] Must be a nonzero MAC address\[char46] Defaults to the bridge Ethernet address if unset\[char46]
.IP "\fBother_config : lacp-system-priority\fR: optional string, containing an integer, in range 1 to 65,535"
The LACP system priority of this \fBPort\fR\[char46] In LACP negotiations, link status decisions are made by the system with the numerically lower priority\[char46]
.IP "\fBother_config : lacp-time\fR: optional string, either \fBfast\fR or \fBslow\fR"
The LACP timing which should be used on this \fBPort\fR\[char46] By default \fBslow\fR is used\[char46] When configured to be \fBfast\fR LACP heartbeats are requested at a rate of once per second causing connectivity problems to be detected more quickly\[char46] In \fBslow\fR mode, heartbeats are requested at a rate of once every 30 seconds\[char46]
.IP "\fBother_config : lacp-fallback-ab\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Determines the behavior of openvswitch bond in LACP mode\[char46] If the partner switch does not support LACP, setting this option to \fBtrue\fR allows openvswitch to fallback to active-backup\[char46] If the option is set to \fBfalse\fR, the bond will be disabled\[char46] In both the cases, once the partner switch is configured to LACP mode, the bond will use LACP\[char46]
.ST "Rebalancing Configuration:"
.PP
.PP
.PP
These settings control behavior when a bond is in \fBbalance\-slb\fR or \fBbalance\-tcp\fR mode\[char46]
.IP "\fBother_config : bond-rebalance-interval\fR: optional string, containing an integer, in range 0 to 2,147,483,647"
For a load balanced bonded port, the number of milliseconds between successive attempts to rebalance the bond, that is, to move flows from one interface on the bond to another in an attempt to keep usage of each interface roughly equal\[char46] If zero, load balancing is disabled on the bond (link failure still cause flows to move)\[char46] If less than 1000ms, the rebalance interval will be 1000ms\[char46]
.IP "\fBbond_fake_iface\fR: boolean"
For a bonded port, whether to create a fake internal interface with the name of the port\[char46] Use only for compatibility with legacy software that requires this\[char46]
.ST "Spanning Tree Protocol:"
.PP
.PP
.PP
The configuration here is only meaningful, and the status is only populated, when 802\[char46]1D\-1998 Spanning Tree Protocol is enabled on the port\(cqs \fBBridge\fR with its \fBstp_enable\fR column\[char46]
.ST "STP Configuration:"
.PP
.IP "\fBother_config : stp-enable\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
When STP is enabled on a bridge, it is enabled by default on all of the bridge\(cqs ports except bond, internal, and mirror ports (which do not work with STP)\[char46] If this column\(cqs value is \fBfalse\fR, STP is disabled on the port\[char46]
.IP "\fBother_config : stp-port-num\fR: optional string, containing an integer, in range 1 to 255"
The port number used for the lower 8 bits of the port-id\[char46] By default, the numbers will be assigned automatically\[char46] If any port\(cqs number is manually configured on a bridge, then they must all be\[char46]
.IP "\fBother_config : stp-port-priority\fR: optional string, containing an integer, in range 0 to 255"
The port\(cqs relative priority value for determining the root port (the upper 8 bits of the port-id)\[char46] A port with a lower port-id will be chosen as the root port\[char46] By default, the priority is 0x80\[char46]
.IP "\fBother_config : stp-path-cost\fR: optional string, containing an integer, in range 0 to 65,535"
Spanning tree path cost for the port\[char46] A lower number indicates a faster link\[char46] By default, the cost is based on the maximum speed of the link\[char46]
.ST "STP Status:"
.PP
.IP "\fBstatus : stp_port_id\fR: optional string"
The port ID used in spanning tree advertisements for this port, as 4 hex digits\[char46] Configuring the port ID is described in the \fBstp\-port\-num\fR and \fBstp\-port\-priority\fR keys of the \fBother_config\fR section earlier\[char46]
.IP "\fBstatus : stp_state\fR: optional string, one of \fBblocking\fR, \fBdisabled\fR, \fBforwarding\fR, \fBlearning\fR, or \fBlistening\fR"
STP state of the port\[char46]
.IP "\fBstatus : stp_sec_in_state\fR: optional string, containing an integer, at least 0"
The amount of time this port has been in the current STP state, in seconds\[char46]
.IP "\fBstatus : stp_role\fR: optional string, one of \fBalternate\fR, \fBdesignated\fR, or \fBroot\fR"
STP role of the port\[char46]
.ST "Rapid Spanning Tree Protocol:"
.PP
.PP
.PP
The configuration here is only meaningful, and the status and statistics are only populated, when 802\[char46]1D\-1998 Spanning Tree Protocol is enabled on the port\(cqs \fBBridge\fR with its \fBstp_enable\fR column\[char46]
.ST "RSTP Configuration:"
.PP
.IP "\fBother_config : rstp-enable\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
When RSTP is enabled on a bridge, it is enabled by default on all of the bridge\(cqs ports except bond, internal, and mirror ports (which do not work with RSTP)\[char46] If this column\(cqs value is \fBfalse\fR, RSTP is disabled on the port\[char46]
.IP "\fBother_config : rstp-port-priority\fR: optional string, containing an integer, in range 0 to 240"
The port\(cqs relative priority value for determining the root port, in multiples of 16\[char46] By default, the port priority is 0x80 (128)\[char46] Any value in the lower 4 bits is rounded off\[char46] The significant upper 4 bits become the upper 4 bits of the port-id\[char46] A port with the lowest port-id is elected as the root\[char46]
.IP "\fBother_config : rstp-port-num\fR: optional string, containing an integer, in range 1 to 4,095"
The local RSTP port number, used as the lower 12 bits of the port-id\[char46] By default the port numbers are assigned automatically, and typically may not correspond to the OpenFlow port numbers\[char46] A port with the lowest port-id is elected as the root\[char46]
.IP "\fBother_config : rstp-path-cost\fR: optional string, containing an integer"
The port path cost\[char46] The Port\(cqs contribution, when it is the Root Port, to the Root Path Cost for the Bridge\[char46] By default the cost is automatically calculated from the port\(cqs speed\[char46]
.IP "\fBother_config : rstp-port-admin-edge\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
The admin edge port parameter for the Port\[char46] Default is \fBfalse\fR\[char46]
.IP "\fBother_config : rstp-port-auto-edge\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
The auto edge port parameter for the Port\[char46] Default is \fBtrue\fR\[char46]
.IP "\fBother_config : rstp-port-mcheck\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
The mcheck port parameter for the Port\[char46] Default is \fBfalse\fR\[char46] May be set to force the Port Protocol Migration state machine to transmit RST BPDUs for a MigrateTime period, to test whether all STP Bridges on the attached LAN have been removed and the Port can continue to transmit RSTP BPDUs\[char46] Setting mcheck has no effect if the Bridge is operating in STP Compatibility mode\[char46]
.IP
Changing the value from \fBtrue\fR to \fBfalse\fR has no effect, but needs to be done if this behavior is to be triggered again by subsequently changing the value from \fBfalse\fR to \fBtrue\fR\[char46]
.ST "RSTP Status:"
.PP
.IP "\fBrstp_status : rstp_port_id\fR: optional string"
The port ID used in spanning tree advertisements for this port, as 4 hex digits\[char46] Configuring the port ID is described in the \fBrstp\-port\-num\fR and \fBrstp\-port\-priority\fR keys of the \fBother_config\fR section earlier\[char46]
.IP "\fBrstp_status : rstp_port_role\fR: optional string, one of \fBAlternate\fR, \fBBackup\fR, \fBDesignated\fR, \fBDisabled\fR, or \fBRoot\fR"
RSTP role of the port\[char46]
.IP "\fBrstp_status : rstp_port_state\fR: optional string, one of \fBDisabled\fR, \fBDiscarding\fR, \fBForwarding\fR, or \fBLearning\fR"
RSTP state of the port\[char46]
.IP "\fBrstp_status : rstp_designated_bridge_id\fR: optional string"
The port\(cqs RSTP designated bridge ID, in the same form as \fBrstp_status:rstp_bridge_id\fR in the \fBBridge\fR table\[char46]
.IP "\fBrstp_status : rstp_designated_port_id\fR: optional string"
The port\(cqs RSTP designated port ID, as 4 hex digits\[char46]
.IP "\fBrstp_status : rstp_designated_path_cost\fR: optional string, containing an integer"
The port\(cqs RSTP designated path cost\[char46] Lower is better\[char46]
.ST "RSTP Statistics:"
.PP
.IP "\fBrstp_statistics : rstp_tx_count\fR: optional integer"
Number of RSTP BPDUs transmitted through this port\[char46]
.IP "\fBrstp_statistics : rstp_rx_count\fR: optional integer"
Number of valid RSTP BPDUs received by this port\[char46]
.IP "\fBrstp_statistics : rstp_error_count\fR: optional integer"
Number of invalid RSTP BPDUs received by this port\[char46]
.IP "\fBrstp_statistics : rstp_uptime\fR: optional integer"
The duration covered by the other RSTP statistics, in seconds\[char46]
.ST "Multicast Snooping:"
.PP
.IP "\fBother_config : mcast-snooping-flood\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, multicast packets (except Reports) are unconditionally forwarded to the specific port\[char46]
.IP "\fBother_config : mcast-snooping-flood-reports\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, multicast Reports are unconditionally forwarded to the specific port\[char46]
.ST "Other Features:"
.PP
.IP "\fBqos\fR: optional \fBQoS\fR"
Quality of Service configuration for this port\[char46]
.IP "\fBmac\fR: optional string"
The MAC address to use for this port for the purpose of choosing the bridge\(cqs MAC address\[char46] This column does not necessarily reflect the port\(cqs actual MAC address, nor will setting it change the port\(cqs actual MAC address\[char46]
.IP "\fBfake_bridge\fR: boolean"
Does this port represent a sub-bridge for its tagged VLAN within the Bridge? See ovs-vsctl(8) for more information\[char46]
.IP "\fBprotected\fR: boolean"
The protected ports feature allows certain ports to be designated as protected\[char46] Traffic between protected ports is blocked\[char46] Protected ports can send traffic to unprotected ports\[char46] Unprotected ports can send traffic to any port\[char46] Default is false\[char46]
.IP "\fBexternal_ids : fake-bridge-*\fR: optional string"
External IDs for a fake bridge (see the \fBfake_bridge\fR column) are defined by prefixing a \fBBridge\fR \fBexternal_ids\fR key with \fBfake\-bridge\-\fR, e\[char46]g\[char46] \fBfake\-bridge\-bridge\-id\fR\[char46]
.IP "\fBother_config : transient\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, the port will be removed when \fBovs\-ctl start \-\-delete\-transient\-ports\fR is used\[char46]
.IP "\fBbond_active_slave\fR: optional string"
For a bonded port, record the MAC address of the current active member\[char46]
.ST "Port Statistics:"
.PP
.PP
.PP
Key-value pairs that report port statistics\[char46] The update period is controlled by \fBother_config:stats-update-interval\fR in the \fBOpen_vSwitch\fR table\[char46]
.ST "Statistics: STP transmit and receive counters:"
.PP
.IP "\fBstatistics : stp_tx_count\fR: optional integer"
Number of STP BPDUs sent on this port by the spanning tree library\[char46]
.IP "\fBstatistics : stp_rx_count\fR: optional integer"
Number of STP BPDUs received on this port and accepted by the spanning tree library\[char46]
.IP "\fBstatistics : stp_error_count\fR: optional integer"
Number of bad STP BPDUs received on this port\[char46] Bad BPDUs include runt packets and those with an unexpected protocol ID\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBother_config\fR: map of string-string pairs"
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Interface TABLE"
.PP
An interface within a \fBPort\fR\[char46]
.SS "Summary:
.TQ .25in
\fICore Features:\fR
.RS .25in
.TQ 2.75in
\fBname\fR
immutable string (must be unique within table)
.TQ 2.75in
\fBifindex\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.75in
\fBmac_in_use\fR
optional string
.TQ 2.75in
\fBmac\fR
optional string
.TQ 2.75in
\fBerror\fR
optional string
.TQ .25in
\fIOpenFlow Port Number:\fR
.RS .25in
.TQ 2.50in
\fBofport\fR
optional integer
.TQ 2.50in
\fBofport_request\fR
optional integer, in range 1 to 65,279
.RE
.RE
.TQ .25in
\fISystem-Specific Details:\fR
.RS .25in
.TQ 2.75in
\fBtype\fR
string
.RE
.TQ .25in
\fITunnel Options:\fR
.RS .25in
.TQ 2.75in
\fBoptions : remote_ip\fR
optional string
.TQ 2.75in
\fBoptions : local_ip\fR
optional string
.TQ 2.75in
\fBoptions : in_key\fR
optional string
.TQ 2.75in
\fBoptions : out_key\fR
optional string
.TQ 2.75in
\fBoptions : dst_port\fR
optional string
.TQ 2.75in
\fBoptions : key\fR
optional string
.TQ 2.75in
\fBoptions : tos\fR
optional string
.TQ 2.75in
\fBoptions : ttl\fR
optional string
.TQ 2.75in
\fBoptions : df_default\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : egress_pkt_mark\fR
optional string
.TQ .25in
\fITunnel Options: lisp only:\fR
.RS .25in
.TQ 2.50in
\fBoptions : packet_type\fR
optional string, either \fBlegacy_l3\fR or \fBptap\fR
.RE
.TQ .25in
\fITunnel Options: vxlan only:\fR
.RS .25in
.TQ 2.50in
\fBoptions : exts\fR
optional string
.TQ 2.50in
\fBoptions : packet_type\fR
optional string, one of \fBlegacy_l2\fR, \fBlegacy_l3\fR, or \fBptap\fR
.RE
.TQ .25in
\fITunnel Options: gre only:\fR
.RS .25in
.TQ 2.50in
\fBoptions : packet_type\fR
optional string, one of \fBlegacy_l2\fR, \fBlegacy_l3\fR, or \fBptap\fR
.TQ 2.50in
\fBoptions : seq\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fITunnel Options: gre, ip6gre, geneve, bareudp and vxlan:\fR
.RS .25in
.TQ 2.50in
\fBoptions : csum\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fITunnel Options: IPsec:\fR
.RS .25in
.TQ 2.50in
\fBoptions : psk\fR
optional string
.TQ 2.50in
\fBoptions : remote_cert\fR
optional string
.TQ 2.50in
\fBoptions : remote_name\fR
optional string
.RE
.RE
.TQ .25in
\fITunnel Options: erspan only:\fR
.RS .25in
.TQ 2.75in
\fBoptions : erspan_idx\fR
optional string
.TQ 2.75in
\fBoptions : erspan_ver\fR
optional string
.TQ 2.75in
\fBoptions : erspan_dir\fR
optional string
.TQ 2.75in
\fBoptions : erspan_hwid\fR
optional string
.RE
.TQ .25in
\fITunnel Options: Bareudp only:\fR
.RS .25in
.TQ 2.75in
\fBoptions : payload_type\fR
optional string
.RE
.TQ .25in
\fITunnel Options: srv6 only:\fR
.RS .25in
.TQ 2.75in
\fBoptions : srv6_segs\fR
optional string
.TQ 2.75in
\fBoptions : srv6_flowlabel\fR
optional string, one of \fBcompute\fR, \fBcopy\fR, or \fBzero\fR
.RE
.TQ .25in
\fIPatch Options:\fR
.RS .25in
.TQ 2.75in
\fBoptions : peer\fR
optional string
.RE
.TQ .25in
\fIPMD (Poll Mode Driver) Options:\fR
.RS .25in
.TQ 2.75in
\fBoptions : n_rxq\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBoptions : dpdk-devargs\fR
optional string
.TQ 2.75in
\fBother_config : pmd-rxq-affinity\fR
optional string
.TQ 2.75in
\fBoptions : xdp-mode\fR
optional string, one of \fBbest\-effort\fR, \fBgeneric\fR, \fBnative\-with\-zerocopy\fR, or \fBnative\fR
.TQ 2.75in
\fBoptions : use-need-wakeup\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : vhost-server-path\fR
optional string
.TQ 2.75in
\fBoptions : tx-retries-max\fR
optional string, containing an integer, in range 0 to 32
.TQ 2.75in
\fBoptions : n_rxq_desc\fR
optional string, containing an integer, in range 1 to 4,096
.TQ 2.75in
\fBoptions : n_txq_desc\fR
optional string, containing an integer, in range 1 to 4,096
.TQ 2.75in
\fBoptions : dpdk-vf-mac\fR
optional string
.TQ 2.75in
\fBoptions : rx-steering\fR
optional string, either \fBrss+lacp\fR or \fBrss\fR
.TQ 2.75in
\fBother_config : tx-steering\fR
optional string, either \fBhash\fR or \fBthread\fR
.RE
.TQ .25in
\fIEMC (Exact Match Cache) Configuration:\fR
.RS .25in
.TQ 2.75in
\fBother_config : emc-enable\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fIMTU:\fR
.RS .25in
.TQ 2.75in
\fBmtu\fR
optional integer
.TQ 2.75in
\fBmtu_request\fR
optional integer, at least 1
.RE
.TQ .25in
\fIInterface Status:\fR
.RS .25in
.TQ 2.75in
\fBadmin_state\fR
optional string, either \fBdown\fR or \fBup\fR
.TQ 2.75in
\fBlink_state\fR
optional string, either \fBdown\fR or \fBup\fR
.TQ 2.75in
\fBlink_resets\fR
optional integer
.TQ 2.75in
\fBlink_speed\fR
optional integer
.TQ 2.75in
\fBduplex\fR
optional string, either \fBfull\fR or \fBhalf\fR
.TQ 2.75in
\fBlacp_current\fR
optional boolean
.TQ 2.75in
\fBstatus\fR
map of string-string pairs
.TQ 2.75in
\fBstatus : driver_name\fR
optional string
.TQ 2.75in
\fBstatus : driver_version\fR
optional string
.TQ 2.75in
\fBstatus : firmware_version\fR
optional string
.TQ 2.75in
\fBstatus : source_ip\fR
optional string
.TQ 2.75in
\fBstatus : tunnel_egress_iface\fR
optional string
.TQ 2.75in
\fBstatus : tunnel_egress_iface_carrier\fR
optional string, either \fBdown\fR or \fBup\fR
.TQ .25in
\fIdpdk:\fR
.RS .25in
.TQ 2.50in
\fBstatus : port_no\fR
optional string
.TQ 2.50in
\fBstatus : numa_id\fR
optional string
.TQ 2.50in
\fBstatus : min_rx_bufsize\fR
optional string
.TQ 2.50in
\fBstatus : max_rx_pktlen\fR
optional string
.TQ 2.50in
\fBstatus : max_rx_queues\fR
optional string
.TQ 2.50in
\fBstatus : max_tx_queues\fR
optional string
.TQ 2.50in
\fBstatus : max_mac_addrs\fR
optional string
.TQ 2.50in
\fBstatus : max_hash_mac_addrs\fR
optional string
.TQ 2.50in
\fBstatus : max_vfs\fR
optional string
.TQ 2.50in
\fBstatus : max_vmdq_pools\fR
optional string
.TQ 2.50in
\fBstatus : if_type\fR
optional string
.TQ 2.50in
\fBstatus : if_descr\fR
optional string
.TQ 2.50in
\fBstatus : pci-vendor_id\fR
optional string
.TQ 2.50in
\fBstatus : pci-device_id\fR
optional string
.RE
.RE
.TQ .25in
\fIStatistics:\fR
.RS .25in
.TQ .25in
\fIStatistics: Successful transmit and receive counters:\fR
.RS .25in
.TQ 2.50in
\fBstatistics : rx_packets\fR
optional integer
.TQ 2.50in
\fBstatistics : rx_bytes\fR
optional integer
.TQ 2.50in
\fBstatistics : tx_packets\fR
optional integer
.TQ 2.50in
\fBstatistics : tx_bytes\fR
optional integer
.RE
.TQ .25in
\fIStatistics: Receive errors:\fR
.RS .25in
.TQ 2.50in
\fBstatistics : rx_dropped\fR
optional integer
.TQ 2.50in
\fBstatistics : rx_frame_err\fR
optional integer
.TQ 2.50in
\fBstatistics : rx_over_err\fR
optional integer
.TQ 2.50in
\fBstatistics : rx_crc_err\fR
optional integer
.TQ 2.50in
\fBstatistics : rx_errors\fR
optional integer
.RE
.TQ .25in
\fIStatistics: Transmit errors:\fR
.RS .25in
.TQ 2.50in
\fBstatistics : tx_dropped\fR
optional integer
.TQ 2.50in
\fBstatistics : collisions\fR
optional integer
.TQ 2.50in
\fBstatistics : tx_errors\fR
optional integer
.RE
.RE
.TQ .25in
\fIIngress Policing:\fR
.RS .25in
.TQ 2.75in
\fBingress_policing_rate\fR
integer, at least 0
.TQ 2.75in
\fBingress_policing_kpkts_rate\fR
integer, at least 0
.TQ 2.75in
\fBingress_policing_burst\fR
integer, at least 0
.TQ 2.75in
\fBingress_policing_kpkts_burst\fR
integer, at least 0
.RE
.TQ .25in
\fIBidirectional Forwarding Detection (BFD):\fR
.RS .25in
.TQ .25in
\fIBFD Configuration:\fR
.RS .25in
.TQ 2.50in
\fBbfd : enable\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBbfd : min_rx\fR
optional string, containing an integer, at least 1
.TQ 2.50in
\fBbfd : min_tx\fR
optional string, containing an integer, at least 1
.TQ 2.50in
\fBbfd : decay_min_rx\fR
optional string, containing an integer
.TQ 2.50in
\fBbfd : forwarding_if_rx\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBbfd : cpath_down\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBbfd : check_tnl_key\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBbfd : bfd_local_src_mac\fR
optional string
.TQ 2.50in
\fBbfd : bfd_local_dst_mac\fR
optional string
.TQ 2.50in
\fBbfd : bfd_remote_dst_mac\fR
optional string
.TQ 2.50in
\fBbfd : bfd_src_ip\fR
optional string
.TQ 2.50in
\fBbfd : bfd_dst_ip\fR
optional string
.TQ 2.50in
\fBbfd : oam\fR
optional string
.TQ 2.50in
\fBbfd : mult\fR
optional string, containing an integer, in range 1 to 255
.RE
.TQ .25in
\fIBFD Status:\fR
.RS .25in
.TQ 2.50in
\fBbfd_status : state\fR
optional string, one of \fBadmin_down\fR, \fBdown\fR, \fBinit\fR, or \fBup\fR
.TQ 2.50in
\fBbfd_status : forwarding\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBbfd_status : diagnostic\fR
optional string
.TQ 2.50in
\fBbfd_status : remote_state\fR
optional string, one of \fBadmin_down\fR, \fBdown\fR, \fBinit\fR, or \fBup\fR
.TQ 2.50in
\fBbfd_status : remote_diagnostic\fR
optional string
.TQ 2.50in
\fBbfd_status : flap_count\fR
optional string, containing an integer, at least 0
.RE
.RE
.TQ .25in
\fIConnectivity Fault Management:\fR
.RS .25in
.TQ 2.75in
\fBcfm_mpid\fR
optional integer
.TQ 2.75in
\fBcfm_flap_count\fR
optional integer
.TQ 2.75in
\fBcfm_fault\fR
optional boolean
.TQ 2.75in
\fBcfm_fault_status : recv\fR
none
.TQ 2.75in
\fBcfm_fault_status : rdi\fR
none
.TQ 2.75in
\fBcfm_fault_status : maid\fR
none
.TQ 2.75in
\fBcfm_fault_status : loopback\fR
none
.TQ 2.75in
\fBcfm_fault_status : overflow\fR
none
.TQ 2.75in
\fBcfm_fault_status : override\fR
none
.TQ 2.75in
\fBcfm_fault_status : interval\fR
none
.TQ 2.75in
\fBcfm_remote_opstate\fR
optional string, either \fBdown\fR or \fBup\fR
.TQ 2.75in
\fBcfm_health\fR
optional integer, in range 0 to 100
.TQ 2.75in
\fBcfm_remote_mpids\fR
set of integers
.TQ 2.75in
\fBother_config : cfm_interval\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : cfm_extended\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : cfm_demand\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : cfm_opstate\fR
optional string, either \fBdown\fR or \fBup\fR
.TQ 2.75in
\fBother_config : cfm_ccm_vlan\fR
optional string, containing an integer, in range 1 to 4,095
.TQ 2.75in
\fBother_config : cfm_ccm_pcp\fR
optional string, containing an integer, in range 1 to 7
.RE
.TQ .25in
\fIBonding Configuration:\fR
.RS .25in
.TQ 2.75in
\fBother_config : lacp-port-id\fR
optional string, containing an integer, in range 1 to 65,535
.TQ 2.75in
\fBother_config : lacp-port-priority\fR
optional string, containing an integer, in range 1 to 65,535
.TQ 2.75in
\fBother_config : lacp-aggregation-key\fR
optional string, containing an integer, in range 1 to 65,535
.RE
.TQ .25in
\fIVirtual Machine Identifiers:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids : attached-mac\fR
optional string
.TQ 2.75in
\fBexternal_ids : iface-id\fR
optional string
.TQ 2.75in
\fBexternal_ids : iface-status\fR
optional string, either \fBactive\fR or \fBinactive\fR
.TQ 2.75in
\fBexternal_ids : vm-id\fR
optional string
.RE
.TQ .25in
\fIAuto Attach Configuration:\fR
.RS .25in
.TQ 2.75in
\fBlldp : enable\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fIFlow control Configuration:\fR
.RS .25in
.TQ 2.75in
\fBoptions : rx-flow-ctrl\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : tx-flow-ctrl\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : flow-ctrl-autoneg\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fILink State Change detection mode:\fR
.RS .25in
.TQ 2.75in
\fBoptions : dpdk-lsc-interrupt\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.ST "Core Features:"
.PP
.IP "\fBname\fR: immutable string (must be unique within table)"
Interface name\[char46] Should be alphanumeric\[char46] For non-bonded port, this should be the same as the port name\[char46] It must otherwise be unique among the names of ports, interfaces, and bridges on a host\[char46]
.IP
The maximum length of an interface name depends on the underlying datapath:
.RS
.IP \(bu
The names of interfaces implemented as Linux and BSD network devices, including interfaces with type \fBinternal\fR, \fBtap\fR, or \fBsystem\fR plus the different types of tunnel ports, are limited to 15 bytes\[char46] Windows limits these names to 255 bytes\[char46]
.IP \(bu
The names of patch ports are not used in the underlying datapath, so operating system restrictions do not apply\[char46] Thus, they may have arbitrary length\[char46]
.RE
.IP
Regardless of other restrictions, OpenFlow only supports 15-byte names, which means that \fBovs\-ofctl\fR and OpenFlow controllers will show names truncated to 15 bytes\[char46]
.IP "\fBifindex\fR: optional integer, in range 0 to 4,294,967,295"
A positive interface index as defined for SNMP MIB-II in RFCs 1213 and 2863, if the interface has one, otherwise 0\[char46] The ifindex is useful for seamless integration with protocols such as SNMP and sFlow\[char46]
.IP "\fBmac_in_use\fR: optional string"
The MAC address in use by this interface\[char46]
.IP "\fBmac\fR: optional string"
Ethernet address to set for this interface\[char46] If unset then the default MAC address is used:
.RS
.IP \(bu
For the local interface, the default is the lowest-numbered MAC address among the other bridge ports, either the value of the \fBmac\fR in its \fBPort\fR record, if set, or its actual MAC (for bonded ports, the MAC of its member whose name is first in alphabetical order)\[char46] Internal ports and bridge ports that are used as port mirroring destinations (see the \fBMirror\fR table) are ignored\[char46]
.IP \(bu
For other internal interfaces, the default MAC is randomly generated\[char46]
.IP \(bu
External interfaces typically have a MAC address associated with their hardware\[char46]
.RE
.IP
Some interfaces may not have a software-controllable MAC address\[char46] This option only affects internal ports\[char46] For other type ports, you can change the MAC address outside Open vSwitch, using ip command\[char46]
.IP "\fBerror\fR: optional string"
If the configuration of the port failed, as indicated by \-1 in \fBofport\fR, Open vSwitch sets this column to an error description in human readable form\[char46] Otherwise, Open vSwitch clears this column\[char46]
.ST "OpenFlow Port Number:"
.PP
.PP
.PP
When a client adds a new interface, Open vSwitch chooses an OpenFlow port number for the new port\[char46] If the client that adds the port fills in \fBofport_request\fR, then Open vSwitch tries to use its value as the OpenFlow port number\[char46] Otherwise, or if the requested port number is already in use or cannot be used for another reason, Open vSwitch automatically assigns a free port number\[char46] Regardless of how the port number was obtained, Open vSwitch then reports in \fBofport\fR the port number actually assigned\[char46]
.PP
.PP
Open vSwitch limits the port numbers that it automatically assigns to the range 1 through 32,767, inclusive\[char46] Controllers therefore have free use of ports 32,768 and up\[char46]
.IP "\fBofport\fR: optional integer"
OpenFlow port number for this interface\[char46] Open vSwitch sets this column\(cqs value, so other clients should treat it as read-only\[char46]
.IP
The OpenFlow ``local\(cq\(cq port (\fBOFPP_LOCAL\fR) is 65,534\[char46] The other valid port numbers are in the range 1 to 65,279, inclusive\[char46] Value \-1 indicates an error adding the interface\[char46]
.IP "\fBofport_request\fR: optional integer, in range 1 to 65,279"
Requested OpenFlow port number for this interface\[char46]
.IP
A client should ideally set this column\(cqs value in the same database transaction that it uses to create the interface\[char46] Open vSwitch version 2\[char46]1 and later will honor a later request for a specific port number, althuogh it might confuse some controllers: OpenFlow does not have a way to announce a port number change, so Open vSwitch represents it over OpenFlow as a port deletion followed immediately by a port addition\[char46]
.IP
If \fBofport_request\fR is set or changed to some other port\(cqs automatically assigned port number, Open vSwitch chooses a new port number for the latter port\[char46]
.ST "System-Specific Details:"
.PP
.IP "\fBtype\fR: string"
The interface type\[char46] The types supported by a particular instance of Open vSwitch are listed in the \fBiface_types\fR column in the \fBOpen_vSwitch\fR table\[char46] The following types are defined:
.RS
.TP
\fBsystem\fR
An ordinary network device, e\[char46]g\[char46] \fBeth0\fR on Linux\[char46] Sometimes referred to as ``external interfaces\(cq\(cq since they are generally connected to hardware external to that on which the Open vSwitch is running\[char46] The empty string is a synonym for \fBsystem\fR\[char46]
.TP
\fBinternal\fR
A simulated network device that sends and receives traffic\[char46] An internal interface whose \fBname\fR is the same as its bridge\(cqs \fBname\fR is called the ``local interface\[char46]\(cq\(cq It does not make sense to bond an internal interface, so the terms ``port\(cq\(cq and ``interface\(cq\(cq are often used imprecisely for internal interfaces\[char46]
.TP
\fBtap\fR
A TUN/TAP device managed by Open vSwitch\[char46]
.IP
Open vSwitch checks the interface state before send packets to the device\[char46] When it is \fBdown\fR, the packets are dropped and the tx_dropped statistic is updated accordingly\[char46] Older versions of Open vSwitch did not check the interface state and then the tx_packets was incremented along with tx_dropped\[char46]
.TP
\fBgeneve\fR
An Ethernet over Geneve (\fBhttp://tools\[char46]ietf\[char46]org/html/draft\-ietf\-nvo3\-geneve\fR) IPv4/IPv6 tunnel\[char46] A description of how to match and set Geneve options can be found in the \fBovs\-ofctl\fR manual page\[char46]
.TP
\fBgre\fR
Generic Routing Encapsulation (GRE) over IPv4 tunnel, configurable to encapsulate layer 2 or layer 3 traffic\[char46]
.TP
\fBip6gre\fR
Generic Routing Encapsulation (GRE) over IPv6 tunnel, encapsulate layer 2 traffic\[char46]
.TP
\fBvxlan\fR
An Ethernet tunnel over the UDP-based VXLAN protocol described in RFC 7348\[char46]
.IP
Open vSwitch uses IANA-assigned UDP destination port 4789\[char46] The source port used for VXLAN traffic varies on a per-flow basis and is in the ephemeral port range\[char46]
.TP
\fBlisp\fR
A layer 3 tunnel over the experimental, UDP-based Locator/ID Separation Protocol (RFC 6830)\[char46]
.IP
Only IPv4 and IPv6 packets are supported by the protocol, and they are sent and received without an Ethernet header\[char46] Traffic to/from LISP ports is expected to be configured explicitly, and the ports are not intended to participate in learning based switching\[char46] As such, they are always excluded from packet flooding\[char46]
.TP
\fBstt\fR
The Stateless TCP Tunnel (STT) is particularly useful when tunnel endpoints are in end-systems, as it utilizes the capabilities of standard network interface cards to improve performance\[char46] STT utilizes a TCP-like header inside the IP header\[char46] It is stateless, i\[char46]e\[char46], there is no TCP connection state of any kind associated with the tunnel\[char46] The TCP-like header is used to leverage the capabilities of existing network interface cards, but should not be interpreted as implying any sort of connection state between endpoints\[char46] Since the STT protocol does not engage in the usual TCP 3-way handshake, so it will have difficulty traversing stateful firewalls\[char46] The protocol is documented at https://tools\[char46]ietf\[char46]org/html/draft-davie-stt All traffic uses a default destination port of 7471\[char46]
.TP
\fBpatch\fR
A pair of virtual devices that act as a patch cable\[char46]
.TP
\fBgtpu\fR
GPRS Tunneling Protocol (GTP) is a group of IP-based communications protocols used to carry general packet radio service (GPRS) within GSM, UMTS and LTE networks\[char46] GTP-U is used for carrying user data within the GPRS core network and between the radio access network and the core network\[char46] The user data transported can be packets in any of IPv4, IPv6, or PPP formats\[char46]
.IP
The protocol is documented at http://www\[char46]3gpp\[char46]org/DynaReport/29281\[char46]htm
.IP
Open vSwitch uses UDP destination port 2152\[char46] The source port used for GTP traffic varies on a per-flow basis and is in the ephemeral port range\[char46]
.TP
\fBBareudp\fR
The Bareudp tunnel provides a generic L3 encapsulation support for tunnelling different L3 protocols like MPLS, IP, NSH etc\[char46] inside a UDP tunnel\[char46]
.TP
\fBsrv6\fR
Segment Routing IPv6 (SRv6) tunnel encapsulates L3 traffic as \(dqIPv6 in IPv6\(dq or \(dqIPv4 in IPv6\(dq with Segment Routing Header (SRH) defined in RFC 8754\[char46] The segment list in SRH can be set using a SRv6 specific option\[char46]
.RE
.ST "Tunnel Options:"
.PP
.PP
.PP
These options apply to interfaces with \fBtype\fR of \fBgeneve\fR, \fBbareudp\fR, \fBgre\fR, \fBip6gre\fR, \fBvxlan\fR, \fBlisp\fR, \fBstt\fR and \fBsrv6\fR\[char46]
.PP
.PP
Each tunnel must be uniquely identified by the combination of \fBtype\fR, \fBoptions:remote_ip\fR, \fBoptions:local_ip\fR, and \fBoptions:in_key\fR\[char46] If two ports are defined that are the same except one has an optional identifier and the other does not, the more specific one is matched first\[char46] \fBoptions:in_key\fR is considered more specific than \fBoptions:local_ip\fR if a port defines one and another port defines the other\[char46] \fBoptions:in_key\fR is not applicable for bareudp and srv6 tunnels\[char46] Hence it is not considered while identifying bareudp or srv6 tunnels\[char46]
.IP "\fBoptions : remote_ip\fR: optional string"
Required\[char46] The remote tunnel endpoint, one of:
.RS
.IP \(bu
An IPv4 or IPv6 address (not a DNS name), e\[char46]g\[char46] \fB192\[char46]168\[char46]0\[char46]123\fR\[char46] Only unicast endpoints are supported\[char46]
.IP \(bu
The word \fBflow\fR\[char46] The tunnel accepts packets from any remote tunnel endpoint\[char46] To process only packets from a specific remote tunnel endpoint, the flow entries may match on the \fBtun_src\fR or \fBtun_ipv6_src\fRfield\[char46] When sending packets to a \fBremote_ip=flow\fR tunnel, the flow actions must explicitly set the \fBtun_dst\fR or \fBtun_ipv6_dst\fR field to the IP address of the desired remote tunnel endpoint, e\[char46]g\[char46] with a \fBset_field\fR action\[char46]
.RE
.IP
The remote tunnel endpoint for any packet received from a tunnel is available in the \fBtun_src\fR field for matching in the flow table\[char46]
.IP "\fBoptions : local_ip\fR: optional string"
Optional\[char46] The tunnel destination IP that received packets must match\[char46] Default is to match all addresses\[char46] If specified, may be one of:
.RS
.IP \(bu
An IPv4/IPv6 address (not a DNS name), e\[char46]g\[char46] \fB192\[char46]168\[char46]12\[char46]3\fR\[char46]
.IP \(bu
The word \fBflow\fR\[char46] The tunnel accepts packets sent to any of the local IP addresses of the system running OVS\[char46] To process only packets sent to a specific IP address, the flow entries may match on the \fBtun_dst\fR or \fBtun_ipv6_dst\fR field\[char46] When sending packets to a \fBlocal_ip=flow\fR tunnel, the flow actions may explicitly set the \fBtun_src\fR or \fBtun_ipv6_src\fR field to the desired IP address, e\[char46]g\[char46] with a \fBset_field\fR action\[char46] However, while routing the tunneled packet out, the local system may override the specified address with the local IP address configured for the outgoing system interface\[char46]
.IP
This option is valid only for tunnels also configured with the \fBremote_ip=flow\fR option\[char46]
.RE
.IP
The tunnel destination IP address for any packet received from a tunnel is available in the \fBtun_dst\fR or \fBtun_ipv6_dst\fR field for matching in the flow table\[char46]
.IP "\fBoptions : in_key\fR: optional string"
Optional, not applicable for \fBbareudp\fR and \fBsrv6\fR\[char46] The key that received packets must contain, one of:
.RS
.IP \(bu
\fB0\fR\[char46] The tunnel receives packets with no key or with a key of 0\[char46] This is equivalent to specifying no \fBoptions:in_key\fR at all\[char46]
.IP \(bu
A positive 24-bit (for Geneve, VXLAN, and LISP), 32-bit (for GRE) or 64-bit (for STT) number\[char46] The tunnel receives only packets with the specified key\[char46]
.IP \(bu
The word \fBflow\fR\[char46] The tunnel accepts packets with any key\[char46] The key will be placed in the \fBtun_id\fR field for matching in the flow table\[char46] The \fBovs\-fields\fR(7) manual page contains additional information about matching fields in OpenFlow flows\[char46]
.RE
.IP
.IP "\fBoptions : out_key\fR: optional string"
Optional, not applicable for \fBbareudp\fR and \fBsrv6\fR\[char46] The key to be set on outgoing packets, one of:
.RS
.IP \(bu
\fB0\fR\[char46] Packets sent through the tunnel will have no key\[char46] This is equivalent to specifying no \fBoptions:out_key\fR at all\[char46]
.IP \(bu
A positive 24-bit (for Geneve, VXLAN and LISP), 32-bit (for GRE) or 64-bit (for STT) number\[char46] Packets sent through the tunnel will have the specified key\[char46]
.IP \(bu
The word \fBflow\fR\[char46] Packets sent through the tunnel will have the key set using the \fBset_tunnel\fR Nicira OpenFlow vendor extension (0 is used in the absence of an action)\[char46] The \fBovs\-fields\fR(7) manual page contains additional information about the Nicira OpenFlow vendor extensions\[char46]
.RE
.IP "\fBoptions : dst_port\fR: optional string"
Optional\[char46] The tunnel transport layer destination port, for UDP and TCP based tunnel protocols (Geneve, VXLAN, LISP, and STT)\[char46]
.IP "\fBoptions : key\fR: optional string"
Optional\[char46] Shorthand to set \fBin_key\fR and \fBout_key\fR at the same time\[char46]
.IP "\fBoptions : tos\fR: optional string"
Optional\[char46] The value of the ToS bits to be set on the encapsulating packet\[char46] ToS is interpreted as DSCP and ECN bits, ECN part must be zero\[char46] It may also be the word \fBinherit\fR, in which case the ToS will be copied from the inner packet if it is IPv4 or IPv6 (otherwise it will be 0)\[char46] The ECN fields are always inherited\[char46] Default is 0\[char46]
.IP "\fBoptions : ttl\fR: optional string"
Optional\[char46] The TTL to be set on the encapsulating packet\[char46] It may also be the word \fBinherit\fR, in which case the TTL will be copied from the inner packet if it is IPv4 or IPv6 (otherwise it will be the system default, typically 64)\[char46] Default is the system default TTL\[char46]
.IP "\fBoptions : df_default\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Optional\[char46] If enabled, the Don\(cqt Fragment bit will be set on tunnel outer headers to allow path MTU discovery\[char46] Default is enabled; set to \fBfalse\fR to disable\[char46]
.IP "\fBoptions : egress_pkt_mark\fR: optional string"
Optional\[char46] The pkt_mark to be set on the encapsulating packet\[char46] This option sets packet mark for the tunnel endpoint for all tunnel packets including tunnel monitoring\[char46]
.ST "Tunnel Options: lisp only:"
.PP
.IP "\fBoptions : packet_type\fR: optional string, either \fBlegacy_l3\fR or \fBptap\fR"
A LISP tunnel sends and receives only IPv4 and IPv6 packets\[char46] This option controls what how the tunnel represents the packets that it sends and receives:
.RS
.IP \(bu
By default, or if this option is \fBlegacy_l3\fR, the tunnel represents packets as Ethernet frames for compatibility with legacy OpenFlow controllers that expect this behavior\[char46]
.IP \(bu
If this option is \fBptap\fR, the tunnel represents packets using the \fBpacket_type\fR mechanism introduced in OpenFlow 1\[char46]5\[char46]
.RE
.ST "Tunnel Options: vxlan only:"
.PP
.IP "\fBoptions : exts\fR: optional string"
Optional\[char46] Comma separated list of optional VXLAN extensions to enable\[char46] The following extensions are supported:
.RS
.IP \(bu
\fBgbp\fR: VXLAN-GBP allows to transport the group policy context of a packet across the VXLAN tunnel to other network peers\[char46] See the description of \fBtun_gbp_id\fR and \fBtun_gbp_flags\fR in \fBovs\-fields\fR(7) for additional information\[char46] (\fBhttps://tools\[char46]ietf\[char46]org/html/draft\-smith\-vxlan\-group\-policy\fR)
.IP \(bu
\fBgpe\fR: Support for Generic Protocol Encapsulation in accordance with IETF draft \fBhttps://tools\[char46]ietf\[char46]org/html/draft\-ietf\-nvo3\-vxlan\-gpe\fR\[char46] Without this option, a VXLAN packet always encapsulates an Ethernet frame\[char46] With this option, an VXLAN packet may also encapsulate an IPv4, IPv6, NSH, or MPLS packet\[char46]
.RE
.IP "\fBoptions : packet_type\fR: optional string, one of \fBlegacy_l2\fR, \fBlegacy_l3\fR, or \fBptap\fR"
This option controls what types of packets the tunnel sends and receives and how it represents them:
.RS
.IP \(bu
By default, or if this option is \fBlegacy_l2\fR, the tunnel sends and receives only Ethernet frames\[char46]
.IP \(bu
If this option is \fBlegacy_l3\fR, the tunnel sends and receives only non-Ethernet (L3) packet, but the packets are represented as Ethernet frames for compatibility with legacy OpenFlow controllers that expect this behavior\[char46] This requires enabling \fBgpe\fR in \fBoptions:exts\fR\[char46]
.IP \(bu
If this option is \fBptap\fR, Open vSwitch represents packets in the tunnel using the \fBpacket_type\fR mechanism introduced in OpenFlow 1\[char46]5\[char46] This mechanism supports any kind of packet, but actually sending and receiving non-Ethernet packets requires additionally enabling \fBgpe\fR in \fBoptions:exts\fR\[char46]
.RE
.ST "Tunnel Options: gre only:"
.PP
.PP
.PP
\fBgre\fR interfaces support these options\[char46]
.IP "\fBoptions : packet_type\fR: optional string, one of \fBlegacy_l2\fR, \fBlegacy_l3\fR, or \fBptap\fR"
This option controls what types of packets the tunnel sends and receives and how it represents them:
.RS
.IP \(bu
By default, or if this option is \fBlegacy_l2\fR, the tunnel sends and receives only Ethernet frames\[char46]
.IP \(bu
If this option is \fBlegacy_l3\fR, the tunnel sends and receives only non-Ethernet (L3) packet, but the packets are represented as Ethernet frames for compatibility with legacy OpenFlow controllers that expect this behavior\[char46]
.IP \(bu
The \fBlegacy_l3\fR option is only available via the user space datapath\[char46] The OVS kernel datapath does not support devices of type ARPHRD_IPGRE which is the requirement for \fBlegacy_l3\fR type packets\[char46]
.IP \(bu
If this option is \fBptap\fR, the tunnel sends and receives any kind of packet\[char46] Open vSwitch represents packets in the tunnel using the \fBpacket_type\fR mechanism introduced in OpenFlow 1\[char46]5\[char46]
.RE
.IP "\fBoptions : seq\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Optional\[char46] A 4-byte sequence number field for GRE tunnel only\[char46] Default is disabled, set to \fBtrue\fR to enable\[char46] Sequence number is incremented by one on each outgoing packet\[char46]
.ST "Tunnel Options: gre, ip6gre, geneve, bareudp and vxlan:"
.PP
.PP
.PP
\fBgre\fR, \fBip6gre\fR, \fBgeneve\fR, \fBbareudp\fR and \fBvxlan\fR interfaces support these options\[char46]
.IP "\fBoptions : csum\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Optional\[char46] Compute encapsulation header (either GRE or UDP) checksums on outgoing packets\[char46] Default is disabled, set to \fBtrue\fR to enable\[char46] Checksums present on incoming packets will be validated regardless of this setting\[char46]
.IP
When using the upstream Linux kernel module, computation of checksums for \fBgeneve\fR and \fBvxlan\fR requires Linux kernel version 4\[char46]0 or higher\[char46] \fBgre\fR and \fBip6gre\fR support checksums for all versions of Open vSwitch that support GRE\[char46] The out of tree kernel module distributed as part of OVS can compute all tunnel checksums on any kernel version that it is compatible with\[char46]
.ST "Tunnel Options: IPsec:"
.PP
.PP
.PP
Setting any of these options enables IPsec support for a given tunnel\[char46] \fBgre\fR, \fBgeneve\fR, \fBvxlan\fR and \fBstt\fR interfaces support these options\[char46] See the \fBIPsec\fR section in the \fBOpen_vSwitch\fR table for a description of each mode\[char46]
.IP "\fBoptions : psk\fR: optional string"
In PSK mode only, the preshared secret to negotiate tunnel\[char46] This value must match on both tunnel ends\[char46]
.IP "\fBoptions : remote_cert\fR: optional string"
In self-signed certificate mode only, name of a PEM file containing a certificate of the remote switch\[char46] The certificate must be x\[char46]509 version 3 and with the string in common name (CN) also set in the subject alternative name (SAN)\[char46]
.IP "\fBoptions : remote_name\fR: optional string"
In CA-signed certificate mode only, common name (CN) of the remote certificate\[char46]
.ST "Tunnel Options: erspan only:"
.PP
.PP
.PP
Only \fBerspan\fR interfaces support these options\[char46]
.IP "\fBoptions : erspan_idx\fR: optional string"
20 bit index/port number associated with the ERSPAN traffic\(cqs source port and direction (ingress/egress)\[char46] This field is platform dependent\[char46]
.IP "\fBoptions : erspan_ver\fR: optional string"
ERSPAN version: 1 for version 1 (type II) or 2 for version 2 (type III)\[char46]
.IP "\fBoptions : erspan_dir\fR: optional string"
Specifies the ERSPAN v2 mirrored traffic\(cqs direction\[char46] 1 for egress traffic, and 0 for ingress traffic\[char46]
.IP "\fBoptions : erspan_hwid\fR: optional string"
ERSPAN hardware ID is a 6-bit unique identifier of an ERSPAN v2 engine within a system\[char46]
.ST "Tunnel Options: Bareudp only:"
.PP
.IP "\fBoptions : payload_type\fR: optional string"
Specifies the ethertype of the l3 protocol the bareudp device is tunnelling\[char46] For the tunnels which supports multiple ethertypes of a l3 protocol (IP, MPLS) this field specifies the protocol name as a string\[char46]
.ST "Tunnel Options: srv6 only:"
.PP
.IP "\fBoptions : srv6_segs\fR: optional string"
Specifies the segment list in Segment Routing Header (SRH)\[char46] It consists of a comma-separated list of segments represented in IPv6 format, e\[char46]g\[char46] \(dqfc00:100::1,fc00:200::1,fc00:300::1\(dq\[char46] Note that the first segment must be the same as \fBoptions:remote_ip\fR\[char46]
.IP "\fBoptions : srv6_flowlabel\fR: optional string, one of \fBcompute\fR, \fBcopy\fR, or \fBzero\fR"
Optional\[char46] This option controls how flowlabel in outer IPv6 header is configured\[char46] It gives the benefit of IPv6 flow label based load balancing, which is supported by some popular vendor appliances\[char46] Like net\[char46]ipv6\[char46]seg6_flowlabel sysconfig, it is one of the three values below:
.RS
.IP \(bu
By default, or if this option is \fBcopy\fR, copy the flowlabel of inner IPv6 header to the flowlabel of outer IPv6 header\[char46] If inner header is not IPv6, it is set to 0\[char46]
.IP \(bu
If this option is \fBzero\fR, simply set flowlabel to 0\[char46]
.IP \(bu
If this option is \fBcompute\fR, set flowlabel to a hash over the L3/L4 fields of the inner packet\[char46]
.RE
.ST "Patch Options:"
.PP
.PP
.PP
These options apply only to \fIpatch ports\fR, that is, interfaces whose \fBtype\fR column is \fBpatch\fR\[char46] Patch ports are mainly a way to connect otherwise independent bridges to one another, similar to how one might plug an Ethernet cable (a ``patch cable\(cq\(cq) into two physical switches to connect those switches\[char46] The effect of plugging a patch port into two switches is conceptually similar to that of plugging the two ends of a Linux \fBveth\fR device into those switches, but the implementation of patch ports makes them much more efficient\[char46]
.PP
.PP
Patch ports may connect two different bridges (the usual case) or the same bridge\[char46] In the latter case, take special care to avoid loops, e\[char46]g\[char46] by programming appropriate flows with OpenFlow\[char46] Patch ports do not work if its ends are attached to bridges on different datapaths, e\[char46]g\[char46] to connect bridges in \fBsystem\fR and \fBnetdev\fR datapaths\[char46]
.PP
.PP
The following command creates and connects patch ports \fBp0\fR and \fBp1\fR and adds them to bridges \fBbr0\fR and \fBbr1\fR, respectively:
.PP
.nf
\fB
.br
\fBovs\-vsctl add\-port br0 p0 \-\- set Interface p0 type=patch options:peer=p1 \e
.br
\fB       \-\- add\-port br1 p1 \-\- set Interface p1 type=patch options:peer=p0
.br
\fB      \fR
.fi
.IP "\fBoptions : peer\fR: optional string"
The \fBname\fR of the \fBInterface\fR for the other side of the patch\[char46] The named \fBInterface\fR\(cqs own \fBpeer\fR option must specify this \fBInterface\fR\(cqs name\[char46] That is, the two patch interfaces must have reversed \fBname\fR and \fBpeer\fR values\[char46]
.ST "PMD (Poll Mode Driver) Options:"
.PP
.PP
.PP
Only PMD netdevs support these options\[char46]
.IP "\fBoptions : n_rxq\fR: optional string, containing an integer, at least 1"
Specifies the maximum number of rx queues to be created for PMD netdev\[char46] If not specified or specified to 0, one rx queue will be created by default\[char46] Not supported by DPDK vHost interfaces\[char46]
.IP "\fBoptions : dpdk-devargs\fR: optional string"
Specifies the PCI address associated with the port for physical devices, or the virtual driver to be used for the port when a virtual PMD is intended to be used\[char46] For the latter, the argument string typically takes the form of \fBeth_\fIdriver_name\fB\fIx\fB\fR, where \fIdriver_name\fR is a valid virtual DPDK PMD driver name and \fIx\fR is a unique identifier of your choice for the given port\[char46] Only supported by the dpdk port type\[char46]
.IP "\fBother_config : pmd-rxq-affinity\fR: optional string"
Specifies mapping of RX queues of this interface to CPU cores\[char46]
.IP
Value should be set in the following form:
.IP
\fBother_config:pmd\-rxq\-affinity=<rxq\-affinity\-list>\fR
.IP
where
.IP
.RS
.IP \(bu
<rxq-affinity-list> ::= NULL | <non-empty-list>
.IP \(bu
<non-empty-list> ::= <affinity-pair> | <affinity-pair> , <non-empty-list>
.IP \(bu
<affinity-pair> ::= <queue-id> : <core-id>
.RE
.IP "\fBoptions : xdp-mode\fR: optional string, one of \fBbest\-effort\fR, \fBgeneric\fR, \fBnative\-with\-zerocopy\fR, or \fBnative\fR"
Specifies the operational mode of the XDP program\[char46]
.IP
In \fBnative\-with\-zerocopy\fR mode the XDP program is loaded into the device driver with zero-copy RX and TX enabled\[char46] This mode requires device driver support and has the best performance because there should be no copying of packets\[char46]
.IP
\fBnative\fR is the same as \fBnative\-with\-zerocopy\fR, but without zero-copy capability\[char46] This requires at least one copy between kernel and the userspace\[char46] This mode also requires support from device driver\[char46]
.IP
In \fBgeneric\fR case the XDP program in kernel works after skb allocation on early stages of packet processing inside the network stack\[char46] This mode doesn\(cqt require driver support, but has much lower performance\[char46]
.IP
\fBbest\-effort\fR tries to detect and choose the best (fastest) from the available modes for current interface\[char46]
.IP
Note that this option is specific to netdev-afxdp\[char46] Defaults to \fBbest\-effort\fR mode\[char46]
.IP "\fBoptions : use-need-wakeup\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Specifies whether to use need_wakeup feature in afxdp netdev\[char46] If enabled, OVS explicitly wakes up the kernel RX, using poll() syscall and wakes up TX, using sendto() syscall\[char46] For physical devices, this feature improves the performance by avoiding unnecessary sendto syscalls\[char46] Defaults to true if supported by libbpf\[char46]
.IP "\fBoptions : vhost-server-path\fR: optional string"
The value specifies the path to the socket associated with a vHost User client mode device that has been or will be created by QEMU\[char46] Only supported by dpdkvhostuserclient interfaces\[char46]
.IP "\fBoptions : tx-retries-max\fR: optional string, containing an integer, in range 0 to 32"
The value specifies the maximum amount of vhost tx retries that can be made while trying to send a batch of packets to an interface\[char46] Only supported by dpdkvhostuserclient interfaces\[char46]
.IP
Default value is 8\[char46]
.IP "\fBoptions : n_rxq_desc\fR: optional string, containing an integer, in range 1 to 4,096"
Specifies the rx queue size (number rx descriptors) for dpdk ports\[char46] The value must be a power of 2, less than 4096 and supported by the hardware of the device being configured\[char46] If not specified or an incorrect value is specified, 2048 rx descriptors will be used by default\[char46]
.IP "\fBoptions : n_txq_desc\fR: optional string, containing an integer, in range 1 to 4,096"
Specifies the tx queue size (number tx descriptors) for dpdk ports\[char46] The value must be a power of 2, less than 4096 and supported by the hardware of the device being configured\[char46] If not specified or an incorrect value is specified, 2048 tx descriptors will be used by default\[char46]
.IP "\fBoptions : dpdk-vf-mac\fR: optional string"
Ethernet address to set for this VF interface\[char46] If unset then the default MAC address is used:
.RS
.IP \(bu
For most drivers, the default MAC address assigned by their hardware\[char46]
.IP \(bu
For bifurcated drivers, the MAC currently used by the kernel netdevice\[char46]
.RE
.IP
This option may only be used with dpdk VF representors\[char46]
.IP "\fBoptions : rx-steering\fR: optional string, either \fBrss+lacp\fR or \fBrss\fR"
Configure hardware Rx queue steering policy\[char46]
.IP
This option takes one of the following values:
.RS
.TP
\fBrss\fR
Distribution of ingress packets in all Rx queues according to the RSS algorithm\[char46] This is the default behaviour\[char46]
.TP
\fBrss+lacp\fR
Distribution of ingress packets according to the RSS algorithm on all but the last Rx queue\[char46] An extra Rx queue is allocated for LACP packets\[char46]
.RE
.IP
If the user has already configured multiple \fBoptions:n_rxq\fR on the port, an additional one will be allocated for the specified protocols\[char46] Even if the hardware cannot satisfy the requested number of requested Rx queues, the last Rx queue will be used\[char46] If only one Rx queue is available or if the hardware does not support the rte_flow matchers/actions required to redirect the selected protocols, custom \fBrx\-steering\fR will fall back to default \fBrss\fR mode\[char46]
.IP
This feature is mutually exclusive with \fBother_config:hw-offload\fR as it may conflict with the offloaded flows\[char46] If both are enabled, \fBrx\-steering\fR will fall back to default \fBrss\fR mode\[char46]
.IP
This option is only applicable to interfaces with type \fBdpdk\fR\[char46]
.IP "\fBother_config : tx-steering\fR: optional string, either \fBhash\fR or \fBthread\fR"
Specifies the Tx steering mode for the interface\[char46]
.IP
\fBthread\fR enables static (1:1) thread-to-txq mapping when the number of Tx queues is greater than number of PMD threads, and dynamic (N:1) mapping if equal or lower\[char46] In this mode a single thread can not use more than 1 transmit queue of a given port\[char46]
.IP
\fBhash\fR enables hash-based Tx steering, which distributes the packets on all the transmit queues based on their 5-tuples hashes\[char46]
.IP
Defaults to \fBthread\fR\[char46]
.ST "EMC (Exact Match Cache) Configuration:"
.PP
.PP
.PP
These settings controls behaviour of EMC lookups/insertions for packets received from the interface\[char46]
.IP "\fBother_config : emc-enable\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Specifies if Exact Match Cache (EMC) should be used while processing packets received from this interface\[char46] If true, \fBother_config:emc-insert-inv-prob\fR will have effect on this interface\[char46]
.IP
Defaults to true\[char46]
.ST "MTU:"
.PP
.PP
.PP
The MTU (maximum transmission unit) is the largest amount of data that can fit into a single Ethernet frame\[char46] The standard Ethernet MTU is 1500 bytes\[char46] Some physical media and many kinds of virtual interfaces can be configured with higher MTUs\[char46]
.PP
.PP
A client may change an interface MTU by filling in \fBmtu_request\fR\[char46] Open vSwitch then reports in \fBmtu\fR the currently configured value\[char46]
.IP "\fBmtu\fR: optional integer"
The currently configured MTU for the interface\[char46]
.IP
This column will be empty for an interface that does not have an MTU as, for example, some kinds of tunnels do not\[char46]
.IP
Open vSwitch sets this column\(cqs value, so other clients should treat it as read-only\[char46]
.IP "\fBmtu_request\fR: optional integer, at least 1"
Requested MTU (Maximum Transmission Unit) for the interface\[char46] A client can fill this column to change the MTU of an interface\[char46]
.IP
RFC 791 requires every internet module to be able to forward a datagram of 68 octets without further fragmentation\[char46] The maximum size of an IP packet is 65535 bytes\[char46]
.IP
If this is not set and if the interface has \fBinternal\fR type, Open vSwitch will change the MTU to match the minimum of the other interfaces in the bridge\[char46]
.ST "Interface Status:"
.PP
.PP
.PP
Status information about interfaces attached to bridges, updated every 5 seconds\[char46] Not all interfaces have all of these properties; virtual interfaces don\(cqt have a link speed, for example\[char46] Non-applicable columns will have empty values\[char46]
.IP "\fBadmin_state\fR: optional string, either \fBdown\fR or \fBup\fR"
The administrative state of the physical network link\[char46]
.IP "\fBlink_state\fR: optional string, either \fBdown\fR or \fBup\fR"
The observed state of the physical network link\[char46] This is ordinarily the link\(cqs carrier status\[char46] If the interface\(cqs \fBPort\fR is a bond configured for miimon monitoring, it is instead the network link\(cqs miimon status\[char46]
.IP "\fBlink_resets\fR: optional integer"
The number of times Open vSwitch has observed the \fBlink_state\fR of this \fBInterface\fR change\[char46]
.IP "\fBlink_speed\fR: optional integer"
The negotiated speed of the physical network link\[char46] Valid values are positive integers greater than 0\[char46]
.IP "\fBduplex\fR: optional string, either \fBfull\fR or \fBhalf\fR"
The duplex mode of the physical network link\[char46]
.IP "\fBlacp_current\fR: optional boolean"
Boolean value indicating LACP status for this interface\[char46] If true, this interface has current LACP information about its LACP partner\[char46] This information may be used to monitor the health of interfaces in a LACP enabled port\[char46] This column will be empty if LACP is not enabled\[char46]
.IP "\fBstatus\fR: map of string-string pairs"
Key-value pairs that report port status\[char46] Supported status values are \fBtype\fR-dependent; some interfaces may not have a valid \fBstatus:driver_name\fR, for example\[char46]
.IP "\fBstatus : driver_name\fR: optional string"
The name of the device driver controlling the network adapter\[char46]
.IP "\fBstatus : driver_version\fR: optional string"
The version string of the device driver controlling the network adapter\[char46]
.IP "\fBstatus : firmware_version\fR: optional string"
The version string of the network adapter\(cqs firmware, if available\[char46]
.IP "\fBstatus : source_ip\fR: optional string"
The source IP address used for an IPv4/IPv6 tunnel end-point, such as \fBgre\fR\[char46]
.IP "\fBstatus : tunnel_egress_iface\fR: optional string"
Egress interface for tunnels\[char46] Currently only relevant for tunnels on Linux systems, this column will show the name of the interface which is responsible for routing traffic destined for the configured \fBoptions:remote_ip\fR\[char46] This could be an internal interface such as a bridge port\[char46]
.IP "\fBstatus : tunnel_egress_iface_carrier\fR: optional string, either \fBdown\fR or \fBup\fR"
Whether carrier is detected on \fBstatus:tunnel_egress_iface\fR\[char46]
.ST "dpdk:"
.PP
.PP
.PP
DPDK specific interface status options\[char46]
.IP "\fBstatus : port_no\fR: optional string"
DPDK port ID\[char46]
.IP "\fBstatus : numa_id\fR: optional string"
NUMA socket ID to which an Ethernet device is connected\[char46]
.IP "\fBstatus : min_rx_bufsize\fR: optional string"
Minimum size of RX buffer\[char46]
.IP "\fBstatus : max_rx_pktlen\fR: optional string"
Maximum configurable length of RX pkt\[char46]
.IP "\fBstatus : max_rx_queues\fR: optional string"
Maximum number of RX queues\[char46]
.IP "\fBstatus : max_tx_queues\fR: optional string"
Maximum number of TX queues\[char46]
.IP "\fBstatus : max_mac_addrs\fR: optional string"
Maximum number of MAC addresses\[char46]
.IP "\fBstatus : max_hash_mac_addrs\fR: optional string"
Maximum number of hash MAC addresses for MTA and UTA\[char46]
.IP "\fBstatus : max_vfs\fR: optional string"
Maximum number of hash MAC addresses for MTA and UTA\[char46] Maximum number of VFs\[char46]
.IP "\fBstatus : max_vmdq_pools\fR: optional string"
Maximum number of VMDq pools\[char46]
.IP "\fBstatus : if_type\fR: optional string"
Interface type ID according to IANA ifTYPE MIB definitions\[char46]
.IP "\fBstatus : if_descr\fR: optional string"
Interface description string\[char46]
.IP "\fBstatus : pci-vendor_id\fR: optional string"
Vendor ID of PCI device\[char46]
.IP "\fBstatus : pci-device_id\fR: optional string"
Device ID of PCI device\[char46]
.ST "Statistics:"
.PP
.PP
.PP
Key-value pairs that report interface statistics\[char46] The current implementation updates these counters periodically\[char46] The update period is controlled by \fBother_config:stats-update-interval\fR in the \fBOpen_vSwitch\fR table\[char46] Future implementations may update them when an interface is created, when they are queried (e\[char46]g\[char46] using an OVSDB \fBselect\fR operation), and just before an interface is deleted due to virtual interface hot-unplug or VM shutdown, and perhaps at other times, but not on any regular periodic basis\[char46]
.PP
.PP
These are the same statistics reported by OpenFlow in its \fBstruct
ofp_port_stats\fR structure\[char46] If an interface does not support a given statistic, then that pair is omitted\[char46]
.ST "Statistics: Successful transmit and receive counters:"
.PP
.IP "\fBstatistics : rx_packets\fR: optional integer"
Number of received packets\[char46]
.IP "\fBstatistics : rx_bytes\fR: optional integer"
Number of received bytes\[char46]
.IP "\fBstatistics : tx_packets\fR: optional integer"
Number of transmitted packets\[char46]
.IP "\fBstatistics : tx_bytes\fR: optional integer"
Number of transmitted bytes\[char46]
.ST "Statistics: Receive errors:"
.PP
.IP "\fBstatistics : rx_dropped\fR: optional integer"
Number of packets dropped by RX\[char46]
.IP "\fBstatistics : rx_frame_err\fR: optional integer"
Number of frame alignment errors\[char46]
.IP "\fBstatistics : rx_over_err\fR: optional integer"
Number of packets with RX overrun\[char46]
.IP "\fBstatistics : rx_crc_err\fR: optional integer"
Number of CRC errors\[char46]
.IP "\fBstatistics : rx_errors\fR: optional integer"
Total number of receive errors, greater than or equal to the sum of the above\[char46]
.ST "Statistics: Transmit errors:"
.PP
.IP "\fBstatistics : tx_dropped\fR: optional integer"
Number of packets dropped by TX\[char46]
.IP "\fBstatistics : collisions\fR: optional integer"
Number of collisions\[char46]
.IP "\fBstatistics : tx_errors\fR: optional integer"
Total number of transmit errors, greater than or equal to the sum of the above\[char46]
.ST "Ingress Policing:"
.PP
.PP
.PP
These settings control ingress policing for packets received on this interface\[char46] On a physical interface, this limits the rate at which traffic is allowed into the system from the outside; on a virtual interface (one connected to a virtual machine), this limits the rate at which the VM is able to transmit\[char46]
.PP
.PP
Policing is a simple form of quality-of-service that simply drops packets received in excess of the configured rate\[char46] Due to its simplicity, policing is usually less accurate and less effective than egress QoS (which is configured using the \fBQoS\fR and \fBQueue\fR tables)\[char46]
.PP
.PP
Policing settings can be set with byte rate or packet rate, and they can be configured together, in which case they take effect together, that means the smaller speed limit of them is in effect\[char46]
.PP
.PP
Currently, byte rate policing is implemented on Linux and OVS with DPDK, while packet rate policing is only implemented on Linux\[char46] Both Linux and OVS DPDK implementations use a simple ``token bucket\(cq\(cq approach\[char46]
.PP
.PP
Byte rate policing:
.RS
.IP \(bu
The size of the bucket corresponds to \fBingress_policing_burst\fR\[char46] Initially the bucket is full\[char46]
.IP \(bu
Whenever a packet is received, its size (converted to tokens) is compared to the number of tokens currently in the bucket\[char46] If the required number of tokens are available, they are removed and the packet is forwarded\[char46] Otherwise, the packet is dropped\[char46]
.IP \(bu
Whenever it is not full, the bucket is refilled with tokens at the rate specified by \fBingress_policing_rate\fR\[char46]
.RE
.PP
.PP
Packet rate policing:
.RS
.IP \(bu
The size of the bucket corresponds to \fBingress_policing_kpkts_burst\fR\[char46] Initially the bucket is full\[char46]
.IP \(bu
Whenever a packet is received, it will consume one token from the current bucket\[char46] If the token is available in the bucket, it\(cqs removed and the packet is forwarded\[char46] Otherwise, the packet is dropped\[char46]
.IP \(bu
Whenever it is not full, the bucket is refilled with tokens at the rate specified by \fBingress_policing_kpkts_rate\fR\[char46]
.RE
.PP
.PP
Policing interacts badly with some network protocols, and especially with fragmented IP packets\[char46] Suppose that there is enough network activity to keep the bucket nearly empty all the time\[char46] Then this token bucket algorithm will forward a single packet every so often, with the period depending on packet size and on the configured rate\[char46] All of the fragments of an IP packets are normally transmitted back-to-back, as a group\[char46] In such a situation, therefore, only one of these fragments will be forwarded and the rest will be dropped\[char46] IP does not provide any way for the intended recipient to ask for only the remaining fragments\[char46] In such a case there are two likely possibilities for what will happen next: either all of the fragments will eventually be retransmitted (as TCP will do), in which case the same problem will recur, or the sender will not realize that its packet has been dropped and data will simply be lost (as some UDP-based protocols will do)\[char46] Either way, it is possible that no forward progress will ever occur\[char46]
.IP "\fBingress_policing_rate\fR: integer, at least 0"
Maximum rate for data received on this interface, in kbps\[char46] Data received faster than this rate is dropped\[char46] Set to \fB0\fR (the default) to disable policing\[char46]
.IP "\fBingress_policing_kpkts_rate\fR: integer, at least 0"
Maximum rate for data received on this interface, in kpps (1 kpps is 1000 pps)\[char46] Data received faster than this rate is dropped\[char46] Set to \fB0\fR (the default) to disable policing\[char46]
.IP "\fBingress_policing_burst\fR: integer, at least 0"
Maximum burst size for data received on this interface, in kb\[char46] The default burst size if set to \fB0\fR is 8000 kbit\[char46] This value has no effect if \fBingress_policing_rate\fR is \fB0\fR\[char46]
.IP
Specifying a larger burst size lets the algorithm be more forgiving, which is important for protocols like TCP that react severely to dropped packets\[char46] The burst size should be at least the size of the interface\(cqs MTU\[char46] Specifying a value that is numerically at least as large as 80% of \fBingress_policing_rate\fR helps TCP come closer to achieving the full rate\[char46]
.IP "\fBingress_policing_kpkts_burst\fR: integer, at least 0"
Maximum burst size for data received on this interface, in kpkts (1 kpkts is 1000 packets)\[char46] The default burst size if set to \fB0\fR is 16 kpkts\[char46] This value has no effect if \fBingress_policing_kpkts_rate\fR is \fB0\fR\[char46]
.IP
Specifying a larger burst size lets the algorithm be more forgiving, which is important for protocols like TCP that react severely to dropped packets\[char46] Specifying a value that is numerically at least as large as 80% of \fBingress_policing_kpkts_rate\fR helps TCP come closer to achieving the full rate\[char46]
.ST "Bidirectional Forwarding Detection (BFD):"
.PP
.PP
.PP
BFD, defined in RFC 5880 and RFC 5881, allows point-to-point detection of connectivity failures by occasional transmission of BFD control messages\[char46] Open vSwitch implements BFD to serve as a more popular and standards compliant alternative to CFM\[char46]
.PP
.PP
BFD operates by regularly transmitting BFD control messages at a rate negotiated independently in each direction\[char46] Each endpoint specifies the rate at which it expects to receive control messages, and the rate at which it is willing to transmit them\[char46] By default, Open vSwitch uses a detection multiplier of three, meaning that an endpoint signals a connectivity fault if three consecutive BFD control messages fail to arrive\[char46] In the case of a unidirectional connectivity issue, the system not receiving BFD control messages signals the problem to its peer in the messages it transmits\[char46]
.PP
.PP
The Open vSwitch implementation of BFD aims to comply faithfully with RFC 5880 requirements\[char46] Open vSwitch does not implement the optional Authentication or ``Echo Mode\(cq\(cq features\[char46]
.PP
.PP
OVS 2\[char46]13 and earlier intercepted and processed all BFD packets\[char46] OVS 2\[char46]14 and later only intercept and process BFD packets destined to a configured BFD instance, and other BFD packets are made available to the OVS flow table for forwarding\[char46]
.ST "BFD Configuration:"
.PP
.PP
.PP
A controller sets up key-value pairs in the \fBbfd\fR column to enable and configure BFD\[char46]
.IP "\fBbfd : enable\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True to enable BFD on this \fBInterface\fR\[char46] If not specified, BFD will not be enabled by default\[char46]
.IP "\fBbfd : min_rx\fR: optional string, containing an integer, at least 1"
The shortest interval, in milliseconds, at which this BFD session offers to receive BFD control messages\[char46] The remote endpoint may choose to send messages at a slower rate\[char46] Defaults to \fB1000\fR\[char46]
.IP "\fBbfd : min_tx\fR: optional string, containing an integer, at least 1"
The shortest interval, in milliseconds, at which this BFD session is willing to transmit BFD control messages\[char46] Messages will actually be transmitted at a slower rate if the remote endpoint is not willing to receive as quickly as specified\[char46] Defaults to \fB100\fR\[char46]
.IP "\fBbfd : decay_min_rx\fR: optional string, containing an integer"
An alternate receive interval, in milliseconds, that must be greater than or equal to \fBbfd:min_rx\fR\[char46] The implementation switches from \fBbfd:min_rx\fR to \fBbfd:decay_min_rx\fR when there is no obvious incoming data traffic at the interface, to reduce the CPU and bandwidth cost of monitoring an idle interface\[char46] This feature may be disabled by setting a value of 0\[char46] This feature is reset whenever \fBbfd:decay_min_rx\fR or \fBbfd:min_rx\fR changes\[char46]
.IP "\fBbfd : forwarding_if_rx\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
When \fBtrue\fR, traffic received on the \fBInterface\fR is used to indicate the capability of packet I/O\[char46] BFD control packets are still transmitted and received\[char46] At least one BFD control packet must be received every 100 * \fBbfd:min_rx\fR amount of time\[char46] Otherwise, even if traffic are received, the \fBbfd:forwarding\fR will be \fBfalse\fR\[char46]
.IP "\fBbfd : cpath_down\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set to true to notify the remote endpoint that traffic should not be forwarded to this system for some reason other than a connectivty failure on the interface being monitored\[char46] The typical underlying reason is ``concatenated path down,\(cq\(cq that is, that connectivity beyond the local system is down\[char46] Defaults to false\[char46]
.IP "\fBbfd : check_tnl_key\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set to true to make BFD accept only control messages with a tunnel key of zero\[char46] By default, BFD accepts control messages with any tunnel key\[char46]
.IP "\fBbfd : bfd_local_src_mac\fR: optional string"
Set to an Ethernet address in the form \fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR to set the MAC used as source for transmitted BFD packets\[char46] The default is the mac address of the BFD enabled interface\[char46]
.IP "\fBbfd : bfd_local_dst_mac\fR: optional string"
Set to an Ethernet address in the form \fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR to set the MAC used as destination for transmitted BFD packets\[char46] The default is \fB00:23:20:00:00:01\fR\[char46]
.IP "\fBbfd : bfd_remote_dst_mac\fR: optional string"
Set to an Ethernet address in the form \fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR to set the MAC used for checking the destination of received BFD packets\[char46] Packets with different destination MAC will not be considered as BFD packets\[char46] If not specified the destination MAC address of received BFD packets are not checked\[char46]
.IP "\fBbfd : bfd_src_ip\fR: optional string"
Set to an IPv4 address to set the IP address used as source for transmitted BFD packets\[char46] The default is \fB169\[char46]254\[char46]1\[char46]1\fR\[char46]
.IP "\fBbfd : bfd_dst_ip\fR: optional string"
Set to an IPv4 address to set the IP address used as destination for transmitted BFD packets\[char46] The default is \fB169\[char46]254\[char46]1\[char46]0\fR\[char46]
.IP "\fBbfd : oam\fR: optional string"
Some tunnel protocols (such as Geneve) include a bit in the header to indicate that the encapsulated packet is an OAM frame\[char46] By setting this to true, BFD packets will be marked as OAM if encapsulated in one of these tunnels\[char46]
.IP "\fBbfd : mult\fR: optional string, containing an integer, in range 1 to 255"
The BFD detection multiplier, which defaults to 3\[char46] An endpoint signals a connectivity fault if the given number of consecutive BFD control messages fail to arrive\[char46]
.ST "BFD Status:"
.PP
.PP
.PP
The switch sets key-value pairs in the \fBbfd_status\fR column to report the status of BFD on this interface\[char46] When BFD is not enabled, with \fBbfd:enable\fR, the switch clears all key-value pairs from \fBbfd_status\fR\[char46]
.IP "\fBbfd_status : state\fR: optional string, one of \fBadmin_down\fR, \fBdown\fR, \fBinit\fR, or \fBup\fR"
Reports the state of the BFD session\[char46] The BFD session is fully healthy and negotiated if \fBUP\fR\[char46]
.IP "\fBbfd_status : forwarding\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Reports whether the BFD session believes this \fBInterface\fR may be used to forward traffic\[char46] Typically this means the local session is signaling \fBUP\fR, and the remote system isn\(cqt signaling a problem such as concatenated path down\[char46]
.IP "\fBbfd_status : diagnostic\fR: optional string"
A diagnostic code specifying the local system\(cqs reason for the last change in session state\[char46] The error messages are defined in section 4\[char46]1 of [RFC 5880]\[char46]
.IP "\fBbfd_status : remote_state\fR: optional string, one of \fBadmin_down\fR, \fBdown\fR, \fBinit\fR, or \fBup\fR"
Reports the state of the remote endpoint\(cqs BFD session\[char46]
.IP "\fBbfd_status : remote_diagnostic\fR: optional string"
A diagnostic code specifying the remote system\(cqs reason for the last change in session state\[char46] The error messages are defined in section 4\[char46]1 of [RFC 5880]\[char46]
.IP "\fBbfd_status : flap_count\fR: optional string, containing an integer, at least 0"
Counts the number of \fBbfd_status:forwarding\fR flaps since start\[char46] A flap is considered as a change of the \fBbfd_status:forwarding\fR value\[char46]
.ST "Connectivity Fault Management:"
.PP
.PP
.PP
802\[char46]1ag Connectivity Fault Management (CFM) allows a group of Maintenance Points (MPs) called a Maintenance Association (MA) to detect connectivity problems with each other\[char46] MPs within a MA should have complete and exclusive interconnectivity\[char46] This is verified by occasionally broadcasting Continuity Check Messages (CCMs) at a configurable transmission interval\[char46]
.PP
.PP
According to the 802\[char46]1ag specification, each Maintenance Point should be configured out-of-band with a list of Remote Maintenance Points it should have connectivity to\[char46] Open vSwitch differs from the specification in this area\[char46] It simply assumes the link is faulted if no Remote Maintenance Points are reachable, and considers it not faulted otherwise\[char46]
.PP
.PP
When operating over tunnels which have no \fBin_key\fR, or an \fBin_key\fR of \fBflow\fR\[char46] CFM will only accept CCMs with a tunnel key of zero\[char46]
.IP "\fBcfm_mpid\fR: optional integer"
A Maintenance Point ID (MPID) uniquely identifies each endpoint within a Maintenance Association\[char46] The MPID is used to identify this endpoint to other Maintenance Points in the MA\[char46] Each end of a link being monitored should have a different MPID\[char46] Must be configured to enable CFM on this \fBInterface\fR\[char46]
.IP
According to the 802\[char46]1ag specification, MPIDs can only range between [1, 8191]\[char46] However, extended mode (see \fBother_config:cfm_extended\fR) supports eight byte MPIDs\[char46]
.IP "\fBcfm_flap_count\fR: optional integer"
Counts the number of cfm fault flapps since boot\[char46] A flap is considered to be a change of the \fBcfm_fault\fR value\[char46]
.IP "\fBcfm_fault\fR: optional boolean"
Indicates a connectivity fault triggered by an inability to receive heartbeats from any remote endpoint\[char46] When a fault is triggered on \fBInterface\fRs participating in bonds, they will be disabled\[char46]
.IP
Faults can be triggered for several reasons\[char46] Most importantly they are triggered when no CCMs are received for a period of 3\[char46]5 times the transmission interval\[char46] Faults are also triggered when any CCMs indicate that a Remote Maintenance Point is not receiving CCMs but able to send them\[char46] Finally, a fault is triggered if a CCM is received which indicates unexpected configuration\[char46] Notably, this case arises when a CCM is received which advertises the local MPID\[char46]
.IP "\fBcfm_fault_status : recv\fR: none"
Indicates a CFM fault was triggered due to a lack of CCMs received on the \fBInterface\fR\[char46]
.IP "\fBcfm_fault_status : rdi\fR: none"
Indicates a CFM fault was triggered due to the reception of a CCM with the RDI bit flagged\[char46] Endpoints set the RDI bit in their CCMs when they are not receiving CCMs themselves\[char46] This typically indicates a unidirectional connectivity failure\[char46]
.IP "\fBcfm_fault_status : maid\fR: none"
Indicates a CFM fault was triggered due to the reception of a CCM with a MAID other than the one Open vSwitch uses\[char46] CFM broadcasts are tagged with an identification number in addition to the MPID called the MAID\[char46] Open vSwitch only supports receiving CCM broadcasts tagged with the MAID it uses internally\[char46]
.IP "\fBcfm_fault_status : loopback\fR: none"
Indicates a CFM fault was triggered due to the reception of a CCM advertising the same MPID configured in the \fBcfm_mpid\fR column of this \fBInterface\fR\[char46] This may indicate a loop in the network\[char46]
.IP "\fBcfm_fault_status : overflow\fR: none"
Indicates a CFM fault was triggered because the CFM module received CCMs from more remote endpoints than it can keep track of\[char46]
.IP "\fBcfm_fault_status : override\fR: none"
Indicates a CFM fault was manually triggered by an administrator using an \fBovs\-appctl\fR command\[char46]
.IP "\fBcfm_fault_status : interval\fR: none"
Indicates a CFM fault was triggered due to the reception of a CCM frame having an invalid interval\[char46]
.IP "\fBcfm_remote_opstate\fR: optional string, either \fBdown\fR or \fBup\fR"
When in extended mode, indicates the operational state of the remote endpoint as either \fBup\fR or \fBdown\fR\[char46] See \fBother_config:cfm_opstate\fR\[char46]
.IP "\fBcfm_health\fR: optional integer, in range 0 to 100"
Indicates the health of the interface as a percentage of CCM frames received over 21 \fBother_config:cfm_interval\fRs\[char46] The health of an interface is undefined if it is communicating with more than one \fBcfm_remote_mpids\fR\[char46] It reduces if healthy heartbeats are not received at the expected rate, and gradually improves as healthy heartbeats are received at the desired rate\[char46] Every 21 \fBother_config:cfm_interval\fRs, the health of the interface is refreshed\[char46]
.IP
As mentioned above, the faults can be triggered for several reasons\[char46] The link health will deteriorate even if heartbeats are received but they are reported to be unhealthy\[char46] An unhealthy heartbeat in this context is a heartbeat for which either some fault is set or is out of sequence\[char46] The interface health can be 100 only on receiving healthy heartbeats at the desired rate\[char46]
.IP "\fBcfm_remote_mpids\fR: set of integers"
When CFM is properly configured, Open vSwitch will occasionally receive CCM broadcasts\[char46] These broadcasts contain the MPID of the sending Maintenance Point\[char46] The list of MPIDs from which this \fBInterface\fR is receiving broadcasts from is regularly collected and written to this column\[char46]
.IP "\fBother_config : cfm_interval\fR: optional string, containing an integer"
The interval, in milliseconds, between transmissions of CFM heartbeats\[char46] Three missed heartbeat receptions indicate a connectivity fault\[char46]
.IP
In standard operation only intervals of 3, 10, 100, 1,000, 10,000, 60,000, or 600,000 ms are supported\[char46] Other values will be rounded down to the nearest value on the list\[char46] Extended mode (see \fBother_config:cfm_extended\fR) supports any interval up to 65,535 ms\[char46] In either mode, the default is 1000 ms\[char46]
.IP
We do not recommend using intervals less than 100 ms\[char46]
.IP "\fBother_config : cfm_extended\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
When \fBtrue\fR, the CFM module operates in extended mode\[char46] This causes it to use a nonstandard destination address to avoid conflicting with compliant implementations which may be running concurrently on the network\[char46] Furthermore, extended mode increases the accuracy of the \fBcfm_interval\fR configuration parameter by breaking wire compatibility with 802\[char46]1ag compliant implementations\[char46] And extended mode allows eight byte MPIDs\[char46] Defaults to \fBfalse\fR\[char46]
.IP "\fBother_config : cfm_demand\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
When \fBtrue\fR, and \fBother_config:cfm_extended\fR is true, the CFM module operates in demand mode\[char46] When in demand mode, traffic received on the \fBInterface\fR is used to indicate liveness\[char46] CCMs are still transmitted and received\[char46] At least one CCM must be received every 100 * \fBother_config:cfm_interval\fR amount of time\[char46] Otherwise, even if traffic are received, the CFM module will raise the connectivity fault\[char46]
.IP
Demand mode has a couple of caveats:
.RS
.IP \(bu
To ensure that ovs-vswitchd has enough time to pull statistics from the datapath, the fault detection interval is set to 3\[char46]5 * MAX(\fBother_config:cfm_interval\fR, 500) ms\[char46]
.IP \(bu
To avoid ambiguity, demand mode disables itself when there are multiple remote maintenance points\[char46]
.IP \(bu
If the \fBInterface\fR is heavily congested, CCMs containing the \fBother_config:cfm_opstate\fR status may be dropped causing changes in the operational state to be delayed\[char46] Similarly, if CCMs containing the RDI bit are not received, unidirectional link failures may not be detected\[char46]
.RE
.IP "\fBother_config : cfm_opstate\fR: optional string, either \fBdown\fR or \fBup\fR"
When \fBdown\fR, the CFM module marks all CCMs it generates as operationally down without triggering a fault\[char46] This allows remote maintenance points to choose not to forward traffic to the \fBInterface\fR on which this CFM module is running\[char46] Currently, in Open vSwitch, the opdown bit of CCMs affects \fBInterface\fRs participating in bonds, and the bundle OpenFlow action\[char46] This setting is ignored when CFM is not in extended mode\[char46] Defaults to \fBup\fR\[char46]
.IP "\fBother_config : cfm_ccm_vlan\fR: optional string, containing an integer, in range 1 to 4,095"
When set, the CFM module will apply a VLAN tag to all CCMs it generates with the given value\[char46] May be the string \fBrandom\fR in which case each CCM will be tagged with a different randomly generated VLAN\[char46]
.IP "\fBother_config : cfm_ccm_pcp\fR: optional string, containing an integer, in range 1 to 7"
When set, the CFM module will apply a VLAN tag to all CCMs it generates with the given PCP value, the VLAN ID of the tag is governed by the value of \fBother_config:cfm_ccm_vlan\fR\[char46] If \fBother_config:cfm_ccm_vlan\fR is unset, a VLAN ID of zero is used\[char46]
.ST "Bonding Configuration:"
.PP
.IP "\fBother_config : lacp-port-id\fR: optional string, containing an integer, in range 1 to 65,535"
The LACP port ID of this \fBInterface\fR\[char46] Port IDs are used in LACP negotiations to identify individual ports participating in a bond\[char46]
.IP "\fBother_config : lacp-port-priority\fR: optional string, containing an integer, in range 1 to 65,535"
The LACP port priority of this \fBInterface\fR\[char46] In LACP negotiations \fBInterface\fRs with numerically lower priorities are preferred for aggregation\[char46]
.IP "\fBother_config : lacp-aggregation-key\fR: optional string, containing an integer, in range 1 to 65,535"
The LACP aggregation key of this \fBInterface\fR\[char46] \fBInterface\fRs with different aggregation keys may not be active within a given \fBPort\fR at the same time\[char46]
.ST "Virtual Machine Identifiers:"
.PP
.PP
.PP
These key-value pairs specifically apply to an interface that represents a virtual Ethernet interface connected to a virtual machine\[char46] These key-value pairs should not be present for other types of interfaces\[char46] Keys whose names end in \fB\-uuid\fR have values that uniquely identify the entity in question\[char46]
.IP "\fBexternal_ids : attached-mac\fR: optional string"
The MAC address programmed into the ``virtual hardware\(cq\(cq for this interface, in the form \fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR\[char46]
.IP "\fBexternal_ids : iface-id\fR: optional string"
A system-unique identifier for the interface\[char46]
.IP "\fBexternal_ids : iface-status\fR: optional string, either \fBactive\fR or \fBinactive\fR"
Hypervisors may sometimes have more than one interface associated with a given \fBexternal_ids:iface-id\fR, only one of which is actually in use at a given time\[char46] For example, in some circumstances hypervisor may have both a ``tap\(cq\(cq and a ``vif\(cq\(cq interface for a single \fBexternal_ids:iface-id\fR, but only uses one of them at a time\[char46] A hypervisor that behaves this way must mark the currently in use interface \fBactive\fR and the others \fBinactive\fR\[char46] A hypervisor that never has more than one interface for a given \fBexternal_ids:iface-id\fR may mark that interface \fBactive\fR or omit \fBexternal_ids:iface-status\fR entirely\[char46]
.IP
During VM migration, a given \fBexternal_ids:iface-id\fR might transiently be marked \fBactive\fR on two different hypervisors\[char46] That is, \fBactive\fR means that this \fBexternal_ids:iface-id\fR is the active instance within a single hypervisor, not in a broader scope\[char46] There is one exception: some hypervisors support ``migration\(cq\(cq from a given hypervisor to itself (most often for test purposes)\[char46] During such a ``migration,\(cq\(cq two instances of a single \fBexternal_ids:iface-id\fR might both be briefly marked \fBactive\fR on a single hypervisor\[char46]
.IP "\fBexternal_ids : vm-id\fR: optional string"
The VM to which this interface belongs\[char46]
.ST "Auto Attach Configuration:"
.PP
.PP
.PP
Auto Attach configuration for a particular interface\[char46]
.IP "\fBlldp : enable\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True to enable LLDP on this \fBInterface\fR\[char46] If not specified, LLDP will be disabled by default\[char46]
.ST "Flow control Configuration:"
.PP
.PP
.PP
Ethernet flow control defined in IEEE 802\[char46]1Qbb provides link level flow control using MAC pause frames\[char46] Implemented only for interfaces with type \fBdpdk\fR\[char46]
.IP "\fBoptions : rx-flow-ctrl\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set to \fBtrue\fR to enable Rx flow control on physical ports\[char46] By default, Rx flow control is disabled\[char46]
.IP "\fBoptions : tx-flow-ctrl\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set to \fBtrue\fR to enable Tx flow control on physical ports\[char46] By default, Tx flow control is disabled\[char46]
.IP "\fBoptions : flow-ctrl-autoneg\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set to \fBtrue\fR to enable flow control auto negotiation on physical ports\[char46] By default, auto-neg is disabled\[char46]
.ST "Link State Change detection mode:"
.PP
.IP "\fBoptions : dpdk-lsc-interrupt\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set this value to \fBtrue\fR to configure interrupt mode for Link State Change (LSC) detection instead of poll mode for the DPDK interface\[char46]
.IP
If this value is not set, poll mode is configured\[char46]
.IP
This parameter has an effect only on netdev dpdk interfaces\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBother_config\fR: map of string-string pairs"
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Flow_Table TABLE"
.PP
.PP
.PP
Configuration for a particular OpenFlow table\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
optional string
.TQ .25in
\fIEviction Policy:\fR
.RS .25in
.TQ 2.75in
\fBflow_limit\fR
optional integer, at least 0
.TQ 2.75in
\fBoverflow_policy\fR
optional string, either \fBevict\fR or \fBrefuse\fR
.TQ 2.75in
\fBgroups\fR
set of strings
.RE
.TQ .25in
\fIClassifier Optimization:\fR
.RS .25in
.TQ 2.75in
\fBprefixes\fR
set of up to 3 strings
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: optional string"
The table\(cqs name\[char46] Set this column to change the name that controllers will receive when they request table statistics, e\[char46]g\[char46] \fBovs\-ofctl
dump\-tables\fR\[char46] The name does not affect switch behavior\[char46]
.ST "Eviction Policy:"
.PP
.PP
.PP
Open vSwitch supports limiting the number of flows that may be installed in a flow table, via the \fBflow_limit\fR column\[char46] When adding a flow would exceed this limit, by default Open vSwitch reports an error, but there are two ways to configure Open vSwitch to instead delete (``evict\(cq\(cq) a flow to make room for the new one:
.RS
.IP \(bu
Set the \fBoverflow_policy\fR column to \fBevict\fR\[char46]
.IP \(bu
Send an OpenFlow 1\[char46]4+ ``table mod request\(cq\(cq to enable eviction for the flow table (e\[char46]g\[char46] \fBovs\-ofctl \-O OpenFlow14 mod\-table br0 0
evict\fR to enable eviction on flow table 0 of bridge \fBbr0\fR)\[char46]
.RE
.PP
.PP
When a flow must be evicted due to overflow, the flow to evict is chosen through an approximation of the following algorithm\[char46] This algorithm is used regardless of how eviction was enabled:
.RS
.IP 1. .4in
Divide the flows in the table into groups based on the values of the fields or subfields specified in the \fBgroups\fR column, so that all of the flows in a given group have the same values for those fields\[char46] If a flow does not specify a given field, that field\(cqs value is treated as 0\[char46] If \fBgroups\fR is empty, then all of the flows in the flow table are treated as a single group\[char46]
.IP 2. .4in
Consider the flows in the largest group, that is, the group that contains the greatest number of flows\[char46] If two or more groups all have the same largest number of flows, consider the flows in all of those groups\[char46]
.IP 3. .4in
If the flows under consideration have different importance values, eliminate from consideration any flows except those with the lowest importance\[char46] (``Importance,\(cq\(cq a 16-bit integer value attached to each flow, was introduced in OpenFlow 1\[char46]4\[char46] Flows inserted with older versions of OpenFlow always have an importance of 0\[char46])
.IP 4. .4in
Among the flows under consideration, choose the flow that expires soonest for eviction\[char46]
.RE
.PP
.PP
The eviction process only considers flows that have an idle timeout or a hard timeout\[char46] That is, eviction never deletes permanent flows\[char46] (Permanent flows do count against \fBflow_limit\fR\[char46])
.IP "\fBflow_limit\fR: optional integer, at least 0"
If set, limits the number of flows that may be added to the table\[char46] Open vSwitch may limit the number of flows in a table for other reasons, e\[char46]g\[char46] due to hardware limitations or for resource availability or performance reasons\[char46]
.IP "\fBoverflow_policy\fR: optional string, either \fBevict\fR or \fBrefuse\fR"
Controls the switch\(cqs behavior when an OpenFlow flow table modification request would add flows in excess of \fBflow_limit\fR\[char46] The supported values are:
.RS
.TP
\fBrefuse\fR
Refuse to add the flow or flows\[char46] This is also the default policy when \fBoverflow_policy\fR is unset\[char46]
.TP
\fBevict\fR
Delete a flow chosen according to the algorithm described above\[char46]
.RE
.IP "\fBgroups\fR: set of strings"
When \fBoverflow_policy\fR is \fBevict\fR, this controls how flows are chosen for eviction when the flow table would otherwise exceed \fBflow_limit\fR flows\[char46] Its value is a set of NXM fields or sub-fields, each of which takes one of the forms \fB\fIfield\fB[]\fR or \fB\fIfield\fB[\fIstart\fB\[char46]\[char46]\fIend\fB]\fR, e\[char46]g\[char46] \fBNXM_OF_IN_PORT[]\fR\[char46] Please see \fBmeta\-flow\[char46]h\fR for a complete list of NXM field names\[char46]
.IP
Open vSwitch ignores any invalid or unknown field specifications\[char46]
.IP
When eviction is not enabled, via \fBoverflow_policy\fR or an OpenFlow 1\[char46]4+ ``table mod,\(cq\(cq this column has no effect\[char46]
.ST "Classifier Optimization:"
.PP
.IP "\fBprefixes\fR: set of up to 3 strings"
This string set specifies which fields should be used for address prefix tracking\[char46] Prefix tracking allows the classifier to skip rules with longer than necessary prefixes, resulting in better wildcarding for datapath flows\[char46]
.IP
Prefix tracking may be beneficial when a flow table contains matches on IP address fields with different prefix lengths\[char46] For example, when a flow table contains IP address matches on both full addresses and proper prefixes, the full address matches will typically cause the datapath flow to un-wildcard the whole address field (depending on flow entry priorities)\[char46] In this case each packet with a different address gets handed to the userspace for flow processing and generates its own datapath flow\[char46] With prefix tracking enabled for the address field in question packets with addresses matching shorter prefixes would generate datapath flows where the irrelevant address bits are wildcarded, allowing the same datapath flow to handle all the packets within the prefix in question\[char46] In this case many userspace upcalls can be avoided and the overall performance can be better\[char46]
.IP
This is a performance optimization only, so packets will receive the same treatment with or without prefix tracking\[char46]
.IP
The supported fields are: \fBtun_id\fR, \fBtun_src\fR, \fBtun_dst\fR, \fBtun_ipv6_src\fR, \fBtun_ipv6_dst\fR, \fBnw_src\fR, \fBnw_dst\fR (or aliases \fBip_src\fR and \fBip_dst\fR), \fBipv6_src\fR, and \fBipv6_dst\fR\[char46] (Using this feature for \fBtun_id\fR would only make sense if the tunnel IDs have prefix structure similar to IP addresses\[char46])
.IP
By default, the \fBprefixes=ip_dst,ip_src\fR are used on each flow table\[char46] This instructs the flow classifier to track the IP destination and source addresses used by the rules in this specific flow table\[char46]
.IP
The keyword \fBnone\fR is recognized as an explicit override of the default values, causing no prefix fields to be tracked\[char46]
.IP
To set the prefix fields, the flow table record needs to exist:
.RS
.TP
\fBovs\-vsctl set Bridge br0 flow_tables:0=@N1 \-\- \-\-id=@N1 create Flow_Table name=table0\fR
Creates a flow table record for the OpenFlow table number 0\[char46]
.TP
\fBovs\-vsctl set Flow_Table table0 prefixes=ip_dst,ip_src\fR
Enables prefix tracking for IP source and destination address fields\[char46]
.RE
.IP
There is a maximum number of fields that can be enabled for any one flow table\[char46] Currently this limit is 3\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "QoS TABLE"
.PP
.PP
.PP
Quality of Service (QoS) configuration for each Port that references it\[char46]
.SS "Summary:
.TQ 3.00in
\fBtype\fR
string
.TQ 3.00in
\fBqueues\fR
map of integer-\fBQueue\fR pairs, key in range 0 to 4,294,967,295
.TQ .25in
\fIConfiguration for linux-htb and linux-hfsc:\fR
.RS .25in
.TQ 2.75in
\fBother_config : max-rate\fR
optional string, containing an integer
.RE
.TQ .25in
\fIConfiguration for egress-policer QoS:\fR
.RS .25in
.TQ 2.75in
\fBother_config : cir\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : cbs\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : eir\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : ebs\fR
optional string, containing an integer
.RE
.TQ .25in
\fIConfiguration for linux-sfq:\fR
.RS .25in
.TQ 2.75in
\fBother_config : perturb\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : quantum\fR
optional string, containing an integer
.RE
.TQ .25in
\fIConfiguration for linux-netem:\fR
.RS .25in
.TQ 2.75in
\fBother_config : latency\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : limit\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : loss\fR
optional string, containing an integer
.TQ 2.75in
\fBother_config : jitter\fR
optional string, containing an integer
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBtype\fR: string"
The type of QoS to implement\[char46] The currently defined types are listed below:
.RS
.TP
\fBlinux\-htb\fR
Linux ``hierarchy token bucket\(cq\(cq classifier\[char46] See tc-htb(8) (also at \fBhttp://linux\[char46]die\[char46]net/man/8/tc\-htb\fR) and the HTB manual (\fBhttp://luxik\[char46]cdi\[char46]cz/~devik/qos/htb/manual/userg\[char46]htm\fR) for information on how this classifier works and how to configure it\[char46]
.TP
\fBlinux\-hfsc\fR
Linux \(dqHierarchical Fair Service Curve\(dq classifier\[char46] See \fBhttp://linux\-ip\[char46]net/articles/hfsc\[char46]en/\fR for information on how this classifier works\[char46]
.TP
\fBlinux\-sfq\fR
Linux ``Stochastic Fairness Queueing\(cq\(cq classifier\[char46] See \fBtc\-sfq\fR(8) (also at \fBhttp://linux\[char46]die\[char46]net/man/8/tc\-sfq\fR) for information on how this classifier works\[char46]
.TP
\fBlinux\-codel\fR
Linux ``Controlled Delay\(cq\(cq classifier\[char46] See \fBtc\-codel\fR(8) (also at \fBhttp://man7\[char46]org/linux/man\-pages/man8/tc\-codel\[char46]8\[char46]html\fR) for information on how this classifier works\[char46]
.TP
\fBlinux\-fq_codel\fR
Linux ``Fair Queuing with Controlled Delay\(cq\(cq classifier\[char46] See \fBtc\-fq_codel\fR(8) (also at \fBhttp://man7\[char46]org/linux/man\-pages/man8/tc\-fq_codel\[char46]8\[char46]html\fR) for information on how this classifier works\[char46]
.TP
\fBlinux\-netem\fR
Linux ``Network Emulator\(cq\(cq classifier\[char46] See \fBtc\-netem\fR(8) (also at \fBhttp://man7\[char46]org/linux/man\-pages/man8/tc\-netem\[char46]8\[char46]html\fR) for information on how this classifier works\[char46]
.TP
\fBlinux\-noop\fR
Linux ``No operation\[char46]\(cq\(cq By default, Open vSwitch manages quality of service on all of its configured ports\[char46] This can be helpful, but sometimes administrators prefer to use other software to manage QoS\[char46] This \fBtype\fR prevents Open vSwitch from changing the QoS configuration for a port\[char46]
.TP
\fBegress\-policer\fR
A DPDK egress policer algorithm using the DPDK rte_meter library\[char46] The rte_meter library provides an implementation which allows the metering and policing of traffic\[char46] The implementation in OVS essentially creates a single token bucket used to police traffic\[char46] It should be noted that when the rte_meter is configured as part of QoS there will be a performance overhead as the rte_meter itself will consume CPU cycles in order to police traffic\[char46] These CPU cycles ordinarily are used for packet proccessing\[char46] As such the drop in performance will be noticed in terms of overall aggregate traffic throughput\[char46]
.TP
\fBtrtcm\-policer\fR
A DPDK egress policer algorithm using RFC 4115\(cqs Two-Rate, Three-Color marker\[char46] It\(cqs a two-level hierarchical policer which first does a color-blind marking of the traffic at the queue level, followed by a color-aware marking at the port level\[char46] At the end traffic marked as Green or Yellow is forwarded, Red is dropped\[char46] For details on how traffic is marked, see RFC 4115\[char46] If the ``default queue\(cq\(cq, 0, is not configured it\(cqs automatically created with the same \fBother_config\fR values as the physical port\[char46]
.RE
.IP "\fBqueues\fR: map of integer-\fBQueue\fR pairs, key in range 0 to 4,294,967,295"
A map from queue numbers to \fBQueue\fR records\[char46] The supported range of queue numbers depend on \fBtype\fR\[char46] The queue numbers are the same as the \fBqueue_id\fR used in OpenFlow in \fBstruct ofp_action_enqueue\fR and other structures\[char46]
.IP
Queue 0 is the ``default queue\[char46]\(cq\(cq It is used by OpenFlow output actions when no specific queue has been set\[char46] When no configuration for queue 0 is present, it is automatically configured as if a \fBQueue\fR record with empty \fBdscp\fR and \fBother_config\fR columns had been specified\[char46] (Before version 1\[char46]6, Open vSwitch would leave queue 0 unconfigured in this case\[char46] With some queuing disciplines, this dropped all packets destined for the default queue\[char46])
.ST "Configuration for linux-htb and linux-hfsc:"
.PP
.PP
.PP
The \fBlinux\-htb\fR and \fBlinux\-hfsc\fR classes support the following key-value pair:
.IP "\fBother_config : max-rate\fR: optional string, containing an integer"
Maximum rate shared by all queued traffic, in bit/s\[char46] Optional\[char46] If not specified, for physical interfaces, the default is the link rate\[char46] For other interfaces or if the link rate cannot be determined, the default is currently 10 Gbps\[char46]
.ST "Configuration for egress-policer QoS:"
.PP
.PP
.PP
\fBQoS\fR \fBtype\fR \fBegress\-policer\fR provides egress policing for userspace port types with DPDK\[char46] It has the following key-value pairs defined\[char46]
.IP "\fBother_config : cir\fR: optional string, containing an integer"
The Committed Information Rate (CIR) is measured in bytes of IP packets per second, i\[char46]e\[char46] it includes the IP header, but not link specific (e\[char46]g\[char46] Ethernet) headers\[char46] This represents the bytes per second rate at which the token bucket will be updated\[char46] The cir value is calculated by (pps x packet data size)\[char46] For example assuming a user wishes to limit a stream consisting of 64 byte packets to 1 million packets per second the CIR would be set to to to 46000000\[char46] This value can be broken into \(cq1,000,000 x 46\(cq\[char46] Where 1,000,000 is the policing rate for the number of packets per second and 46 represents the size of the packet data for a 64 bytes IP packet without 14 bytes Ethernet and 4 bytes FCS header\[char46]
.IP "\fBother_config : cbs\fR: optional string, containing an integer"
The Committed Burst Size (CBS) is measured in bytes and represents a token bucket\[char46] At a minimum this value should be be set to the expected largest size packet in the traffic stream\[char46] In practice larger values may be used to increase the size of the token bucket\[char46] If a packet can be transmitted then the cbs will be decremented by the number of bytes/tokens of the packet\[char46] If there are not enough tokens in the cbs bucket the packet will be dropped\[char46]
.IP "\fBother_config : eir\fR: optional string, containing an integer"
The Excess Information Rate (EIR) is measured in bytes of IP packets per second, i\[char46]e\[char46] it includes the IP header, but not link specific (e\[char46]g\[char46] Ethernet) headers\[char46] This represents the bytes per second rate at which the token bucket will be updated\[char46] The eir value is calculated by (pps x packet data size)\[char46] For example assuming a user wishes to limit a stream consisting of 64 byte packets to 1 million packets per second the EIR would be set to to to 46000000\[char46] This value can be broken into \(cq1,000,000 x 46\(cq\[char46] Where 1,000,000 is the policing rate for the number of packets per second and 46 represents the size of the packet data for a 64 bytes IP packet without 14 bytes Ethernet and 4 bytes FCS header\[char46]
.IP "\fBother_config : ebs\fR: optional string, containing an integer"
The Excess Burst Size (EBS) is measured in bytes and represents a token bucket\[char46] At a minimum this value should be be set to the expected largest size packet in the traffic stream\[char46] In practice larger values may be used to increase the size of the token bucket\[char46] If a packet can be transmitted then the ebs will be decremented by the number of bytes/tokens of the packet\[char46] If there are not enough tokens in the cbs bucket the packet might be dropped\[char46]
.ST "Configuration for linux-sfq:"
.PP
.PP
.PP
The \fBlinux\-sfq\fR QoS supports the following key-value pairs:
.IP "\fBother_config : perturb\fR: optional string, containing an integer"
Number of seconds between consecutive perturbations in hashing algorithm\[char46] Different flows can end up in the same hash bucket causing unfairness\[char46] Perturbation\(cqs goal is to remove possible unfairness\[char46] The default and recommended value is 10\[char46] Too low a value is discouraged because each perturbation can cause packet reordering\[char46]
.IP "\fBother_config : quantum\fR: optional string, containing an integer"
Number of bytes \fBlinux\-sfq\fR QoS can dequeue in one turn in round-robin from one flow\[char46] The default and recommended value is equal to interface\(cqs MTU\[char46]
.ST "Configuration for linux-netem:"
.PP
.PP
.PP
The \fBlinux\-netem\fR QoS supports the following key-value pairs:
.IP "\fBother_config : latency\fR: optional string, containing an integer"
Adds the chosen delay to the packets outgoing to chosen network interface\[char46] The latency value expressed in us\[char46]
.IP "\fBother_config : limit\fR: optional string, containing an integer"
Maximum number of packets the qdisc may hold queued at a time\[char46] The default value is 1000\[char46]
.IP "\fBother_config : loss\fR: optional string, containing an integer"
Adds an independent loss probability to the packets outgoing from the chosen network interface\[char46]
.IP "\fBother_config : jitter\fR: optional string, containing an integer"
Adds the provided jitter to the latency outgoing to the chosen network interface\[char46] The jitter value expressed in us\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBother_config\fR: map of string-string pairs"
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Queue TABLE"
.PP
.PP
.PP
A configuration for a port output queue, used in configuring Quality of Service (QoS) features\[char46] May be referenced by \fBqueues\fR column in \fBQoS\fR table\[char46]
.SS "Summary:
.TQ 3.00in
\fBdscp\fR
optional integer, in range 0 to 63
.TQ .25in
\fIConfiguration for linux-htb QoS:\fR
.RS .25in
.TQ 2.75in
\fBother_config : min-rate\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : max-rate\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : burst\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : priority\fR
optional string, containing an integer, in range 0 to 4,294,967,295
.RE
.TQ .25in
\fIConfiguration for linux-hfsc QoS:\fR
.RS .25in
.TQ 2.75in
\fBother_config : min-rate\fR
optional string, containing an integer, at least 1
.TQ 2.75in
\fBother_config : max-rate\fR
optional string, containing an integer, at least 1
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBdscp\fR: optional integer, in range 0 to 63"
If set, Open vSwitch will mark all traffic egressing this \fBQueue\fR with the given DSCP bits\[char46] Traffic egressing the default \fBQueue\fR is only marked if it was explicitly selected as the \fBQueue\fR at the time the packet was output\[char46] If unset, the DSCP bits of traffic egressing this \fBQueue\fR will remain unchanged\[char46]
.ST "Configuration for linux-htb QoS:"
.PP
.PP
.PP
\fBQoS\fR \fBtype\fR \fBlinux\-htb\fR may use \fBqueue_id\fRs less than 61440\[char46] It has the following key-value pairs defined\[char46]
.IP "\fBother_config : min-rate\fR: optional string, containing an integer, at least 1"
Minimum guaranteed bandwidth, in bit/s\[char46]
.IP "\fBother_config : max-rate\fR: optional string, containing an integer, at least 1"
Maximum allowed bandwidth, in bit/s\[char46] Optional\[char46] If specified, the queue\(cqs rate will not be allowed to exceed the specified value, even if excess bandwidth is available\[char46] If unspecified, defaults to no limit\[char46]
.IP "\fBother_config : burst\fR: optional string, containing an integer, at least 1"
Burst size, in bits\[char46] This is the maximum amount of ``credits\(cq\(cq that a queue can accumulate while it is idle\[char46] Optional\[char46] Details of the \fBlinux\-htb\fR implementation require a minimum burst size, so a too-small \fBburst\fR will be silently ignored\[char46]
.IP "\fBother_config : priority\fR: optional string, containing an integer, in range 0 to 4,294,967,295"
A queue with a smaller \fBpriority\fR will receive all the excess bandwidth that it can use before a queue with a larger value receives any\[char46] Specific priority values are unimportant; only relative ordering matters\[char46] Defaults to 0 if unspecified\[char46]
.ST "Configuration for linux-hfsc QoS:"
.PP
.PP
.PP
\fBQoS\fR \fBtype\fR \fBlinux\-hfsc\fR may use \fBqueue_id\fRs less than 61440\[char46] It has the following key-value pairs defined\[char46]
.IP "\fBother_config : min-rate\fR: optional string, containing an integer, at least 1"
Minimum guaranteed bandwidth, in bit/s\[char46]
.IP "\fBother_config : max-rate\fR: optional string, containing an integer, at least 1"
Maximum allowed bandwidth, in bit/s\[char46] Optional\[char46] If specified, the queue\(cqs rate will not be allowed to exceed the specified value, even if excess bandwidth is available\[char46] If unspecified, defaults to no limit\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBother_config\fR: map of string-string pairs"
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Mirror TABLE"
.PP
.PP
.PP
A port mirror within a \fBBridge\fR\[char46]
.PP
.PP
A port mirror configures a bridge to send selected frames to special ``mirrored\(cq\(cq ports, in addition to their normal destinations\[char46] Mirroring traffic may also be referred to as SPAN or RSPAN, depending on how the mirrored traffic is sent\[char46]
.PP
.PP
When a packet enters an Open vSwitch bridge, it becomes eligible for mirroring based on its ingress port and VLAN\[char46] As the packet travels through the flow tables, each time it is output to a port, it becomes eligible for mirroring based on the egress port and VLAN\[char46] In Open vSwitch 2\[char46]5 and later, mirroring occurs just after a packet first becomes eligible, using the packet as it exists at that point; in Open vSwitch 2\[char46]4 and earlier, mirroring occurs only after a packet has traversed all the flow tables, using the original packet as it entered the bridge\[char46] This makes a difference only when the flow table modifies the packet: in Open vSwitch 2\[char46]4, the modifications are never visible to mirrors, whereas in Open vSwitch 2\[char46]5 and later modifications made before the first output that makes it eligible for mirroring to a particular destination are visible\[char46]
.PP
.PP
A packet that enters an Open vSwitch bridge is mirrored to a particular destination only once, even if it is eligible for multiple reasons\[char46] For example, a packet would be mirrored to a particular \fBoutput_port\fR only once, even if it is selected for mirroring to that port by \fBselect_dst_port\fR and \fBselect_src_port\fR in the same or different \fBMirror\fR records\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string
.TQ .25in
\fISelecting Packets for Mirroring:\fR
.RS .25in
.TQ 2.75in
\fBselect_all\fR
boolean
.TQ 2.75in
\fBselect_dst_port\fR
set of weak reference to \fBPort\fRs
.TQ 2.75in
\fBselect_src_port\fR
set of weak reference to \fBPort\fRs
.TQ 2.75in
\fBselect_vlan\fR
set of up to 4,096 integers, in range 0 to 4,095
.RE
.TQ .25in
\fIMirroring Destination Configuration:\fR
.RS .25in
.TQ 2.75in
\fBoutput_port\fR
optional weak reference to \fBPort\fR
.TQ 2.75in
\fBoutput_vlan\fR
optional integer, in range 1 to 4,095
.TQ 2.75in
\fBsnaplen\fR
optional integer, in range 14 to 65,535
.RE
.TQ .25in
\fIStatistics: Mirror counters:\fR
.RS .25in
.TQ 2.75in
\fBstatistics : tx_packets\fR
optional integer
.TQ 2.75in
\fBstatistics : tx_bytes\fR
optional integer
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: string"
Arbitrary identifier for the \fBMirror\fR\[char46]
.ST "Selecting Packets for Mirroring:"
.PP
.PP
.PP
To be selected for mirroring, a given packet must enter or leave the bridge through a selected port and it must also be in one of the selected VLANs\[char46]
.IP "\fBselect_all\fR: boolean"
If true, every packet arriving or departing on any port is selected for mirroring\[char46]
.IP "\fBselect_dst_port\fR: set of weak reference to \fBPort\fRs"
Ports on which departing packets are selected for mirroring\[char46]
.IP "\fBselect_src_port\fR: set of weak reference to \fBPort\fRs"
Ports on which arriving packets are selected for mirroring\[char46]
.IP "\fBselect_vlan\fR: set of up to 4,096 integers, in range 0 to 4,095"
VLANs on which packets are selected for mirroring\[char46] An empty set selects packets on all VLANs\[char46]
.ST "Mirroring Destination Configuration:"
.PP
.PP
.PP
These columns are mutually exclusive\[char46] Exactly one of them must be nonempty\[char46]
.IP "\fBoutput_port\fR: optional weak reference to \fBPort\fR"
Output port for selected packets, if nonempty\[char46]
.IP
Specifying a port for mirror output reserves that port exclusively for mirroring\[char46] No frames other than those selected for mirroring via this column will be forwarded to the port, and any frames received on the port will be discarded\[char46]
.IP
The output port may be any kind of port supported by Open vSwitch\[char46] It may be, for example, a physical port (sometimes called SPAN) or a GRE tunnel\[char46]
.IP "\fBoutput_vlan\fR: optional integer, in range 1 to 4,095"
Output VLAN for selected packets, if nonempty\[char46]
.IP
The frames will be sent out all ports that trunk \fBoutput_vlan\fR, as well as any ports with implicit VLAN \fBoutput_vlan\fR\[char46] When a mirrored frame is sent out a trunk port, the frame\(cqs VLAN tag will be set to \fBoutput_vlan\fR, replacing any existing tag; when it is sent out an implicit VLAN port, the frame will not be tagged\[char46] This type of mirroring is sometimes called RSPAN\[char46]
.IP
See the documentation for \fBother_config:forward-bpdu\fR in the \fBInterface\fR table for a list of destination MAC addresses which will not be mirrored to a VLAN to avoid confusing switches that interpret the protocols that they represent\[char46]
.IP
\fBPlease note:\fR Mirroring to a VLAN can disrupt a network that contains unmanaged switches\[char46] Consider an unmanaged physical switch with two ports: port 1, connected to an end host, and port 2, connected to an Open vSwitch configured to mirror received packets into VLAN 123 on port 2\[char46] Suppose that the end host sends a packet on port 1 that the physical switch forwards to port 2\[char46] The Open vSwitch forwards this packet to its destination and then reflects it back on port 2 in VLAN 123\[char46] This reflected packet causes the unmanaged physical switch to replace the MAC learning table entry, which correctly pointed to port 1, with one that incorrectly points to port 2\[char46] Afterward, the physical switch will direct packets destined for the end host to the Open vSwitch on port 2, instead of to the end host on port 1, disrupting connectivity\[char46] If mirroring to a VLAN is desired in this scenario, then the physical switch must be replaced by one that learns Ethernet addresses on a per-VLAN basis\[char46] In addition, learning should be disabled on the VLAN containing mirrored traffic\[char46] If this is not done then intermediate switches will learn the MAC address of each end host from the mirrored traffic\[char46] If packets being sent to that end host are also mirrored, then they will be dropped since the switch will attempt to send them out the input port\[char46] Disabling learning for the VLAN will cause the switch to correctly send the packet out all ports configured for that VLAN\[char46] If Open vSwitch is being used as an intermediate switch, learning can be disabled by adding the mirrored VLAN to \fBflood_vlans\fR in the appropriate \fBBridge\fR table or tables\[char46]
.IP
Mirroring to a GRE tunnel has fewer caveats than mirroring to a VLAN and should generally be preferred\[char46]
.IP "\fBsnaplen\fR: optional integer, in range 14 to 65,535"
Maximum per-packet number of bytes to mirror\[char46]
.IP
A mirrored packet with size larger than \fBsnaplen\fR will be truncated in datapath to \fBsnaplen\fR bytes before sending to the mirror output port\[char46] If omitted, packets are not truncated\[char46]
.ST "Statistics: Mirror counters:"
.PP
.PP
.PP
Key-value pairs that report mirror statistics\[char46] The update period is controlled by \fBother_config:stats-update-interval\fR in the \fBOpen_vSwitch\fR table\[char46]
.IP "\fBstatistics : tx_packets\fR: optional integer"
Number of packets transmitted through this mirror\[char46]
.IP "\fBstatistics : tx_bytes\fR: optional integer"
Number of bytes transmitted through this mirror\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Controller TABLE"
.PP
.PP
.PP
An OpenFlow controller\[char46]
.SS "Summary:
.TQ .25in
\fICore Features:\fR
.RS .25in
.TQ 2.75in
\fBtype\fR
optional string, either \fBprimary\fR or \fBservice\fR
.TQ 2.75in
\fBtarget\fR
string
.TQ 2.75in
\fBconnection_mode\fR
optional string, either \fBin\-band\fR or \fBout\-of\-band\fR
.RE
.TQ .25in
\fIController Failure Detection and Handling:\fR
.RS .25in
.TQ 2.75in
\fBmax_backoff\fR
optional integer, at least 1,000
.TQ 2.75in
\fBinactivity_probe\fR
optional integer
.RE
.TQ .25in
\fIAsynchronous Messages:\fR
.RS .25in
.TQ 2.75in
\fBenable_async_messages\fR
optional boolean
.TQ .25in
\fIController Rate Limiting:\fR
.RS .25in
.TQ 2.50in
\fBcontroller_queue_size\fR
optional integer, in range 1 to 512
.TQ 2.50in
\fBcontroller_rate_limit\fR
optional integer, at least 100
.TQ 2.50in
\fBcontroller_burst_limit\fR
optional integer, at least 25
.TQ .25in
\fIController Rate Limiting Statistics:\fR
.RS .25in
.TQ 2.25in
\fBstatus : packet-in-TYPE-bypassed\fR
optional string, containing an integer, at least 0
.TQ 2.25in
\fBstatus : packet-in-TYPE-queued\fR
optional string, containing an integer, at least 0
.TQ 2.25in
\fBstatus : packet-in-TYPE-dropped\fR
optional string, containing an integer, at least 0
.TQ 2.25in
\fBstatus : packet-in-TYPE-backlog\fR
optional string, containing an integer, at least 0
.RE
.RE
.RE
.TQ .25in
\fIAdditional In-Band Configuration:\fR
.RS .25in
.TQ 2.75in
\fBlocal_ip\fR
optional string
.TQ 2.75in
\fBlocal_netmask\fR
optional string
.TQ 2.75in
\fBlocal_gateway\fR
optional string
.RE
.TQ .25in
\fIController Status:\fR
.RS .25in
.TQ 2.75in
\fBis_connected\fR
boolean
.TQ 2.75in
\fBrole\fR
optional string, one of \fBmaster\fR, \fBother\fR, or \fBslave\fR
.TQ 2.75in
\fBstatus : last_error\fR
optional string
.TQ 2.75in
\fBstatus : state\fR
optional string, one of \fBACTIVE\fR, \fBBACKOFF\fR, \fBCONNECTING\fR, \fBIDLE\fR, or \fBVOID\fR
.TQ 2.75in
\fBstatus : sec_since_connect\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBstatus : sec_since_disconnect\fR
optional string, containing an integer, at least 1
.RE
.TQ .25in
\fIConnection Parameters:\fR
.RS .25in
.TQ 2.75in
\fBother_config : dscp\fR
optional string, containing an integer
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.RE
.SS "Details:
.ST "Core Features:"
.PP
.IP "\fBtype\fR: optional string, either \fBprimary\fR or \fBservice\fR"
Open vSwitch supports two kinds of OpenFlow controllers\[char46] A bridge may have any number of each kind:
.RS
.TP
Primary controllers
This is the kind of controller envisioned by the OpenFlow specifications\[char46] Usually, a primary controller implements a network policy by taking charge of the switch\(cqs flow table\[char46]
.IP
The \fBfail_mode\fR column in the \fBBridge\fR table applies to primary controllers\[char46]
.IP
When multiple primary controllers are configured, Open vSwitch connects to all of them simultaneously\[char46] OpenFlow provides few facilities to allow multiple controllers to coordinate in interacting with a single switch, so more than one primary controller should be specified only if the controllers are themselves designed to coordinate with each other\[char46]
.TP
Service controllers
These kinds of OpenFlow controller connections are intended for occasional support and maintenance use, e\[char46]g\[char46] with \fBovs\-ofctl\fR\[char46] Usually a service controller connects only briefly to inspect or modify some of a switch\(cqs state\[char46]
.IP
The \fBfail_mode\fR column in the \fBBridge\fR table does not apply to service controllers\[char46]
.RE
.IP
By default, Open vSwitch treats controllers with active connection methods as primary controllers and those with passive connection methods as service controllers\[char46] Set this column to the desired type to override this default\[char46]
.IP "\fBtarget\fR: string"
Connection method for controller\[char46]
.IP
The following active connection methods are currently supported:
.RS
.TP
\fBssl:\fIhost\fB\fR[\fB:\fIport\fB\fR]
The specified SSL \fIport\fR on the host at the given \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address\[char46] The \fBssl\fR column in the \fBOpen_vSwitch\fR table must point to a valid SSL configuration when this form is used\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6653\[char46]
.IP
SSL support is an optional feature that is not always built as part of Open vSwitch\[char46]
.TP
\fBtcp:\fIhost\fB\fR[\fB:\fIport\fB\fR]
The specified TCP \fIport\fR on the host at the given \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address (IPv4 or IPv6)\[char46] If \fIhost\fR is an IPv6 address, wrap it in square brackets, e\[char46]g\[char46] \fBtcp:[::1]:6653\fR\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6653\[char46]
.RE
.IP
The following passive connection methods are currently supported:
.RS
.TP
\fBpssl:\fR[\fIport\fR][\fB:\fIhost\fB\fR]
Listens for SSL connections on the specified TCP \fIport\fR\[char46] If \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address, is specified, then connections are restricted to the resolved or specified local IP address (either IPv4 or IPv6)\[char46] If \fIhost\fR is an IPv6 address, wrap it in square brackets, e\[char46]g\[char46] \fBpssl:6653:[::1]\fR\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6653\[char46] If \fIhost\fR is not specified then it listens only on IPv4 (but not IPv6) addresses\[char46] The \fBssl\fR column in the \fBOpen_vSwitch\fR table must point to a valid SSL configuration when this form is used\[char46]
.IP
If \fIport\fR is not specified, it currently to 6653\[char46]
.IP
SSL support is an optional feature that is not always built as part of Open vSwitch\[char46]
.TP
\fBptcp:\fR[\fIport\fR][\fB:\fIhost\fB\fR]
Listens for connections on the specified TCP \fIport\fR\[char46] If \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address, is specified, then connections are restricted to the resolved or specified local IP address (either IPv4 or IPv6)\[char46] If \fIhost\fR is an IPv6 address, wrap it in square brackets, e\[char46]g\[char46] \fBptcp:6653:[::1]\fR\[char46] If \fIhost\fR is not specified then it listens only on IPv4 addresses\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6653\[char46]
.RE
.IP
When multiple controllers are configured for a single bridge, the \fBtarget\fR values must be unique\[char46] Duplicate \fBtarget\fR values yield unspecified results\[char46]
.IP "\fBconnection_mode\fR: optional string, either \fBin\-band\fR or \fBout\-of\-band\fR"
If it is specified, this setting must be one of the following strings that describes how Open vSwitch contacts this OpenFlow controller over the network:
.RS
.TP
\fBin\-band\fR
In this mode, this controller\(cqs OpenFlow traffic travels over the bridge associated with the controller\[char46] With this setting, Open vSwitch allows traffic to and from the controller regardless of the contents of the OpenFlow flow table\[char46] (Otherwise, Open vSwitch would never be able to connect to the controller, because it did not have a flow to enable it\[char46]) This is the most common connection mode because it is not necessary to maintain two independent networks\[char46]
.TP
\fBout\-of\-band\fR
In this mode, OpenFlow traffic uses a control network separate from the bridge associated with this controller, that is, the bridge does not use any of its own network devices to communicate with the controller\[char46] The control network must be configured separately, before or after \fBovs\-vswitchd\fR is started\[char46]
.RE
.IP
If not specified, the default is implementation-specific\[char46]
.ST "Controller Failure Detection and Handling:"
.PP
.IP "\fBmax_backoff\fR: optional integer, at least 1,000"
Maximum number of milliseconds to wait between connection attempts\[char46] Default is implementation-specific\[char46]
.IP "\fBinactivity_probe\fR: optional integer"
Maximum number of milliseconds of idle time on connection to controller before sending an inactivity probe message\[char46] If Open vSwitch does not communicate with the controller for the specified number of seconds, it will send a probe\[char46] If a response is not received for the same additional amount of time, Open vSwitch assumes the connection has been broken and attempts to reconnect\[char46] Default is implementation-specific\[char46] A value of 0 disables inactivity probes\[char46]
.ST "Asynchronous Messages:"
.PP
.PP
.PP
OpenFlow switches send certain messages to controllers spontanenously, that is, not in response to any request from the controller\[char46] These messages are called ``asynchronous messages\[char46]\(cq\(cq These columns allow asynchronous messages to be limited or disabled to ensure the best use of network resources\[char46]
.IP "\fBenable_async_messages\fR: optional boolean"
The OpenFlow protocol enables asynchronous messages at time of connection establishment, which means that a controller can receive asynchronous messages, potentially many of them, even if it turns them off immediately after connecting\[char46] Set this column to \fBfalse\fR to change Open vSwitch behavior to disable, by default, all asynchronous messages\[char46] The controller can use the \fBNXT_SET_ASYNC_CONFIG\fR Nicira extension to OpenFlow to turn on any messages that it does want to receive, if any\[char46]
.ST "Controller Rate Limiting:"
.PP
.PP
.PP
A switch can forward packets to a controller over the OpenFlow protocol\[char46] Forwarding packets this way at too high a rate can overwhelm a controller, frustrate use of the OpenFlow connection for other purposes, increase the latency of flow setup, and use an unreasonable amount of bandwidth\[char46] Therefore, Open vSwitch supports limiting the rate of packet forwarding to a controller\[char46]
.PP
.PP
There are two main reasons in OpenFlow for a packet to be sent to a controller: either the packet ``misses\(cq\(cq in the flow table, that is, there is no matching flow, or a flow table action says to send the packet to the controller\[char46] Open vSwitch limits the rate of each kind of packet separately at the configured rate\[char46] Therefore, the actual rate that packets are sent to the controller can be up to twice the configured rate, when packets are sent for both reasons\[char46]
.PP
.PP
This feature is specific to forwarding packets over an OpenFlow connection\[char46] It is not general-purpose QoS\[char46] See the \fBQoS\fR table for quality of service configuration, and \fBingress_policing_rate\fR in the \fBInterface\fR table for ingress policing configuration\[char46]
.IP "\fBcontroller_queue_size\fR: optional integer, in range 1 to 512"
This sets the maximum size of the queue of packets that need to be sent to this OpenFlow controller\[char46] The value must be less than 512\[char46] If not specified the queue size is limited to the value set for the management controller in \fBother_config:controller-queue-size\fR if present or 100 packets by default\[char46] Note: increasing the queue size might have a negative impact on latency\[char46]
.IP "\fBcontroller_rate_limit\fR: optional integer, at least 100"
The maximum rate at which the switch will forward packets to the OpenFlow controller, in packets per second\[char46] If no value is specified, rate limiting is disabled\[char46]
.IP "\fBcontroller_burst_limit\fR: optional integer, at least 25"
When a high rate triggers rate-limiting, Open vSwitch queues packets to the controller for each port and transmits them to the controller at the configured rate\[char46] This value limits the number of queued packets\[char46] Ports on a bridge share the packet queue fairly\[char46]
.IP
This value has no effect unless \fBcontroller_rate_limit\fR is configured\[char46] The current default when this value is not specified is one-quarter of \fBcontroller_rate_limit\fR, meaning that queuing can delay forwarding a packet to the controller by up to 250 ms\[char46]
.ST "Controller Rate Limiting Statistics:"
.PP
.PP
.PP
These values report the effects of rate limiting\[char46] Their values are relative to establishment of the most recent OpenFlow connection, or since rate limiting was enabled, whichever happened more recently\[char46] Each consists of two values, one with \fBTYPE\fR replaced by \fBmiss\fR for rate limiting flow table misses, and the other with \fBTYPE\fR replaced by \fBaction\fR for rate limiting packets sent by OpenFlow actions\[char46]
.PP
.PP
These statistics are reported only when controller rate limiting is enabled\[char46]
.IP "\fBstatus : packet-in-TYPE-bypassed\fR: optional string, containing an integer, at least 0"
Number of packets sent directly to the controller, without queuing, because the rate did not exceed the configured maximum\[char46]
.IP "\fBstatus : packet-in-TYPE-queued\fR: optional string, containing an integer, at least 0"
Number of packets added to the queue to send later\[char46]
.IP "\fBstatus : packet-in-TYPE-dropped\fR: optional string, containing an integer, at least 0"
Number of packets added to the queue that were later dropped due to overflow\[char46] This value is less than or equal to \fBstatus:packet-in-TYPE-queued\fR\[char46]
.IP "\fBstatus : packet-in-TYPE-backlog\fR: optional string, containing an integer, at least 0"
Number of packets currently queued\[char46] The other statistics increase monotonically, but this one fluctuates between 0 and the \fBcontroller_burst_limit\fR as conditions change\[char46]
.ST "Additional In-Band Configuration:"
.PP
.PP
.PP
These values are considered only in in-band control mode (see \fBconnection_mode\fR)\[char46]
.PP
.PP
When multiple controllers are configured on a single bridge, there should be only one set of unique values in these columns\[char46] If different values are set for these columns in different controllers, the effect is unspecified\[char46]
.IP "\fBlocal_ip\fR: optional string"
The IP address to configure on the local port, e\[char46]g\[char46] \fB192\[char46]168\[char46]0\[char46]123\fR\[char46] If this value is unset, then \fBlocal_netmask\fR and \fBlocal_gateway\fR are ignored\[char46]
.IP "\fBlocal_netmask\fR: optional string"
The IP netmask to configure on the local port, e\[char46]g\[char46] \fB255\[char46]255\[char46]255\[char46]0\fR\[char46] If \fBlocal_ip\fR is set but this value is unset, then the default is chosen based on whether the IP address is class A, B, or C\[char46]
.IP "\fBlocal_gateway\fR: optional string"
The IP address of the gateway to configure on the local port, as a string, e\[char46]g\[char46] \fB192\[char46]168\[char46]0\[char46]1\fR\[char46] Leave this column unset if this network has no gateway\[char46]
.ST "Controller Status:"
.PP
.IP "\fBis_connected\fR: boolean"
\fBtrue\fR if currently connected to this controller, \fBfalse\fR otherwise\[char46]
.IP "\fBrole\fR: optional string, one of \fBmaster\fR, \fBother\fR, or \fBslave\fR"
The level of authority this controller has on the associated bridge\[char46] Possible values are:
.RS
.TP
\fBother\fR
Allows the controller access to all OpenFlow features\[char46]
.TP
\fBmaster\fR
Equivalent to \fBother\fR, except that there may be at most one such controller at a time\[char46] If a given controller promotes itself to this role, \fBovs\-vswitchd\fR demotes any existing controller with the role to \fBslave\fR\[char46]
.TP
\fBslave\fR
Allows the controller read-only access to OpenFlow features\[char46] Attempts to modify the flow table will be rejected with an error\[char46] Such controllers do not receive OFPT_PACKET_IN or OFPT_FLOW_REMOVED messages, but they do receive OFPT_PORT_STATUS messages\[char46]
.RE
.IP "\fBstatus : last_error\fR: optional string"
A human-readable description of the last error on the connection to the controller; i\[char46]e\[char46] \fBstrerror(errno)\fR\[char46] This key will exist only if an error has occurred\[char46]
.IP "\fBstatus : state\fR: optional string, one of \fBACTIVE\fR, \fBBACKOFF\fR, \fBCONNECTING\fR, \fBIDLE\fR, or \fBVOID\fR"
The state of the connection to the controller:
.RS
.TP
\fBVOID\fR
Connection is disabled\[char46]
.TP
\fBBACKOFF\fR
Attempting to reconnect at an increasing period\[char46]
.TP
\fBCONNECTING\fR
Attempting to connect\[char46]
.TP
\fBACTIVE\fR
Connected, remote host responsive\[char46]
.TP
\fBIDLE\fR
Connection is idle\[char46] Waiting for response to keep-alive\[char46]
.RE
.IP
These values may change in the future\[char46] They are provided only for human consumption\[char46]
.IP "\fBstatus : sec_since_connect\fR: optional string, containing an integer, at least 0"
The amount of time since this controller last successfully connected to the switch (in seconds)\[char46] Value is empty if controller has never successfully connected\[char46]
.IP "\fBstatus : sec_since_disconnect\fR: optional string, containing an integer, at least 1"
The amount of time since this controller last disconnected from the switch (in seconds)\[char46] Value is empty if controller has never disconnected\[char46]
.ST "Connection Parameters:"
.PP
.PP
.PP
Additional configuration for a connection between the controller and the Open vSwitch\[char46]
.IP "\fBother_config : dscp\fR: optional string, containing an integer"
The Differentiated Service Code Point (DSCP) is specified using 6 bits in the Type of Service (TOS) field in the IP header\[char46] DSCP provides a mechanism to classify the network traffic and provide Quality of Service (QoS) on IP networks\[char46] The DSCP value specified here is used when establishing the connection between the controller and the Open vSwitch\[char46] If no value is specified, a default value of 48 is chosen\[char46] Valid DSCP values must be in the range 0 to 63\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.IP "\fBother_config\fR: map of string-string pairs"
.bp
.SH "Manager TABLE"
.PP
.PP
.PP
Configuration for a database connection to an Open vSwitch database (OVSDB) client\[char46]
.PP
.PP
This table primarily configures the Open vSwitch database (\fBovsdb\-server\fR), not the Open vSwitch switch (\fBovs\-vswitchd\fR)\[char46] The switch does read the table to determine what connections should be treated as in-band\[char46]
.PP
.PP
The Open vSwitch database server can initiate and maintain active connections to remote clients\[char46] It can also listen for database connections\[char46]
.SS "Summary:
.TQ .25in
\fICore Features:\fR
.RS .25in
.TQ 2.75in
\fBtarget\fR
string (must be unique within table)
.TQ 2.75in
\fBconnection_mode\fR
optional string, either \fBin\-band\fR or \fBout\-of\-band\fR
.RE
.TQ .25in
\fIClient Failure Detection and Handling:\fR
.RS .25in
.TQ 2.75in
\fBmax_backoff\fR
optional integer, at least 1,000
.TQ 2.75in
\fBinactivity_probe\fR
optional integer
.RE
.TQ .25in
\fIStatus:\fR
.RS .25in
.TQ 2.75in
\fBis_connected\fR
boolean
.TQ 2.75in
\fBstatus : last_error\fR
optional string
.TQ 2.75in
\fBstatus : state\fR
optional string, one of \fBACTIVE\fR, \fBBACKOFF\fR, \fBCONNECTING\fR, \fBIDLE\fR, or \fBVOID\fR
.TQ 2.75in
\fBstatus : sec_since_connect\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBstatus : sec_since_disconnect\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBstatus : locks_held\fR
optional string
.TQ 2.75in
\fBstatus : locks_waiting\fR
optional string
.TQ 2.75in
\fBstatus : locks_lost\fR
optional string
.TQ 2.75in
\fBstatus : n_connections\fR
optional string, containing an integer, at least 2
.TQ 2.75in
\fBstatus : bound_port\fR
optional string, containing an integer
.RE
.TQ .25in
\fIConnection Parameters:\fR
.RS .25in
.TQ 2.75in
\fBother_config : dscp\fR
optional string, containing an integer
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.RE
.SS "Details:
.ST "Core Features:"
.PP
.IP "\fBtarget\fR: string (must be unique within table)"
Connection method for managers\[char46]
.IP
The following connection methods are currently supported:
.RS
.TP
\fBssl:\fIhost\fB\fR[\fB:\fIport\fB\fR]
The specified SSL \fIport\fR on the host at the given \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address\[char46] The \fBssl\fR column in the \fBOpen_vSwitch\fR table must point to a valid SSL configuration when this form is used\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6640\[char46]
.IP
SSL support is an optional feature that is not always built as part of Open vSwitch\[char46]
.TP
\fBtcp:\fIhost\fB\fR[\fB:\fIport\fB\fR]
The specified TCP \fIport\fR on the host at the given \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address (IPv4 or IPv6)\[char46] If \fIhost\fR is an IPv6 address, wrap it in square brackets, e\[char46]g\[char46] \fBtcp:[::1]:6640\fR\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6640\[char46]
.TP
\fBpssl:\fR[\fIport\fR][\fB:\fIhost\fB\fR]
Listens for SSL connections on the specified TCP \fIport\fR\[char46] Specify 0 for \fIport\fR to have the kernel automatically choose an available port\[char46] If \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address, is specified, then connections are restricted to the resolved or specified local IP address (either IPv4 or IPv6 address)\[char46] If \fIhost\fR is an IPv6 address, wrap in square brackets, e\[char46]g\[char46] \fBpssl:6640:[::1]\fR\[char46] If \fIhost\fR is not specified then it listens only on IPv4 (but not IPv6) addresses\[char46] The \fBssl\fR column in the \fBOpen_vSwitch\fR table must point to a valid SSL configuration when this form is used\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6640\[char46]
.IP
SSL support is an optional feature that is not always built as part of Open vSwitch\[char46]
.TP
\fBptcp:\fR[\fIport\fR][\fB:\fIhost\fB\fR]
Listens for connections on the specified TCP \fIport\fR\[char46] Specify 0 for \fIport\fR to have the kernel automatically choose an available port\[char46] If \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address, is specified, then connections are restricted to the resolved or specified local IP address (either IPv4 or IPv6 address)\[char46] If \fIhost\fR is an IPv6 address, wrap it in square brackets, e\[char46]g\[char46] \fBptcp:6640:[::1]\fR\[char46] If \fIhost\fR is not specified then it listens only on IPv4 addresses\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6640\[char46]
.RE
.IP
When multiple managers are configured, the \fBtarget\fR values must be unique\[char46] Duplicate \fBtarget\fR values yield unspecified results\[char46]
.IP "\fBconnection_mode\fR: optional string, either \fBin\-band\fR or \fBout\-of\-band\fR"
If it is specified, this setting must be one of the following strings that describes how Open vSwitch contacts this OVSDB client over the network:
.RS
.TP
\fBin\-band\fR
In this mode, this connection\(cqs traffic travels over a bridge managed by Open vSwitch\[char46] With this setting, Open vSwitch allows traffic to and from the client regardless of the contents of the OpenFlow flow table\[char46] (Otherwise, Open vSwitch would never be able to connect to the client, because it did not have a flow to enable it\[char46]) This is the most common connection mode because it is not necessary to maintain two independent networks\[char46]
.TP
\fBout\-of\-band\fR
In this mode, the client\(cqs traffic uses a control network separate from that managed by Open vSwitch, that is, Open vSwitch does not use any of its own network devices to communicate with the client\[char46] The control network must be configured separately, before or after \fBovs\-vswitchd\fR is started\[char46]
.RE
.IP
If not specified, the default is implementation-specific\[char46]
.ST "Client Failure Detection and Handling:"
.PP
.IP "\fBmax_backoff\fR: optional integer, at least 1,000"
Maximum number of milliseconds to wait between connection attempts\[char46] Default is implementation-specific\[char46]
.IP "\fBinactivity_probe\fR: optional integer"
Maximum number of milliseconds of idle time on connection to the client before sending an inactivity probe message\[char46] If Open vSwitch does not communicate with the client for the specified number of seconds, it will send a probe\[char46] If a response is not received for the same additional amount of time, Open vSwitch assumes the connection has been broken and attempts to reconnect\[char46] Default is implementation-specific\[char46] A value of 0 disables inactivity probes\[char46]
.ST "Status:"
.PP
.PP
.PP
Key-value pair of \fBis_connected\fR is always updated\[char46] Other key-value pairs in the status columns may be updated depends on the \fBtarget\fR type\[char46]
.PP
.PP
When \fBtarget\fR specifies a connection method that listens for inbound connections (e\[char46]g\[char46] \fBptcp:\fR or \fBpunix:\fR), both \fBn_connections\fR and \fBis_connected\fR may also be updated while the remaining key-value pairs are omitted\[char46]
.PP
.PP
On the other hand, when \fBtarget\fR specifies an outbound connection, all key-value pairs may be updated, except the above-mentioned two key-value pairs associated with inbound connection targets\[char46] They are omitted\[char46]
.IP "\fBis_connected\fR: boolean"
\fBtrue\fR if currently connected to this manager, \fBfalse\fR otherwise\[char46]
.IP "\fBstatus : last_error\fR: optional string"
A human-readable description of the last error on the connection to the manager; i\[char46]e\[char46] \fBstrerror(errno)\fR\[char46] This key will exist only if an error has occurred\[char46]
.IP "\fBstatus : state\fR: optional string, one of \fBACTIVE\fR, \fBBACKOFF\fR, \fBCONNECTING\fR, \fBIDLE\fR, or \fBVOID\fR"
The state of the connection to the manager:
.RS
.TP
\fBVOID\fR
Connection is disabled\[char46]
.TP
\fBBACKOFF\fR
Attempting to reconnect at an increasing period\[char46]
.TP
\fBCONNECTING\fR
Attempting to connect\[char46]
.TP
\fBACTIVE\fR
Connected, remote host responsive\[char46]
.TP
\fBIDLE\fR
Connection is idle\[char46] Waiting for response to keep-alive\[char46]
.RE
.IP
These values may change in the future\[char46] They are provided only for human consumption\[char46]
.IP "\fBstatus : sec_since_connect\fR: optional string, containing an integer, at least 0"
The amount of time since this manager last successfully connected to the database (in seconds)\[char46] Value is empty if manager has never successfully connected\[char46]
.IP "\fBstatus : sec_since_disconnect\fR: optional string, containing an integer, at least 0"
The amount of time since this manager last disconnected from the database (in seconds)\[char46] Value is empty if manager has never disconnected\[char46]
.IP "\fBstatus : locks_held\fR: optional string"
Space-separated list of the names of OVSDB locks that the connection holds\[char46] Omitted if the connection does not hold any locks\[char46]
.IP "\fBstatus : locks_waiting\fR: optional string"
Space-separated list of the names of OVSDB locks that the connection is currently waiting to acquire\[char46] Omitted if the connection is not waiting for any locks\[char46]
.IP "\fBstatus : locks_lost\fR: optional string"
Space-separated list of the names of OVSDB locks that the connection has had stolen by another OVSDB client\[char46] Omitted if no locks have been stolen from this connection\[char46]
.IP "\fBstatus : n_connections\fR: optional string, containing an integer, at least 2"
When \fBtarget\fR specifies a connection method that listens for inbound connections (e\[char46]g\[char46] \fBptcp:\fR or \fBpssl:\fR) and more than one connection is actually active, the value is the number of active connections\[char46] Otherwise, this key-value pair is omitted\[char46]
.IP "\fBstatus : bound_port\fR: optional string, containing an integer"
When \fBtarget\fR is \fBptcp:\fR or \fBpssl:\fR, this is the TCP port on which the OVSDB server is listening\[char46] (This is particularly useful when \fBtarget\fR specifies a port of 0, allowing the kernel to choose any available port\[char46])
.ST "Connection Parameters:"
.PP
.PP
.PP
Additional configuration for a connection between the manager and the Open vSwitch Database\[char46]
.IP "\fBother_config : dscp\fR: optional string, containing an integer"
The Differentiated Service Code Point (DSCP) is specified using 6 bits in the Type of Service (TOS) field in the IP header\[char46] DSCP provides a mechanism to classify the network traffic and provide Quality of Service (QoS) on IP networks\[char46] The DSCP value specified here is used when establishing the connection between the manager and the Open vSwitch\[char46] If no value is specified, a default value of 48 is chosen\[char46] Valid DSCP values must be in the range 0 to 63\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.IP "\fBother_config\fR: map of string-string pairs"
.bp
.SH "NetFlow TABLE"
.PP
A NetFlow target\[char46] NetFlow is a protocol that exports a number of details about terminating IP flows, such as the principals involved and duration\[char46]
.SS "Summary:
.TQ 3.00in
\fBtargets\fR
set of 1 or more strings
.TQ 3.00in
\fBengine_id\fR
optional integer, in range 0 to 255
.TQ 3.00in
\fBengine_type\fR
optional integer, in range 0 to 255
.TQ 3.00in
\fBactive_timeout\fR
integer, at least \-1
.TQ 3.00in
\fBadd_id_to_interface\fR
boolean
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBtargets\fR: set of 1 or more strings"
NetFlow targets in the form \fB\fIip\fB:\fIport\fB\fR\[char46] The \fIip\fR must be specified numerically, not as a DNS name\[char46]
.IP "\fBengine_id\fR: optional integer, in range 0 to 255"
Engine ID to use in NetFlow messages\[char46] Defaults to datapath index if not specified\[char46]
.IP "\fBengine_type\fR: optional integer, in range 0 to 255"
Engine type to use in NetFlow messages\[char46] Defaults to datapath index if not specified\[char46]
.IP "\fBactive_timeout\fR: integer, at least \-1"
The interval at which NetFlow records are sent for flows that are still active, in seconds\[char46] A value of \fB0\fR requests the default timeout (currently 600 seconds); a value of \fB\-1\fR disables active timeouts\[char46]
.IP
The NetFlow passive timeout, for flows that become inactive, is not configurable\[char46] It will vary depending on the Open vSwitch version, the forms and contents of the OpenFlow flow tables, CPU and memory usage, and network activity\[char46] A typical passive timeout is about a second\[char46]
.IP "\fBadd_id_to_interface\fR: boolean"
If this column\(cqs value is \fBfalse\fR, the ingress and egress interface fields of NetFlow flow records are derived from OpenFlow port numbers\[char46] When it is \fBtrue\fR, the 7 most significant bits of these fields will be replaced by the least significant 7 bits of the engine id\[char46] This is useful because many NetFlow collectors do not expect multiple switches to be sending messages from the same host, so they do not store the engine information which could be used to disambiguate the traffic\[char46]
.IP
When this option is enabled, a maximum of 508 ports are supported\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Datapath TABLE"
.PP
.PP
.PP
Configuration for a datapath within \fBOpen_vSwitch\fR\[char46]
.PP
.PP
A datapath is responsible for providing the packet handling in Open vSwitch\[char46] There are two primary datapath implementations used by Open vSwitch: kernel and userspace\[char46] Kernel datapath implementations are available for Linux and Hyper-V, and selected as \fBsystem\fR in the \fBdatapath_type\fR column of the \fBBridge\fR table\[char46] The userspace datapath is used by DPDK and AF-XDP, and is selected as \fBnetdev\fR in the \fBdatapath_type\fR column of the \fBBridge\fR table\[char46]
.PP
.PP
A datapath of a particular type is shared by all the bridges that use that datapath\[char46] Thus, configurations applied to this table affect all bridges that use this datapath\[char46]
.SS "Summary:
.TQ 3.00in
\fBdatapath_version\fR
string
.TQ 3.00in
\fBct_zones\fR
map of integer-\fBCT_Zone\fR pairs, key in range 0 to 65,535
.TQ .25in
\fICapabilities:\fR
.RS .25in
.TQ 2.75in
\fBcapabilities : max_vlan_headers\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBcapabilities : recirc\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : lb_output_action\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ .25in
\fIConnection-Tracking Capabilities:\fR
.RS .25in
.TQ 2.50in
\fBcapabilities : ct_state\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBcapabilities : ct_state_nat\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBcapabilities : ct_zone\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBcapabilities : ct_mark\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBcapabilities : ct_label\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBcapabilities : ct_orig_tuple\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBcapabilities : ct_orig_tuple6\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ 2.75in
\fBcapabilities : masked_set_action\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : tnl_push_pop\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : ufid\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : trunc\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : nd_ext\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ .25in
\fIClone Actions:\fR
.RS .25in
.TQ 2.50in
\fBcapabilities : clone\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBcapabilities : sample_nesting\fR
optional string, containing an integer, at least 0
.RE
.TQ 2.75in
\fBcapabilities : ct_eventmask\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : ct_clear\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : max_hash_alg\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBcapabilities : check_pkt_len\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : ct_timeout\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : explicit_drop_action\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : ct_zero_snat\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBcapabilities : ct_flush\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBdatapath_version\fR: string"
Reports the version number of the Open vSwitch datapath in use\[char46] This allows management software to detect and report discrepancies between Open vSwitch userspace and datapath versions\[char46] (The \fBovs_version\fR column in the \fBOpen_vSwitch\fR reports the Open vSwitch userspace version\[char46]) The version reported depends on the datapath in use:
.RS
.IP \(bu
When the kernel module included in the Open vSwitch source tree is used, this column reports the Open vSwitch version from which the module was taken\[char46]
.IP \(bu
When the kernel module that is part of the upstream Linux kernel is used, this column reports \fB<unknown>\fR\[char46]
.IP \(bu
When the datapath is built into the \fBovs\-vswitchd\fR binary, this column reports \fB<built\-in>\fR\[char46] A built-in datapath is by definition the same version as the rest of the Open vSwitch userspace\[char46]
.IP \(bu
Other datapaths (such as the Hyper-V kernel datapath) currently report \fB<unknown>\fR\[char46]
.RE
.IP
A version discrepancy between \fBovs\-vswitchd\fR and the datapath in use is not normally cause for alarm\[char46] The Open vSwitch kernel datapaths for Linux and Hyper-V, in particular, are designed for maximum inter-version compatibility: any userspace version works with with any kernel version\[char46] Some reasons do exist to insist on particular user/kernel pairings\[char46] First, newer kernel versions add new features, that can only be used by new-enough userspace, e\[char46]g\[char46] VXLAN tunneling requires certain minimal userspace and kernel versions\[char46] Second, as an extension to the first reason, some newer kernel versions add new features for enhancing performance that only new-enough userspace versions can take advantage of\[char46]
.IP "\fBct_zones\fR: map of integer-\fBCT_Zone\fR pairs, key in range 0 to 65,535"
Configuration for connection tracking zones\[char46] Each pair maps from a zone id to a configuration for that zone\[char46] Zone \fB0\fR applies to the default zone (ie, the one used if a zone is not specified in connection tracking-related OpenFlow matches and actions)\[char46]
.ST "Capabilities:"
.PP
.PP
.PP
The \fBcapabilities\fR column reports a datapath\(cqs features\[char46] For the \fBnetdev\fR datapath, the capabilities are fixed for a given version of Open vSwitch because this datapath is built into the \fBovs\-vswitchd\fR binary\[char46] The Linux kernel and Windows and other datapaths, which are external to OVS userspace, can vary in version and capabilities independently from \fBovs\-vswitchd\fR\[char46]
.PP
.PP
Some of these features indicate whether higher-level Open vSwitch features are available\[char46] For example, OpenFlow features for connection-tracking are available only when \fBcapabilities:ct_state\fR is \fBtrue\fR\[char46] A controller that wishes to determine whether a feature is supported could, therefore, consult the relevant capabilities in this table\[char46] However, as a general rule, it is better for a controller to try to use the higher-level feature and use the result as an indication of support, since the low-level capabilities are more likely to shift over time than the high-level features that rely on them\[char46]
.IP "\fBcapabilities : max_vlan_headers\fR: optional string, containing an integer, at least 0"
Number of 802\[char46]1q VLAN headers supported by the datapath, as probed by the \fBovs\-vswitchd\fR slow path\[char46] If the datapath supports more VLAN headers than the slow path, this reports the slow path\(cqs limit\[char46] The value of \fBother-config:vlan-limit\fR in the \fBOpen_vSwitch\fR table does not influence the number reported here\[char46]
.IP "\fBcapabilities : recirc\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If this is true, then the datapath supports recirculation, specifically OVS_KEY_ATTR_RECIRC_ID\[char46] Recirculation enables higher performance for MPLS and active-active load balancing bonding modes\[char46]
.IP "\fBcapabilities : lb_output_action\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If this is true, then the datapath supports optimized balance-tcp bond mode\[char46] This capability replaces existing \fBhash\fR and \fBrecirc\fR actions with new action \fBlb_output\fR and avoids recirculation of packet in datapath\[char46] It is supported only for balance-tcp bond mode in netdev datapath\[char46] The new action gives higher performance by using bond buckets instead of post recirculation flows for selection of slave port from bond\[char46] By default this new action is disabled, however it can be enabled by setting \fBother-config:lb-output-action\fR in \fBPort\fR table\[char46]
.ST "Connection-Tracking Capabilities:"
.PP
.PP
.PP
These capabilities are granular because Open vSwitch and its datapaths added support for connection tracking over several releases, with features added individually over that time\[char46]
.IP "\fBcapabilities : ct_state\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If true, datapath supports OVS_KEY_ATTR_CT_STATE, which indicates support for the bits in the OpenFlow \fBct_state\fR field (see \fBovs\-fields\fR(7)) other than \fBsnat\fR and \fBdnat\fR, which have a separate capability\[char46]
.IP
If this is false, the datapath does not support connection-tracking at all and the remaining connection-tracking capabilities should all be false\[char46] In this case, Open vSwitch will reject flows that match on the \fBct_state\fR field or use the \fBct\fR action\[char46]
.IP "\fBcapabilities : ct_state_nat\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If true, it means that the datapath supports the \fBsnat\fR and \fBdnat\fR flags in the OpenFlow \fBct_state\fR field\[char46] The \fBct_state\fR capability must be true for this to make sense\[char46]
.IP
If false, Open vSwitch will reject flows that match on the \fBsnat\fR or \fBdnat\fR bits in \fBct_state\fR or use \fBnat\fR in the \fBct\fR action\[char46]
.IP "\fBcapabilities : ct_zone\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If true, datapath supports OVS_KEY_ATTR_CT_ZONE\[char46] If false, Open vSwitch rejects flows that match on the \fBct_zone\fR field or that specify a nonzero zone or a zone field on the \fBct\fR action\[char46]
.IP "\fBcapabilities : ct_mark\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If true, datapath supports OVS_KEY_ATTR_CT_MARK\[char46] If false, Open vSwitch rejects flows that match on the \fBct_mark\fR field or that set \fBct_mark\fR in the \fBct\fR action\[char46]
.IP "\fBcapabilities : ct_label\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If true, datapath supports OVS_KEY_ATTR_CT_LABEL\[char46] If false, Open vSwitch rejects flows that match on the \fBct_label\fR field or that set \fBct_label\fR in the \fBct\fR action\[char46]
.IP "\fBcapabilities : ct_orig_tuple\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If true, the datapath supports matching the 5-tuple from the connection\(cqs original direction for IPv4 traffic\[char46] If false, Open vSwitch rejects flows that match on \fBct_nw_src\fR or \fBct_nw_dst\fR, that use the \fBct\fR feature of the \fBresubmit\fR action, or the \fBforce\fR keyword in the \fBct\fR action\[char46] (The latter isn\(cqt tied to connection tracking support of original tuples in any technical way\[char46] They are conflated because all current datapaths implemented the two features at the same time\[char46])
.IP
If this and \fBcapabilities:ct_orig_tuple6\fR are both false, Open vSwitch rejects flows that match on \fBct_nw_proto\fR, \fBct_tp_src\fR, or \fBct_tp_dst\fR\[char46]
.IP "\fBcapabilities : ct_orig_tuple6\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If true, the datapath supports matching the 5-tuple from the connection\(cqs original direction for IPv6 traffic\[char46] If false, Open vSwitch rejects flows that match on \fBct_ipv6_src\fR or \fBct_ipv6_dst\fR\[char46]
.IP "\fBcapabilities : masked_set_action\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports masked data in OVS_ACTION_ATTR_SET actions\[char46] Masked data can improve performance by allowing megaflows to match on fewer fields\[char46]
.IP "\fBcapabilities : tnl_push_pop\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports tnl_push and pop actions\[char46] This is a prerequisite for a datapath to support native tunneling\[char46]
.IP "\fBcapabilities : ufid\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports OVS_FLOW_ATTR_UFID\[char46] UFID support improves revalidation performance by transferring less data between the slow path and the datapath\[char46]
.IP "\fBcapabilities : trunc\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports OVS_ACTION_ATTR_TRUNC action\[char46] If false, the \fBoutput\fR action with packet truncation requires every packet to be sent to the Open vSwitch slow path, which is likely to make it too slow for mirroring traffic in bulk\[char46]
.IP "\fBcapabilities : nd_ext\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports OVS_KEY_ATTR_ND_EXTENSIONS to match on ICMPv6 \(dqND reserved\(dq and \(dqND option type\(dq header fields\[char46] If false, the datapath reports error if the feature is used\[char46]
.ST "Clone Actions:"
.PP
.PP
.PP
When Open vSwitch translates actions from OpenFlow into the datapath representation, some of the datapath actions may modify the packet or have other side effects that later datapath actions can\(cqt undo\[char46] The OpenFlow \fBct\fR, \fBmeter\fR, \fBoutput\fR with truncation, \fBencap\fR, \fBdecap\fR, and \fBdec_nsh_ttl\fR actions fall into this category\[char46] Often, this is not a problem because nothing later on needs the original packet\[char46]
.PP
.PP
Such actions can, however, occur in circumstances where the translation does require the original packet\[char46] For example, an OpenFlow \fBoutput\fR action might direct a packet to a patch port, which might in turn lead to a \fBct\fR action that NATs the packet (which cannot be undone), and then afterward when control flow pops back across the patch port some other action might need to act on the original packet\[char46]
.PP
.PP
Open vSwitch has two different ways to implement this ``save and restore\(cq\(cq via datapath actions\[char46] These capabilities indicate which one Open vSwitch will choose\[char46] When neither is available, Open vSwitch simply fails in situations that require this feature\[char46]
.IP "\fBcapabilities : clone\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports OVS_ACTION_ATTR_CLONE action\[char46] This is the preferred option for saving and restoring packets, since it is intended for the purpose, but old datapaths do not support it\[char46] Open vSwitch will use it whenever it is available\[char46]
.IP
(The OpenFlow \fBclone\fR action does not always yield a OVS_ACTION_ATTR_CLONE action\[char46] It only does so when the datapath supports it and the \fBclone\fR brackets actions that otherwise cannot be undone\[char46])
.IP "\fBcapabilities : sample_nesting\fR: optional string, containing an integer, at least 0"
Maximum level of nesting allowed by OVS_ACTION_ATTR_SAMPLE action\[char46] Open vSwitch misuses this action for saving and restoring packets when the datapath supports more than 3 levels of nesting and OVS_ACTION_ATTR_CLONE is not available\[char46]
.IP "\fBcapabilities : ct_eventmask\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath\(cqs OVS_ACTION_ATTR_CT action implements the OVS_CT_ATTR_EVENTMASK attribute\[char46] When this is true, Open vSwitch uses the event mask feature to limit the kinds of events reported to conntrack update listeners\[char46] When Open vSwitch doesn\(cqt limit the event mask, listeners receive reports of numerous usually unimportant events, such as TCP state machine changes, which can waste CPU time\[char46]
.IP "\fBcapabilities : ct_clear\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports OVS_ACTION_ATTR_CT_CLEAR action\[char46] If false, the OpenFlow \fBct_clear\fR action has no effect on the datapath\[char46]
.IP "\fBcapabilities : max_hash_alg\fR: optional string, containing an integer, at least 0"
Highest supported dp_hash algorithm\[char46] This allows Open vSwitch to avoid requesting a packet hash that the datapath does not support\[char46]
.IP "\fBcapabilities : check_pkt_len\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports OVS_ACTION_ATTR_CHECK_PKT_LEN\[char46] If false, Open vSwitch implements the \fBcheck_pkt_larger\fR action by sending every packet through the Open vSwitch slow path, which is likely to make it too slow for handling traffic in bulk\[char46]
.IP "\fBcapabilities : ct_timeout\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports OVS_CT_ATTR_TIMEOUT in the OVS_ACTION_ATTR_CT action\[char46] If false, Open vswitch cannot implement timeout policies based on connection tracking zones, as configured through the \fBCT_Timeout_Policy\fR table\[char46]
.IP "\fBcapabilities : explicit_drop_action\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports OVS_ACTION_ATTR_DROP\[char46] If false, explicit drop action will not be sent to the datapath\[char46]
.IP "\fBcapabilities : ct_zero_snat\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports all-zero SNAT\[char46] This is a special case if the \fBsrc\fR IP address is configured as all 0\(cqs, i\[char46]e\[char46], \fBnat(src=0\[char46]0\[char46]0\[char46]0)\fR\[char46] In this case, when a source port collision is detected during the commit, the source port will be translated to an ephemeral port\[char46] If there is no collision, no SNAT is performed\[char46]
.IP "\fBcapabilities : ct_flush\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
True if the datapath supports CT flush OpenFlow Nicira extension called \fBNXT_CT_FLUSH\fR\[char46] The \fBNXT_CT_FLUSH\fR extensions allows to flush CT entries based on specified parameters\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "CT_Zone TABLE"
.PP
Connection tracking zone configuration
.SS "Summary:
.TQ 3.00in
\fBtimeout_policy\fR
optional \fBCT_Timeout_Policy\fR
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBtimeout_policy\fR: optional \fBCT_Timeout_Policy\fR"
Connection tracking timeout policy for this zone\[char46] If a timeout policy is not specified, it defaults to the timeout policy in the system\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "CT_Timeout_Policy TABLE"
.PP
Connection tracking timeout policy configuration
.SS "Summary:
.TQ .25in
\fITimeouts:\fR
.RS .25in
.TQ 2.75in
\fBtimeouts\fR
map of string-integer pairs, key one of \fBicmp_first\fR, \fBicmp_reply\fR, \fBtcp_close\fR, \fBtcp_close_wait\fR, \fBtcp_established\fR, \fBtcp_fin_wait\fR, \fBtcp_last_ack\fR, \fBtcp_retransmit\fR, \fBtcp_syn_recv\fR, \fBtcp_syn_sent2\fR, \fBtcp_syn_sent\fR, \fBtcp_time_wait\fR, \fBtcp_unack\fR, \fBudp_first\fR, \fBudp_multiple\fR, or \fBudp_single\fR, value in range 0 to 4,294,967,295
.TQ .25in
\fITCP Timeouts:\fR
.RS .25in
.TQ 2.50in
\fBtimeouts : tcp_syn_sent\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_syn_recv\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_established\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_fin_wait\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_close_wait\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_last_ack\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_time_wait\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_close\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_syn_sent2\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_retransmit\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : tcp_unack\fR
optional integer, in range 0 to 4,294,967,295
.RE
.TQ .25in
\fIUDP Timeouts:\fR
.RS .25in
.TQ 2.50in
\fBtimeouts : udp_first\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : udp_single\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : udp_multiple\fR
optional integer, in range 0 to 4,294,967,295
.RE
.TQ .25in
\fIICMP Timeouts:\fR
.RS .25in
.TQ 2.50in
\fBtimeouts : icmp_first\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.50in
\fBtimeouts : icmp_reply\fR
optional integer, in range 0 to 4,294,967,295
.RE
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.ST "Timeouts:"
.PP
.IP "\fBtimeouts\fR: map of string-integer pairs, key one of \fBicmp_first\fR, \fBicmp_reply\fR, \fBtcp_close\fR, \fBtcp_close_wait\fR, \fBtcp_established\fR, \fBtcp_fin_wait\fR, \fBtcp_last_ack\fR, \fBtcp_retransmit\fR, \fBtcp_syn_recv\fR, \fBtcp_syn_sent2\fR, \fBtcp_syn_sent\fR, \fBtcp_time_wait\fR, \fBtcp_unack\fR, \fBudp_first\fR, \fBudp_multiple\fR, or \fBudp_single\fR, value in range 0 to 4,294,967,295"
The \fBtimeouts\fR column contains key-value pairs used to configure connection tracking timeouts in a datapath\[char46] Key-value pairs that are not supported by a datapath are ignored\[char46] The timeout value is in seconds\[char46]
.ST "TCP Timeouts:"
.PP
.IP "\fBtimeouts : tcp_syn_sent\fR: optional integer, in range 0 to 4,294,967,295"
The timeout for the connection after the first TCP SYN packet has been seen by conntrack\[char46]
.IP "\fBtimeouts : tcp_syn_recv\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after the first TCP SYN-ACK packet has been seen by conntrack\[char46]
.IP "\fBtimeouts : tcp_established\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after the connection has been fully established\[char46]
.IP "\fBtimeouts : tcp_fin_wait\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after the first TCP FIN packet has been seen by conntrack\[char46]
.IP "\fBtimeouts : tcp_close_wait\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after the first TCP ACK packet has been seen after it receives TCP FIN packet\[char46] This timeout is only supported by the Linux kernel datapath\[char46]
.IP "\fBtimeouts : tcp_last_ack\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after TCP FIN packets have been seen by conntrack from both directions\[char46] This timeout is only supported by the Linux kernel datapath\[char46]
.IP "\fBtimeouts : tcp_time_wait\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after conntrack has seen the TCP ACK packet for the second TCP FIN packet\[char46]
.IP "\fBtimeouts : tcp_close\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after the first TCP RST packet has been seen by conntrack\[char46]
.IP "\fBtimeouts : tcp_syn_sent2\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection when only a TCP SYN packet has been seen by conntrack from both directions (simultaneous open)\[char46] This timeout is only supported by the Linux kernel datapath\[char46]
.IP "\fBtimeouts : tcp_retransmit\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection when it exceeds the maximum number of retransmissions\[char46] This timeout is only supported by the Linux kernel datapath\[char46]
.IP "\fBtimeouts : tcp_unack\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection when non-SYN packets create an established connection in TCP loose tracking mode\[char46] This timeout is only supported by the Linux kernel datapath\[char46]
.ST "UDP Timeouts:"
.PP
.IP "\fBtimeouts : udp_first\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after the first UDP packet has been seen by conntrack\[char46] This timeout is only supported by the userspace datapath\[char46]
.IP "\fBtimeouts : udp_single\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection when conntrack only seen UDP packet from the source host, but the destination host has never sent one back\[char46]
.IP "\fBtimeouts : udp_multiple\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection when UDP packets have been seen in both directions\[char46]
.ST "ICMP Timeouts:"
.PP
.IP "\fBtimeouts : icmp_first\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection after the first ICMP packet has been seen by conntrack\[char46]
.IP "\fBtimeouts : icmp_reply\fR: optional integer, in range 0 to 4,294,967,295"
The timeout of the connection when ICMP packets have been seen in both direction\[char46] This timeout is only supported by the userspace datapath\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "SSL TABLE"
.PP
SSL configuration for an Open_vSwitch\[char46]
.SS "Summary:
.TQ 3.00in
\fBprivate_key\fR
string
.TQ 3.00in
\fBcertificate\fR
string
.TQ 3.00in
\fBca_cert\fR
string
.TQ 3.00in
\fBbootstrap_ca_cert\fR
boolean
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBprivate_key\fR: string"
Name of a PEM file containing the private key used as the switch\(cqs identity for SSL connections to the controller\[char46]
.IP "\fBcertificate\fR: string"
Name of a PEM file containing a certificate, signed by the certificate authority (CA) used by the controller and manager, that certifies the switch\(cqs private key, identifying a trustworthy switch\[char46]
.IP "\fBca_cert\fR: string"
Name of a PEM file containing the CA certificate used to verify that the switch is connected to a trustworthy controller\[char46]
.IP "\fBbootstrap_ca_cert\fR: boolean"
If set to \fBtrue\fR, then Open vSwitch will attempt to obtain the CA certificate from the controller on its first SSL connection and save it to the named PEM file\[char46] If it is successful, it will immediately drop the connection and reconnect, and from then on all SSL connections must be authenticated by a certificate signed by the CA certificate thus obtained\[char46] \fBThis option exposes the
SSL connection to a man\-in\-the\-middle attack obtaining the initial
CA certificate\[char46]\fR It may still be useful for bootstrapping\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "sFlow TABLE"
.PP
.PP
.PP
A set of sFlow(R) targets\[char46] sFlow is a protocol for remote monitoring of switches\[char46]
.SS "Summary:
.TQ 3.00in
\fBagent\fR
optional string
.TQ 3.00in
\fBheader\fR
optional integer
.TQ 3.00in
\fBpolling\fR
optional integer
.TQ 3.00in
\fBsampling\fR
optional integer
.TQ 3.00in
\fBtargets\fR
set of 1 or more strings
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBagent\fR: optional string"
Determines the agent address, that is, the IP address reported to collectors as the source of the sFlow data\[char46] It may be an IP address or the name of a network device\[char46] In the latter case, the network device\(cqs IP address is used,
.IP
If not specified, the agent device is figured from the first target address and the routing table\[char46] If the routing table does not contain a route to the target, the IP address defaults to the \fBlocal_ip\fR in the collector\(cqs \fBController\fR\[char46]
.IP
If an agent IP address cannot be determined, sFlow is disabled\[char46]
.IP "\fBheader\fR: optional integer"
Number of bytes of a sampled packet to send to the collector\[char46] If not specified, the default is 128 bytes\[char46]
.IP "\fBpolling\fR: optional integer"
Polling rate in seconds to send port statistics to the collector\[char46] If not specified, defaults to 30 seconds\[char46]
.IP "\fBsampling\fR: optional integer"
Rate at which packets should be sampled and sent to the collector\[char46] If not specified, defaults to 400, which means one out of 400 packets, on average, will be sent to the collector\[char46]
.IP "\fBtargets\fR: set of 1 or more strings"
sFlow targets in the form \fB\fIip\fB:\fIport\fB\fR\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "IPFIX TABLE"
.PP
.PP
.PP
Configuration for sending packets to IPFIX collectors\[char46]
.PP
.PP
IPFIX is a protocol that exports a number of details about flows\[char46] The IPFIX implementation in Open vSwitch samples packets at a configurable rate, extracts flow information from those packets, optionally caches and aggregates the flow information, and sends the result to one or more collectors\[char46]
.PP
.PP
IPFIX in Open vSwitch can be configured two different ways:
.RS
.IP \(bu
With \fBper\-bridge sampling\fR, Open vSwitch performs IPFIX sampling automatically on all packets that pass through a bridge\[char46] To configure per-bridge sampling, create an \fBIPFIX\fR record and point a \fBBridge\fR table\(cqs \fBipfix\fR column to it\[char46] The \fBFlow_Sample_Collector_Set\fR table is not used for per-bridge sampling\[char46]
.IP \(bu
With \fBflow\-based sampling\fR, \fBsample\fR actions in the OpenFlow flow table drive IPFIX sampling\[char46] See \fBovs\-actions\fR(7) for a description of the \fBsample\fR action\[char46]
.IP
Flow-based sampling also requires database configuration: create a \fBIPFIX\fR record that describes the IPFIX configuration and a \fBFlow_Sample_Collector_Set\fR record that points to the \fBBridge\fR whose flow table holds the \fBsample\fR actions and to \fBIPFIX\fR record\[char46] The \fBipfix\fR in the \fBBridge\fR table is not used for flow-based sampling\[char46]
.RE
.SS "Summary:
.TQ 3.00in
\fBtargets\fR
set of strings
.TQ 3.00in
\fBcache_active_timeout\fR
optional integer, in range 0 to 4,200
.TQ 3.00in
\fBcache_max_flows\fR
optional integer, in range 0 to 4,294,967,295
.TQ 3.00in
\fBstats_interval\fR
optional integer, in range 1 to 3,600
.TQ 3.00in
\fBtemplate_interval\fR
optional integer, in range 1 to 3,600
.TQ 3.00in
\fBother_config : enable-tunnel-sampling\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 3.00in
\fBother_config : virtual_obs_id\fR
optional string
.TQ .25in
\fIPer-Bridge Sampling:\fR
.RS .25in
.TQ 2.75in
\fBsampling\fR
optional integer, in range 1 to 4,294,967,295
.TQ 2.75in
\fBobs_domain_id\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.75in
\fBobs_point_id\fR
optional integer, in range 0 to 4,294,967,295
.TQ 2.75in
\fBother_config : enable-input-sampling\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : enable-output-sampling\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBtargets\fR: set of strings"
IPFIX target collectors in the form \fB\fIip\fB:\fIport\fB\fR\[char46]
.IP "\fBcache_active_timeout\fR: optional integer, in range 0 to 4,200"
The maximum period in seconds for which an IPFIX flow record is cached and aggregated before being sent\[char46] If not specified, defaults to 0\[char46] If 0, caching is disabled\[char46]
.IP "\fBcache_max_flows\fR: optional integer, in range 0 to 4,294,967,295"
The maximum number of IPFIX flow records that can be cached at a time\[char46] If not specified, defaults to 0\[char46] If 0, caching is disabled\[char46]
.IP "\fBstats_interval\fR: optional integer, in range 1 to 3,600"
Interval (in seconds) for sending IPFIX exporting process statistics according to IETF RFC 5101 Section 4\[char46]3\[char46]
.IP
Default value is 600
.IP "\fBtemplate_interval\fR: optional integer, in range 1 to 3,600"
Interval (in seconds) for sending IPFIX Template information for each Observation Domain ID\[char46]
.IP
Default value is 600
.IP "\fBother_config : enable-tunnel-sampling\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Set to \fBtrue\fR to enable sampling and reporting tunnel header 7-tuples in IPFIX flow records\[char46] Tunnel sampling is enabled by default\[char46]
.IP
The following enterprise entities report the sampled tunnel info:
.RS
.TP
tunnelType:
ID: 891, and enterprise ID 6876 (VMware)\[char46]
.IP
type: unsigned 8-bit integer\[char46]
.IP
data type semantics: identifier\[char46]
.IP
description: Identifier of the layer 2 network overlay network encapsulation type: 0x01 VxLAN, 0x02 GRE, 0x03 LISP, 0x07 GENEVE\[char46]
.TP
tunnelKey:
ID: 892, and enterprise ID 6876 (VMware)\[char46]
.IP
type: variable-length octetarray\[char46]
.IP
data type semantics: identifier\[char46]
.IP
description: Key which is used for identifying an individual traffic flow within a VxLAN (24-bit VNI), GENEVE (24-bit VNI), GRE (32-bit key), or LISP (24-bit instance ID) tunnel\[char46] The key is encoded in this octetarray as a 3-, 4-, or 8-byte integer ID in network byte order\[char46]
.TP
tunnelSourceIPv4Address:
ID: 893, and enterprise ID 6876 (VMware)\[char46]
.IP
type: unsigned 32-bit integer\[char46]
.IP
data type semantics: identifier\[char46]
.IP
description: The IPv4 source address in the tunnel IP packet header\[char46]
.TP
tunnelDestinationIPv4Address:
ID: 894, and enterprise ID 6876 (VMware)\[char46]
.IP
type: unsigned 32-bit integer\[char46]
.IP
data type semantics: identifier\[char46]
.IP
description: The IPv4 destination address in the tunnel IP packet header\[char46]
.TP
tunnelProtocolIdentifier:
ID: 895, and enterprise ID 6876 (VMware)\[char46]
.IP
type: unsigned 8-bit integer\[char46]
.IP
data type semantics: identifier\[char46]
.IP
description: The value of the protocol number in the tunnel IP packet header\[char46] The protocol number identifies the tunnel IP packet payload type\[char46]
.TP
tunnelSourceTransportPort:
ID: 896, and enterprise ID 6876 (VMware)\[char46]
.IP
type: unsigned 16-bit integer\[char46]
.IP
data type semantics: identifier\[char46]
.IP
description: The source port identifier in the tunnel transport header\[char46] For the transport protocols UDP, TCP, and SCTP, this is the source port number given in the respective header\[char46]
.TP
tunnelDestinationTransportPort:
ID: 897, and enterprise ID 6876 (VMware)\[char46]
.IP
type: unsigned 16-bit integer\[char46]
.IP
data type semantics: identifier\[char46]
.IP
description: The destination port identifier in the tunnel transport header\[char46] For the transport protocols UDP, TCP, and SCTP, this is the destination port number given in the respective header\[char46]
.RE
.IP
Before Open vSwitch 2\[char46]5\[char46]90, \fBother_config:enable-tunnel-sampling\fR was only supported with per-bridge sampling, and ignored otherwise\[char46] Open vSwitch 2\[char46]5\[char46]90 and later support \fBother_config:enable-tunnel-sampling\fR for per-bridge and per-flow sampling\[char46]
.IP "\fBother_config : virtual_obs_id\fR: optional string"
A string that accompanies each IPFIX flow record\[char46] Its intended use is for the ``virtual observation ID,\(cq\(cq an identifier of a virtual observation point that is locally unique in a virtual network\[char46] It describes a location in the virtual network where IP packets can be observed\[char46] The maximum length is 254 bytes\[char46] If not specified, the field is omitted from the IPFIX flow record\[char46]
.IP
The following enterprise entity reports the specified virtual observation ID:
.RS
.TP
virtualObsID:
ID: 898, and enterprise ID 6876 (VMware)\[char46]
.IP
type: variable-length string\[char46]
.IP
data type semantics: identifier\[char46]
.IP
description: A virtual observation domain ID that is locally unique in a virtual network\[char46]
.RE
.IP
This feature was introduced in Open vSwitch 2\[char46]5\[char46]90\[char46]
.ST "Per-Bridge Sampling:"
.PP
.PP
.PP
These values affect only per-bridge sampling\[char46] See above for a description of the differences between per-bridge and flow-based sampling\[char46]
.IP "\fBsampling\fR: optional integer, in range 1 to 4,294,967,295"
The rate at which packets should be sampled and sent to each target collector\[char46] If not specified, defaults to 400, which means one out of 400 packets, on average, will be sent to each target collector\[char46]
.IP "\fBobs_domain_id\fR: optional integer, in range 0 to 4,294,967,295"
The IPFIX Observation Domain ID sent in each IPFIX packet\[char46] If not specified, defaults to 0\[char46]
.IP "\fBobs_point_id\fR: optional integer, in range 0 to 4,294,967,295"
The IPFIX Observation Point ID sent in each IPFIX flow record\[char46] If not specified, defaults to 0\[char46]
.IP "\fBother_config : enable-input-sampling\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
By default, Open vSwitch samples and reports flows at bridge port input in IPFIX flow records\[char46] Set this column to \fBfalse\fR to disable input sampling\[char46]
.IP "\fBother_config : enable-output-sampling\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
By default, Open vSwitch samples and reports flows at bridge port output in IPFIX flow records\[char46] Set this column to \fBfalse\fR to disable output sampling\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Flow_Sample_Collector_Set TABLE"
.PP
.PP
.PP
A set of IPFIX collectors of packet samples generated by OpenFlow \fBsample\fR actions\[char46] This table is used only for IPFIX flow-based sampling, not for per-bridge sampling (see the \fBIPFIX\fR table for a description of the two forms)\[char46]
.SS "Summary:
.TQ 3.00in
\fBid\fR
integer, in range 0 to 4,294,967,295
.TQ 3.00in
\fBbridge\fR
\fBBridge\fR
.TQ 3.00in
\fBipfix\fR
optional \fBIPFIX\fR
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBid\fR: integer, in range 0 to 4,294,967,295"
The ID of this collector set, unique among the bridge\(cqs collector sets, to be used as the \fBcollector_set_id\fR in OpenFlow \fBsample\fR actions\[char46]
.IP "\fBbridge\fR: \fBBridge\fR"
The bridge into which OpenFlow \fBsample\fR actions can be added to send packet samples to this set of IPFIX collectors\[char46]
.IP "\fBipfix\fR: optional \fBIPFIX\fR"
Configuration of the set of IPFIX collectors to send one flow record per sampled packet to\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "AutoAttach TABLE"
.PP
.PP
.PP
Auto Attach configuration within a bridge\[char46] The IETF Auto-Attach SPBM draft standard describes a compact method of using IEEE 802\[char46]1AB Link Layer Discovery Protocol (LLDP) together with a IEEE 802\[char46]1aq Shortest Path Bridging (SPB) network to automatically attach network devices to individual services in a SPB network\[char46] The intent here is to allow network applications and devices using OVS to be able to easily take advantage of features offered by industry standard SPB networks\[char46]
.PP
.PP
Auto Attach (AA) uses LLDP to communicate between a directly connected Auto Attach Client (AAC) and Auto Attach Server (AAS)\[char46] The LLDP protocol is extended to add two new Type-Length-Value tuples (TLVs)\[char46] The first new TLV supports the ongoing discovery of directly connected AA correspondents\[char46] Auto Attach operates by regularly transmitting AA discovery TLVs between the AA client and AA server\[char46] By exchanging these discovery messages, both the AAC and AAS learn the system name and system description of their peer\[char46] In the OVS context, OVS operates as the AA client and the AA server resides on a switch at the edge of the SPB network\[char46]
.PP
.PP
Once AA discovery has been completed the AAC then uses the second new TLV to deliver identifier mappings from the AAC to the AAS\[char46] A primary feature of Auto Attach is to facilitate the mapping of VLANs defined outside the SPB network onto service ids (ISIDs) defined within the SPM network\[char46] By doing so individual external VLANs can be mapped onto specific SPB network services\[char46] These VLAN id to ISID mappings can be configured and managed locally using new options added to the ovs-vsctl command\[char46]
.PP
.PP
The Auto Attach OVS feature does not provide a full implementation of the LLDP protocol\[char46] Support for the mandatory TLVs as defined by the LLDP standard and support for the AA TLV extensions is provided\[char46] LLDP protocol support in OVS can be enabled or disabled on a port by port basis\[char46] LLDP support is disabled by default\[char46]
.SS "Summary:
.TQ 3.00in
\fBsystem_name\fR
string
.TQ 3.00in
\fBsystem_description\fR
string
.TQ 3.00in
\fBmappings\fR
map of integer-integer pairs, key in range 0 to 16,777,215, value in range 0 to 4,095
.SS "Details:
.IP "\fBsystem_name\fR: string"
The system_name string is exported in LLDP messages\[char46] It should uniquely identify the bridge in the network\[char46]
.IP "\fBsystem_description\fR: string"
The system_description string is exported in LLDP messages\[char46] It should describe the type of software and hardware\[char46]
.IP "\fBmappings\fR: map of integer-integer pairs, key in range 0 to 16,777,215, value in range 0 to 4,095"
A mapping from SPB network Individual Service Identifier (ISID) to VLAN id\[char46]
