<html><head><meta charset="UTF-8"></head><body><pre>
vtep-ctl(8)                   Open vSwitch Manual                  vtep-ctl(8)



<b>NAME</b>
       vtep-ctl - utility for querying and configuring a VTEP database

<b>SYNOPSIS</b>
       <b>vtep-ctl</b>  [<u>options</u>]  <b>--</b>  [<u>options</u>] <u>command</u> [<u>args</u>] [<b>--</b> [<u>options</u>] <u>command</u>
       [<u>args</u>]]...

<b>DESCRIPTION</b>
       The <b>vtep-ctl</b> program configures a VTEP database.  See <b>vtep</b>(5) for  com‐
       prehensive documentation of the database schema.

       <b>vtep-ctl</b> connects to an <b>ovsdb-server</b> process that maintains a VTEP con‐
       figuration database.  Using this connection, it  queries  and  possibly
       applies changes to the database, depending on the supplied commands.

       <b>vtep-ctl</b>  can  perform  any  number of commands in a single run, imple‐
       mented as a single atomic transaction against the database.

       The <b>vtep-ctl</b> command line begins with global options (see <b>OPTIONS</b> below
       for details).  The global options are followed by one or more commands.
       Each command should begin with <b>--</b> by itself as a command-line argument,
       to  separate  it from the following commands.  (The <b>--</b> before the first
       command is optional.)  The command itself starts with  command-specific
       options,  if  any, followed by the command name and any arguments.  See
       <b>EXAMPLES</b> below for syntax examples.

<b>OPTIONS</b>
       The following options affect the behavior <b>vtep-ctl</b> as  a  whole.   Some
       individual commands also accept their own options, which are given just
       before the command name.  If the first command on the command line  has
       options,  then  those options must be separated from the global options
       by <b>--</b>.

       <b>--db=</b><u>server</u>
              Sets <u>server</u> as the database server  that  <b>vtep-ctl</b>  contacts  to
              query or modify configuration.  <u>server</u> may be an OVSDB active or
              passive connection method, as described in  <b>ovsdb</b>(7).   The  de‐
              fault is <b>unix:/usr/local/var/run/openvswitch/db.sock</b>.

       <b>--no-syslog</b>
              By  default,  <b>vtep-ctl</b> logs its arguments and the details of any
              changes that it makes to the system log.  This  option  disables
              this logging.

              This option is equivalent to <b>--verbose=vtep_ctl:syslog:warn</b>.

       <b>--oneline</b>
              Modifies  the  output format so that the output for each command
              is printed on a single line.   New-line  characters  that  would
              otherwise separate lines are printed as <b>\n</b>, and any instances of
              <b>\</b> that would otherwise appear in the output are doubled.  Prints
              a  blank  line for each command that has no output.  This option
              does not affect the formatting of output from the <b>list</b>  or  <b>find</b>
              commands; see <b>Table</b> <b>Formatting</b> <b>Options</b> below.

       <b>--dry-run</b>
              Prevents <b>vtep-ctl</b> from actually modifying the database.

       <b>-t</b> <u>secs</u>
       <b>--timeout=</b><u>secs</u>
              By  default,  or  with a <u>secs</u> of <b>0</b>, <b>vtep-ctl</b> waits forever for a
              response from the database.  This option limits runtime  to  ap‐
              proximately <u>secs</u> seconds.  If the timeout expires, <b>vtep-ctl</b> will
              exit with a <b>SIGALRM</b> signal.  (A timeout  would  normally  happen
              only  if  the  database cannot be contacted, or if the system is
              overloaded.)

   <b>Table</b> <b>Formatting</b> <b>Options</b>
       These options control the format of output from the <b>list</b> and <b>find</b>  com‐
       mands.

       <b>-f</b> <u>format</u>
       <b>--format=</b><u>format</u>
              Sets  the type of table formatting.  The following types of <u>for‐</u>
              <u>mat</u> are available:

              <b>table</b>  2-D text tables with aligned columns.

              <b>list</b> (default)
                     A list with one column per line and rows separated  by  a
                     blank line.

              <b>html</b>   HTML tables.

              <b>csv</b>    Comma-separated values as defined in RFC 4180.

              <b>json</b>   JSON  format as defined in RFC 4627.  The output is a se‐
                     quence of JSON objects, each of which corresponds to  one
                     table.   Each  JSON object has the following members with
                     the noted values:

                     <b>caption</b>
                            The table's caption.  This member  is  omitted  if
                            the table has no caption.

                     <b>headings</b>
                            An  array with one element per table column.  Each
                            array element is a string giving the corresponding
                            column's heading.

                     <b>data</b>   An array with one element per table row.  Each el‐
                            ement is also an array with one element per  table
                            column.   The  elements of this second-level array
                            are the cells that constitute  the  table.   Cells
                            that  represent  OVSDB  data or data types are ex‐
                            pressed in the format described in the OVSDB spec‐
                            ification;  other  cells  are  simply expressed as
                            text strings.

       <b>-d</b> <u>format</u>
       <b>--data=</b><u>format</u>
              Sets the formatting for cells within output  tables  unless  the
              table  format  is  set to <b>json</b>, in which case <b>json</b> formatting is
              always used when formatting cells.  The following types of  <u>for‐</u>
              <u>mat</u> are available:

              <b>string</b> (default)
                     The  simple  format described in the <b>Database</b> <b>Values</b> sec‐
                     tion of <b>ovs-vsctl</b>(8).

              <b>bare</b>   The simple format with punctuation stripped off:  <b>[]</b>  and
                     <b>{}</b>  are  omitted  around  sets,  maps, and empty columns,
                     items within  sets  and  maps  are  space-separated,  and
                     strings  are never quoted.  This format may be easier for
                     scripts to parse.

              <b>json</b>   The RFC 4627 JSON format as described above.

       <b>--no-headings</b>
              This option suppresses the heading row that otherwise appears in
              the first row of table output.

       <b>--pretty</b>
              By  default, JSON in output is printed as compactly as possible.
              This option causes JSON in output to be printed in a more  read‐
              able  fashion.   Members  of  objects and elements of arrays are
              printed one per line, with indentation.

              This option does not affect JSON  in  tables,  which  is  always
              printed compactly.

       <b>--bare</b> Equivalent to <b>--format=list</b> <b>--data=bare</b> <b>--no-headings</b>.

       <b>--max-column-width=</b><u>n</u>
              For  table  output  only,  limits the width of any column in the
              output to <u>n</u> columns.  Longer cell data is truncated to  fit,  as
              necessary.  Columns are always wide enough to display the column
              names, if the heading row is printed.

   <b>Public</b> <b>Key</b> <b>Infrastructure</b> <b>Options</b>
       <b>-p</b> <u>privkey.pem</u>
       <b>--private-key=</b><u>privkey.pem</u>
              Specifies  a  PEM  file  containing  the  private  key  used  as
              <b>vtep-ctl</b>'s identity for outgoing SSL connections.

       <b>-c</b> <u>cert.pem</u>
       <b>--certificate=</b><u>cert.pem</u>
              Specifies a PEM file containing a certificate that certifies the
              private key specified on <b>-p</b> or <b>--private-key</b> to be  trustworthy.
              The certificate must be signed by the certificate authority (CA)
              that the peer in SSL connections will use to verify it.

       <b>-C</b> <u>cacert.pem</u>
       <b>--ca-cert=</b><u>cacert.pem</u>
              Specifies a PEM file containing the CA certificate that <b>vtep-ctl</b>
              should  use to verify certificates presented to it by SSL peers.
              (This may be the same certificate that SSL peers use  to  verify
              the certificate specified on <b>-c</b> or <b>--certificate</b>, or it may be a
              different one, depending on the PKI design in use.)

       <b>-C</b> <b>none</b>
       <b>--ca-cert=none</b>
              Disables verification of certificates presented  by  SSL  peers.
              This  introduces a security risk, because it means that certifi‐
              cates cannot be verified to be those of known trusted hosts.

       <b>--bootstrap-ca-cert=</b><u>cacert.pem</u>
              When <u>cacert.pem</u> exists, this option has the same effect as <b>-C</b> or
              <b>--ca-cert</b>.   If it does not exist, then <b>vtep-ctl</b> will attempt to
              obtain the CA certificate from the SSL peer  on  its  first  SSL
              connection and save it to the named PEM file.  If it is success‐
              ful, it will immediately drop the connection and reconnect,  and
              from then on all SSL connections must be authenticated by a cer‐
              tificate signed by the CA certificate thus obtained.

              <b>This</b> <b>option</b> <b>exposes</b> <b>the</b> <b>SSL</b> <b>connection</b>  <b>to</b>  <b>a</b>  <b>man-in-the-middle</b>
              <b>attack</b>  <b>obtaining</b> <b>the</b> <b>initial</b> <b>CA</b> <b>certificate</b>, but it may be use‐
              ful for bootstrapping.

              This option is only useful if the SSL peer sends its CA certifi‐
              cate  as  part  of  the SSL certificate chain.  The SSL protocol
              does not require the server to send the CA certificate.

              This option is mutually exclusive with <b>-C</b> and <b>--ca-cert</b>.

       <b>--peer-ca-cert=</b><u>peer-cacert.pem</u>
              Specifies a PEM file that contains one or more  additional  cer‐
              tificates  to  send to SSL peers.  <u>peer-cacert.pem</u> should be the
              CA certificate used to sign <b>vtep-ctl</b>'s own certificate, that is,
              the certificate specified on <b>-c</b> or <b>--certificate</b>.  If <b>vtep-ctl</b>'s
              certificate   is    self-signed,    then    <b>--certificate</b>    and
              <b>--peer-ca-cert</b> should specify the same file.

              This  option  is not useful in normal operation, because the SSL
              peer must already have the CA certificate for the peer  to  have
              any  confidence  in <b>vtep-ctl</b>'s identity.  However, this offers a
              way for a new installation to bootstrap the  CA  certificate  on
              its first SSL connection.

       <b>-v</b>[<u>spec</u>]
       <b>--verbose=</b>[<u>spec</u>]
              Sets  logging  levels.  Without any <u>spec</u>, sets the log level for
              every module and destination to <b>dbg</b>.  Otherwise, <u>spec</u> is a  list
              of words separated by spaces or commas or colons, up to one from
              each category below:

              •      A valid module name, as displayed by the  <b>vlog/list</b>  com‐
                     mand on <b>ovs-appctl</b>(8), limits the log level change to the
                     specified module.

              •      <b>syslog</b>, <b>console</b>, or <b>file</b>, to limit the log  level  change
                     to  only to the system log, to the console, or to a file,
                     respectively.  (If <b>--detach</b> is specified, <b>vtep-ctl</b> closes
                     its  standard file descriptors, so logging to the console
                     will have no effect.)

                     On Windows platform, <b>syslog</b> is accepted as a word and  is
                     only  useful  along  with the <b>--syslog-target</b> option (the
                     word has no effect otherwise).

              •      <b>off</b>, <b>emer</b>, <b>err</b>, <b>warn</b>, <b>info</b>, or <b>dbg</b>, to  control  the  log
                     level.   Messages of the given severity or higher will be
                     logged, and messages of lower severity will  be  filtered
                     out.   <b>off</b>  filters  out all messages.  See <b>ovs-appctl</b>(8)
                     for a definition of each log level.

              Case is not significant within <u>spec</u>.

              Regardless of the log levels set for <b>file</b>,  logging  to  a  file
              will not take place unless <b>--log-file</b> is also specified (see be‐
              low).

              For compatibility with older versions of OVS, <b>any</b> is accepted as
              a word but has no effect.

       <b>-v</b>
       <b>--verbose</b>
              Sets  the  maximum logging verbosity level, equivalent to <b>--ver‐</b>
              <b>bose=dbg</b>.

       <b>-vPATTERN:</b><u>destination</u><b>:</b><u>pattern</u>
       <b>--verbose=PATTERN:</b><u>destination</u><b>:</b><u>pattern</u>
              Sets the log pattern  for  <u>destination</u>  to  <u>pattern</u>.   Refer  to
              <b>ovs-appctl</b>(8) for a description of the valid syntax for <u>pattern</u>.

       <b>-vFACILITY:</b><u>facility</u>
       <b>--verbose=FACILITY:</b><u>facility</u>
              Sets  the  RFC5424  facility of the log message. <u>facility</u> can be
              one of <b>kern</b>, <b>user</b>, <b>mail</b>, <b>daemon</b>, <b>auth</b>, <b>syslog</b>, <b>lpr</b>, <b>news</b>,  <b>uucp</b>,
              <b>clock</b>,  <b>ftp</b>,  <b>ntp</b>, <b>audit</b>, <b>alert</b>, <b>clock2</b>, <b>local0</b>, <b>local1</b>, <b>local2</b>,
              <b>local3</b>, <b>local4</b>, <b>local5</b>, <b>local6</b> or <b>local7</b>. If this option is  not
              specified,  <b>daemon</b>  is  used as the default for the local system
              syslog and <b>local0</b> is used while sending a message to the  target
              provided via the <b>--syslog-target</b> option.

       <b>--log-file</b>[<b>=</b><u>file</u>]
              Enables  logging  to  a  file.  If <u>file</u> is specified, then it is
              used as the exact name for the log file.  The default  log  file
              name   used  if  <u>file</u>  is  omitted  is  <b>/usr/local/var/log/open‐</b>
              <b>vswitch/vtep-ctl.log</b>.

       <b>--syslog-target=</b><u>host</u><b>:</b><u>port</u>
              Send syslog messages to UDP <u>port</u> on <u>host</u>,  in  addition  to  the
              system  syslog.   The <u>host</u> must be a numerical IP address, not a
              hostname.

       <b>--syslog-method=</b><u>method</u>
              Specify <u>method</u> how syslog messages should be sent to syslog dae‐
              mon.  Following forms are supported:

              •      <b>libc</b>, use libc <b>syslog()</b> function.  Downside of using this
                     options is that libc adds fixed prefix to  every  message
                     before  it  is  actually  sent  to the syslog daemon over
                     <b>/dev/log</b> UNIX domain socket.

              •      <b>unix:</b><u>file</u>, use UNIX domain socket directly.  It is possi‐
                     ble to specify arbitrary message format with this option.
                     However, <b>rsyslogd</b> <b>8.9</b> and older versions use  hard  coded
                     parser  function  anyway  that  limits UNIX domain socket
                     use.  If you want to use arbitrary  message  format  with
                     older <b>rsyslogd</b> versions, then use UDP socket to localhost
                     IP address instead.

              •      <b>udp:</b><u>ip</u>:<u>port</u>, use UDP socket.  With this method it is pos‐
                     sible  to  use  arbitrary  message format also with older
                     <b>rsyslogd</b>.  When sending syslog messages over  UDP  socket
                     extra  precaution needs to be taken into account, for ex‐
                     ample, syslog daemon needs to be configured to listen  on
                     the  specified  UDP port, accidental iptables rules could
                     be interfering with local syslog traffic  and  there  are
                     some  security  considerations that apply to UDP sockets,
                     but do not apply to UNIX domain sockets.

              •      <b>null</b>, discards all messages logged to syslog.

              The default is  taken  from  the  <b>OVS_SYSLOG_METHOD</b>  environment
              variable; if it is unset, the default is <b>libc</b>.

       <b>-h</b>
       <b>--help</b> Prints a brief help message to the console.

       <b>-V</b>
       <b>--version</b>
              Prints version information to the console.

<b>COMMANDS</b>
       The  commands implemented by <b>vtep-ctl</b> are described in the sections be‐
       low.

   <b>Physical</b> <b>Switch</b> <b>Commands</b>
       These commands examine and manipulate physical switches.

       [<b>--may-exist</b>] <b>add-ps</b> <u>pswitch</u>
              Creates a new physical  switch  named  <u>pswitch</u>.   Initially  the
              switch will have no ports.

              Without  <b>--may-exist</b>,  attempting to create a switch that exists
              is an error.  With <b>--may-exist</b>, this  command  does  nothing  if
              <u>pswitch</u> already exists.

       [<b>--if-exists</b>] <b>del-ps</b> <u>pswitch</u>
              Deletes <u>pswitch</u> and all of its ports.

              Without <b>--if-exists</b>, attempting to delete a switch that does not
              exist is an error.  With <b>--if-exists</b>,  attempting  to  delete  a
              switch that does not exist has no effect.

       <b>list-ps</b>
              Lists all existing physical switches on standard output, one per
              line.

       <b>ps-exists</b> <u>pswitch</u>
              Tests whether <u>pswitch</u> exists.  If so,  <b>vtep-ctl</b>  exits  success‐
              fully  with  exit code 0.  If not, <b>vtep-ctl</b> exits unsuccessfully
              with exit code 2.

   <b>Port</b> <b>Commands</b>
       These commands examine and manipulate VTEP physical ports.

       <b>list-ports</b> <u>pswitch</u>
              Lists all of the ports within <u>pswitch</u> on  standard  output,  one
              per line.

       [<b>--may-exist</b>] <b>add-port</b> <u>pswitch</u> <u>port</u>
              Creates on <u>pswitch</u> a new port named <u>port</u> from the network device
              of the same name.

              Without <b>--may-exist</b>, attempting to create a port that exists  is
              an  error.   With <b>--may-exist</b>, this command does nothing if <u>port</u>
              already exists on <u>pswitch</u>.

       [<b>--if-exists</b>] <b>del-port</b> [<u>pswitch</u>] <u>port</u>
              Deletes <u>port</u>.  If <u>pswitch</u> is omitted, <u>port</u> is removed from what‐
              ever switch contains it; if <u>pswitch</u> is specified, it must be the
              switch that contains <u>port</u>.

              Without <b>--if-exists</b>, attempting to delete a port that  does  not
              exist  is  an  error.   With <b>--if-exists</b>, attempting to delete a
              port that does not exist has no effect.

   <b>Logical</b> <b>Switch</b> <b>Commands</b>
       These commands examine and manipulate logical switches.

       [<b>--may-exist</b>] <b>add-ls</b> <u>lswitch</u>
              Creates a new  logical  switch  named  <u>lswitch</u>.   Initially  the
              switch will have no locator bindings.

              Without  <b>--may-exist</b>,  attempting to create a switch that exists
              is an error.  With <b>--may-exist</b>, this  command  does  nothing  if
              <u>lswitch</u> already exists.

       [<b>--if-exists</b>] <b>del-ls</b> <u>lswitch</u>
              Deletes <u>lswitch</u>.

              Without <b>--if-exists</b>, attempting to delete a switch that does not
              exist is an error.  With <b>--if-exists</b>,  attempting  to  delete  a
              switch that does not exist has no effect.

       <b>list-ls</b>
              Lists  all existing logical switches on standard output, one per
              line.

       <b>ls-exists</b> <u>lswitch</u>
              Tests whether <u>lswitch</u> exists.  If so,  <b>vtep-ctl</b>  exits  success‐
              fully  with  exit code 0.  If not, <b>vtep-ctl</b> exits unsuccessfully
              with exit code 2.

       <b>bind-ls</b> <u>pswitch</u> <u>port</u> <u>vlan</u> <u>lswitch</u>
              Bind logical switch <u>lswitch</u> to the <u>port</u>/<u>vlan</u> combination on  the
              physical switch <u>pswitch</u>.

       <b>unbind-ls</b> <u>pswitch</u> <u>port</u> <u>vlan</u>
              Remove the logical switch binding from the <u>port</u>/<u>vlan</u> combination
              on the physical switch <u>pswitch</u>.

       <b>list-bindings</b> <u>pswitch</u> <u>port</u>
              List the logical switch bindings for <u>port</u> on the physical switch
              <u>pswitch</u>.

       <b>set-replication-mode</b> <u>lswitch</u> <u>replication-mode</u>
              Set logical switch <u>lswitch</u> replication mode to <u>replication-mode</u>;
              the only valid values for replication  mode  are  "service_node"
              and "source_node".  For handling L2 broadcast, multicast and un‐
              known unicast traffic, packets can be sent to all members  of  a
              logical  switch referenced by a physical switch.  There are dif‐
              ferent modes to replicate the  packets.   The  default  mode  of
              replication  is to send the traffic to a service node, which can
              be a hypervisor, server or appliance, and let the  service  node
              handle  replication  to  other  transport  nodes (hypervisors or
              other VTEP physical switches).  This mode is called service node
              replication.   An  alternate  mode of replication, called source
              node replication involves the source node sending to  all  other
              transport  nodes.   Hypervisors are always responsible for doing
              their own replication for locally attached VMs  in  both  modes.
              Service node mode is the default, if the replication mode is not
              explicitly set.  Service node replication mode is  considered  a
              basic requirement because it only requires sending the packet to
              a single transport node.

       <b>get-replication-mode</b> <u>lswitch</u>
              Get logical switch <u>lswitch</u> replication  mode.   The  only  valid
              values    for    replication   mode   are   "service_node"   and
              "source_node".  An empty reply for replication  mode  implies  a
              default of "service_node".

   <b>Logical</b> <b>Router</b> <b>Commands</b>
       These commands examine and manipulate logical routers.

       [<b>--may-exist</b>] <b>add-lr</b> <u>lrouter</u>
              Creates a new logical router named <u>lrouter</u>.

              Without  <b>--may-exist</b>,  attempting to create a router that exists
              is an error.  With <b>--may-exist</b>, this  command  does  nothing  if
              <u>lrouter</u> already exists.

       [<b>--if-exists</b>] <b>del-lr</b> <u>lrouter</u>
              Deletes <u>lrouter</u>.

              Without <b>--if-exists</b>, attempting to delete a router that does not
              exist is an error.  With <b>--if-exists</b>,  attempting  to  delete  a
              router that does not exist has no effect.

       <b>list-lr</b>
              Lists  all  existing logical routers on standard output, one per
              line.

       <b>lr-exists</b> <u>lrouter</u>
              Tests whether <u>lrouter</u> exists.  If so,  <b>vtep-ctl</b>  exits  success‐
              fully  with  exit code 0.  If not, <b>vtep-ctl</b> exits unsuccessfully
              with exit code 2.


   <b>Local</b> <b>MAC</b> <b>Binding</b> <b>Commands</b>
       These commands examine and manipulate local MAC bindings for the  logi‐
       cal switch.  The local maps are written by the VTEP to refer to MACs it
       has learned on its physical ports.

       <b>add-ucast-local</b> <u>lswitch</u> <u>mac</u> [<u>encap</u>] <u>ip</u>
              Map the unicast Ethernet address <u>mac</u> to the physical location <u>ip</u>
              using  encapsulation  <u>encap</u>  on <u>lswitch</u>.  If <u>encap</u> is not speci‐
              fied, the default is "vxlan_over_ipv4".  The local mappings  are
              used by the VTEP to refer to MACs learned on its physical ports.

       <b>del-ucast-local</b> <u>lswitch</u> <u>mac</u>
              Remove  the local unicast Ethernet address <u>mac</u> map from <u>lswitch</u>.
              The local mappings are used by the VTEP to refer to MACs learned
              on its physical ports.

       <b>add-mcast-local</b> <u>lswitch</u> <u>mac</u> [<u>encap</u>] <u>ip</u>
              Add  physical location <u>ip</u> using encapsulation <u>encap</u> to the local
              mac binding table for multicast Ethernet address <u>mac</u> on <u>lswitch</u>.
              If  <u>encap</u>  is  not  specified, the default is "vxlan_over_ipv4".
              The local mappings are used by the VTEP to refer to MACs learned
              on its physical ports.

       <b>del-mcast-local</b> <u>lswitch</u> <u>mac</u> [<u>encap</u>] <u>ip</u>
              Remove  physical  location <u>ip</u> using encapsulation <u>encap</u> from the
              local mac binding table for multicast Ethernet  address  <u>mac</u>  on
              <u>lswitch</u>.    If   <u>encap</u>   is   not   specified,  the  default  is
              "vxlan_over_ipv4".  The local mappings are used by the  VTEP  to
              refer to MACs learned on its physical ports.

       <b>clear-local-macs</b> <u>lswitch</u>
              Clear the local MAC bindings for <u>lswitch</u>.

       <b>list-local-macs</b> <u>lswitch</u>
              List the local MAC bindings for <u>lswitch</u>, one per line.

   <b>Remote</b> <b>MAC</b> <b>Binding</b> <b>Commands</b>
       These commands examine and manipulate local and remote MAC bindings for
       the logical switch.  The remote maps are written by the network  virtu‐
       alization controller to refer to MACs that it has learned.

       <b>add-ucast-remote</b> <u>lswitch</u> <u>mac</u> [<u>encap</u>] <u>ip</u>
              Map the unicast Ethernet address <u>mac</u> to the physical location <u>ip</u>
              using encapsulation <u>encap</u> on <u>lswitch</u>.  If <u>encap</u>  is  not  speci‐
              fied, the default is "vxlan_over_ipv4".  The remote mappings are
              used by the network virtualization platform  to  refer  to  MACs
              that it has learned.

       <b>del-ucast-remote</b> <u>lswitch</u> <u>mac</u>
              Remove the remote unicast Ethernet address <u>mac</u> map from <u>lswitch</u>.
              The remote mappings are used by the network virtualization plat‐
              form to refer to MACs that it has learned.

       <b>add-mcast-remote</b> <u>lswitch</u> <u>mac</u> [<u>encap</u>] <u>ip</u>
              Add physical location <u>ip</u> using encapsulation <u>encap</u> to the remote
              mac binding table for multicast Ethernet address <u>mac</u> on <u>lswitch</u>.
              If  <u>encap</u>  is  not  specified, the default is "vxlan_over_ipv4".
              The remote mappings are used by the network virtualization plat‐
              form to refer to MACs that it has learned.

       <b>del-mcast-remote</b> <u>lswitch</u> <u>mac</u> [<u>encap</u>] <u>ip</u>
              Remove  physical  location <u>ip</u> using encapsulation <u>encap</u> from the
              remote mac binding table for multicast Ethernet address  <u>mac</u>  on
              <u>lswitch</u>.    If   <u>encap</u>   is   not   specified,  the  default  is
              "vxlan_over_ipv4".  The remote mappings are used by the  network
              virtualization platform to refer to MACs that it has learned.

       <b>clear-remote-macs</b> <u>lswitch</u>
              Clear the remote MAC bindings for <u>lswitch</u>.

       <b>list-remote-macs</b> <u>lswitch</u>
              List the remote MAC bindings for <u>lswitch</u>, one per line.

   <b>Manager</b> <b>Connectivity</b>
       These  commands  manipulate the <b>managers</b> column in the <b>Global</b> table and
       rows in the <b>Managers</b> table.  When <b>ovsdb-server</b> is configured to use the
       <b>managers</b>  column  for  OVSDB  connections  (as described in the startup
       scripts provided with Open vSwitch), this allows the  administrator  to
       use <b>vtep-ctl</b> to configure database connections.

       <b>get-manager</b>
              Prints the configured manager(s).

       <b>del-manager</b>
              Deletes the configured manager(s).

       <b>set-manager</b> <u>target</u>...
              Sets  the configured manager target or targets.  Each <u>target</u> may
              be an OVSDB active or passive connection method, e.g. <b>pssl:6640</b>,
              as described in <b>ovsdb</b>(7).

   <b>Database</b> <b>Commands</b>
       These commands query and modify the contents of <b>ovsdb</b> tables.  They are
       a slight abstraction of the <b>ovsdb</b> interface and as such they operate at
       a lower level than other <b>vtep-ctl</b> commands.

     <u>Identifying</u> <u>Tables,</u> <u>Records,</u> <u>and</u> <u>Columns</u>

       Each of these commands has a <u>table</u> parameter to identify a table within
       the database.  Many of them also take a <u>record</u> parameter  that  identi‐
       fies  a  particular record within a table.  The <u>record</u> parameter may be
       the UUID for a record, and many tables offer additional ways  to  iden‐
       tify  records.  Some commands also take <u>column</u> parameters that identify
       a particular field within the records in a table.

       The following tables are currently defined:

       <b>Global</b> Top-level configuration for a hardware VTEP.   This  table  con‐
              tains  exactly  one  record,  identified  by specifying <b>.</b> as the
              record name.

       <b>Manager</b>
              Configuration for an OVSDB connection.  Records may  be  identi‐
              fied by target (e.g. <b>tcp:1.2.3.4</b>).

       <b>Physical_Switch</b>
              A  physical switch that implements a VTEP.  Records may be iden‐
              tified by physical switch name.

       <b>Physical_Port</b>
              A port within a physical switch.

       <b>Logical_Binding_Stats</b>
              Reports statistics for the logical switch with which a VLAN on a
              physical port is associated.

       <b>Logical_Switch</b>
              A logical Ethernet switch.  Records may be identified by logical
              switch name.

       <b>Ucast_Macs_Local</b>
              Mapping of locally discovered unicast MAC addresses to tunnels.

       <b>Ucast_Macs_Remote</b>
              Mapping of remotely programmed unicast MAC addresses to tunnels.

       <b>Mcast_Macs_Local</b>
              Mapping of locally discovered multicast MAC  addresses  to  tun‐
              nels.

       <b>Mcast_Macs_Remote</b>
              Mapping  of  remotely programmed multicast MAC addresses to tun‐
              nels.

       <b>Physical_Locator_Set</b>
              A set of one or more physical locators.

       <b>Physical_Locator</b>
              Identifies an endpoint to which logical switch  traffic  may  be
              encapsulated and forwarded.  Records may be identified by physi‐
              cal locator name.

       Record names must be specified in full and with correct capitalization,
       except  that  UUIDs  may  be abbreviated to their first 4 (or more) hex
       digits, as long as that is unique within the table.   Names  of  tables
       and  columns  are  not  case-sensitive,  and <b>-</b> and <b>_</b> are treated inter‐
       changeably.  Unique abbreviations of table and column names are accept‐
       able, e.g. <b>man</b> or <b>m</b> is sufficient to identify the <b>Manager</b> table.

     <u>Database</u> <u>Values</u>

       Each  column  in  the  database accepts a fixed type of data.  The cur‐
       rently defined basic types, and their representations, are:

       integer
              A decimal integer in the range -2**63 to 2**63-1, inclusive.

       real   A floating-point number.

       Boolean
              True or false, written <b>true</b> or <b>false</b>, respectively.

       string An arbitrary Unicode string, except that null bytes are not  al‐
              lowed.   Quotes are optional for most strings that begin with an
              English letter or underscore and consist only of letters, under‐
              scores,  hyphens,  and  periods.   However,  <b>true</b>  and <b>false</b> and
              strings that match the syntax of UUIDs (see below) must  be  en‐
              closed  in  double  quotes  to distinguish them from other basic
              types.  When double quotes are  used,  the  syntax  is  that  of
              strings  in JSON, e.g. backslashes may be used to escape special
              characters.  The empty string must be represented as a  pair  of
              double quotes (<b>""</b>).

       UUID   Either a universally unique identifier in the style of RFC 4122,
              e.g. <b>f81d4fae-7dec-11d0-a765-00a0c91e6bf6</b>, or an  <b>@</b><u>name</u>  defined
              by a <b>get</b> or <b>create</b> command within the same <b>vtep-ctl</b> invocation.

       Multiple values in a single column may be separated by spaces or a sin‐
       gle comma.  When multiple values are present, duplicates  are  not  al‐
       lowed,  and  order is not important.  Conversely, some database columns
       can have an empty set of values, represented as <b>[]</b>, and square brackets
       may  optionally  enclose other non-empty sets or single values as well.
       For a column accepting a set of integers, database  commands  accept  a
       range.  A  range is represented by two integers separated by <b>-</b>. A range
       is inclusive. A range has a maximum size of 4096 elements. If more ele‐
       ments are needed, they can be specified in seperate ranges.

       A  few  database columns are ``maps'' of key-value pairs, where the key
       and the value are each some fixed database type.  These  are  specified
       in  the  form  <u>key</u><b>=</b><u>value</u>, where <u>key</u> and <u>value</u> follow the syntax for the
       column's key type and value type, respectively.   When  multiple  pairs
       are  present  (separated  by spaces or a comma), duplicate keys are not
       allowed, and again the order is not important.   Duplicate  values  are
       allowed.   An empty map is represented as <b>{}</b>.  Curly braces may option‐
       ally enclose non-empty maps as well (but  use  quotes  to  prevent  the
       shell   from  expanding  <b>other-config={0=x,1=y}</b>  into  <b>other-config=0=x</b>
       <b>other-config=1=y</b>, which may not have the desired effect).

     <u>Database</u> <u>Command</u> <u>Syntax</u>

       [<b>--if-exists</b>] [<b>--columns=</b><u>column</u>[<b>,</b><u>column</u>]...] <b>list</b> <u>table</u> [<u>record</u>]...
              Lists the data in each specified  <u>record</u>.   If  no  records  are
              specified, lists all the records in <u>table</u>.

              If  <b>--columns</b>  is  specified,  only  the  requested  columns are
              listed, in the specified  order.   Otherwise,  all  columns  are
              listed, in alphabetical order by column name.

              Without <b>--if-exists</b>, it is an error if any specified <u>record</u> does
              not exist.  With <b>--if-exists</b>, the  command  ignores  any  <u>record</u>
              that does not exist, without producing any output.

       [<b>--columns=</b><u>column</u>[<b>,</b><u>column</u>]...] <b>find</b> <u>table</u> [<u>column</u>[<b>:</b><u>key</u>]<b>=</b><u>value</u>]...
              Lists the data in each record in <u>table</u> whose <u>column</u> equals <u>value</u>
              or, if <u>key</u> is specified, whose <u>column</u> contains a  <u>key</u>  with  the
              specified <u>value</u>.  The following operators may be used where <b>=</b> is
              written in the syntax summary:

              <b>=</b> <b>!=</b> <b>&lt;</b> <b>&gt;</b> <b>&lt;=</b> <b>&gt;=</b>
                     Selects records in which <u>column</u>[<b>:</b><u>key</u>]  equals,  does  not
                     equal,  is  less  than,  is greater than, is less than or
                     equal to, or is greater than or equal to  <u>value</u>,  respec‐
                     tively.

                     Consider  <u>column</u>[<b>:</b><u>key</u>]  and  <u>value</u>  as  sets of elements.
                     Identical sets are considered equal.  Otherwise,  if  the
                     sets  have  different  numbers  of elements, then the set
                     with more elements is considered to  be  larger.   Other‐
                     wise,  consider  a element from each set pairwise, in in‐
                     creasing order within each set.  The first pair that dif‐
                     fers  determines the result.  (For a column that contains
                     key-value pairs, first all the  keys  are  compared,  and
                     values  are considered only if the two sets contain iden‐
                     tical keys.)

              <b>{=}</b> <b>{!=}</b>
                     Test for set equality or inequality, respectively.

              <b>{&lt;=}</b>   Selects records in which  <u>column</u>[<b>:</b><u>key</u>]  is  a  subset  of
                     <u>value</u>.   For  example, <b>flood-vlans{&lt;=}1,2</b> selects records
                     in which the <b>flood-vlans</b> column is the empty set or  con‐
                     tains 1 or 2 or both.

              <b>{&lt;}</b>    Selects  records in which <u>column</u>[<b>:</b><u>key</u>] is a proper subset
                     of <u>value</u>.  For example, <b>flood-vlans{&lt;}1,2</b> selects records
                     in  which the <b>flood-vlans</b> column is the empty set or con‐
                     tains 1 or 2 but not both.

              <b>{&gt;=}</b> <b>{&gt;}</b>
                     Same as <b>{&lt;=}</b> and <b>{&lt;}</b>, respectively, except that the rela‐
                     tionship  is  reversed.   For example, <b>flood-vlans{&gt;=}1,2</b>
                     selects records in which the <b>flood-vlans</b> column  contains
                     both 1 and 2.

              The  following operators are available only in Open vSwitch 2.16
              and later:

              <b>{in}</b>   Selects records in which every element in <u>column</u>[<b>:</b><u>key</u>] is
                     also in <u>value</u>.  (This is the same as <b>{&lt;=}</b>.)

              <b>{not-in}</b>
                     Selects records in which every element in <u>column</u>[<b>:</b><u>key</u>] is
                     not in <u>value</u>.

              For arithmetic operators (<b>=</b> <b>!=</b> <b>&lt;</b> <b>&gt;</b> <b>&lt;=</b> <b>&gt;=</b>), when <u>key</u> is specified
              but  a  particular  record's  <u>column</u>  does  not contain <u>key</u>, the
              record is always omitted from the results.  Thus, the  condition
              <b>other-config:mtu!=1500</b> matches records that have a <b>mtu</b> key whose
              value is not 1500, but not those that lack an <b>mtu</b> key.

              For the set operators, when <u>key</u> is specified  but  a  particular
              record's  <u>column</u>  does  not  contain <u>key</u>, the comparison is done
              against  an  empty  set.    Thus,   the   condition   <b>other-con‐</b>
              <b>fig:mtu{!=}1500</b>  matches records that have a <b>mtu</b> key whose value
              is not 1500 and those that lack an <b>mtu</b> key.

              Don't forget to escape <b>&lt;</b> or <b>&gt;</b> from interpretation by the shell.

              If <b>--columns</b>  is  specified,  only  the  requested  columns  are
              listed,  in  the  specified  order.   Otherwise  all columns are
              listed, in alphabetical order by column name.

              The UUIDs shown for rows created in the same <b>vtep-ctl</b> invocation
              will be wrong.

       [<b>--if-exists</b>] [<b>--id=@</b><u>name</u>] <b>get</b> <u>table</u> <u>record</u> [<u>column</u>[<b>:</b><u>key</u>]]...
              Prints the value of each specified <u>column</u> in the given <u>record</u> in
              <u>table</u>.  For map columns, a <u>key</u> may optionally be  specified,  in
              which  case  the  value  associated  with  <u>key</u>  in the column is
              printed, instead of the entire map.

              Without <b>--if-exists</b>, it is an error if <u>record</u> does not exist  or
              <u>key</u>  is  specified,  if  <u>key</u>  does  not  exist  in <u>record</u>.  With
              <b>--if-exists</b>, a missing <u>record</u> yields no output and a missing <u>key</u>
              prints a blank line.

              If  <b>@</b><u>name</u> is specified, then the UUID for <u>record</u> may be referred
              to by that name later in the same <b>vtep-ctl</b>  invocation  in  con‐
              texts where a UUID is expected.

              Both  <b>--id</b> and the <u>column</u> arguments are optional, but usually at
              least one or the other should be specified.  If both  are  omit‐
              ted,  then <b>get</b> has no effect except to verify that <u>record</u> exists
              in <u>table</u>.

              <b>--id</b> and <b>--if-exists</b> cannot be used together.

       [<b>--if-exists</b>] <b>set</b> <u>table</u> <u>record</u> <u>column</u>[<b>:</b><u>key</u>]<b>=</b><u>value</u>...
              Sets the value of each specified <u>column</u> in the given  <u>record</u>  in
              <u>table</u> to <u>value</u>.  For map columns, a <u>key</u> may optionally be speci‐
              fied, in which case the value associated with <u>key</u> in that column
              is  changed  (or  added,  if none exists), instead of the entire
              map.

              Without <b>--if-exists</b>, it is an error if <u>record</u>  does  not  exist.
              With  <b>--if-exists</b>,  this command does nothing if <u>record</u> does not
              exist.

       [<b>--if-exists</b>] <b>add</b> <u>table</u> <u>record</u> <u>column</u> [<u>key</u><b>=</b>]<u>value</u>...
              Adds the specified value or key-value pair to <u>column</u>  in  <u>record</u>
              in  <u>table</u>.   If <u>column</u> is a map, then <u>key</u> is required, otherwise
              it is prohibited.  If <u>key</u> already exists in a map  column,  then
              the  current  <u>value</u>  is not replaced (use the <b>set</b> command to re‐
              place an existing value).

              Without <b>--if-exists</b>, it is an error if <u>record</u>  does  not  exist.
              With  <b>--if-exists</b>,  this command does nothing if <u>record</u> does not
              exist.

       [<b>--if-exists</b>] <b>remove</b> <u>table</u> <u>record</u> <u>column</u> <u>value</u>...
       [<b>--if-exists</b>] <b>remove</b> <u>table</u> <u>record</u> <u>column</u> <u>key</u>...
       [<b>--if-exists</b>] <b>remove</b> <u>table</u> <u>record</u> <u>column</u> <u>key</u><b>=</b><u>value</u>...
              Removes the specified values or key-value pairs from  <u>column</u>  in
              <u>record</u> in <u>table</u>.  The first form applies to columns that are not
              maps: each specified <u>value</u> is removed from the column.  The sec‐
              ond and third forms apply to map columns: if only a <u>key</u> is spec‐
              ified, then any key-value pair with the given  <u>key</u>  is  removed,
              regardless  of its value; if a <u>value</u> is given then a pair is re‐
              moved only if both key and value match.

              It is not an error if the column does not contain the  specified
              key or value or pair.

              Without  <b>--if-exists</b>,  it  is an error if <u>record</u> does not exist.
              With <b>--if-exists</b>, this command does nothing if <u>record</u>  does  not
              exist.

       [<b>--if-exists</b>] <b>clear</b> <u>table</u> <u>record</u> <u>column</u>...
              Sets  each  <u>column</u>  in <u>record</u> in <u>table</u> to the empty set or empty
              map, as appropriate.  This command applies only to columns  that
              are allowed to be empty.

              Without  <b>--if-exists</b>,  it  is an error if <u>record</u> does not exist.
              With <b>--if-exists</b>, this command does nothing if <u>record</u>  does  not
              exist.

       [<b>--id=@</b><u>name</u>] <b>create</b> <u>table</u> <u>column</u>[<b>:</b><u>key</u>]<b>=</b><u>value</u>...
              Creates  a  new  record  in <u>table</u> and sets the initial values of
              each <u>column</u>.  Columns not explicitly set will receive their  de‐
              fault values.  Outputs the UUID of the new row.

              If  <b>@</b><u>name</u> is specified, then the UUID for the new row may be re‐
              ferred to by that name elsewhere in the same <b>vtep-ctl</b> invocation
              in  contexts where a UUID is expected.  Such references may pre‐
              cede or follow the <b>create</b> command.

              Caution (ovs-vsctl as example)
                     Records in the Open vSwitch database are significant only
                     when  they can be reached directly or indirectly from the
                     <b>Open_vSwitch</b> table.  Except for records  in  the  <b>QoS</b>  or
                     <b>Queue</b>  tables,  records  that  are not reachable from the
                     <b>Open_vSwitch</b> table are  automatically  deleted  from  the
                     database.   This  deletion  happens  immediately, without
                     waiting for additional <b>ovs-vsctl</b> commands or other  data‐
                     base  activity.  Thus, a <b>create</b> command must generally be
                     accompanied  by  additional  commands  <u>within</u>  <u>the</u>   <u>same</u>
                     <b>ovs-vsctl</b>  <u>invocation</u> to add a chain of references to the
                     newly created  record  from  the  top-level  <b>Open_vSwitch</b>
                     record.   The  <b>EXAMPLES</b>  section gives some examples that
                     show how to do this.

       [<b>--if-exists</b>] <b>destroy</b> <u>table</u> <u>record</u>...
              Deletes each specified <u>record</u> from <u>table</u>.  Unless <b>--if-exists</b> is
              specified, each <u>record</u>s must exist.

       <b>--all</b> <b>destroy</b> <u>table</u>
              Deletes all records from the <u>table</u>.

              Caution (ovs-vsctl as example)
                     The <b>destroy</b> command is only useful for records in the <b>QoS</b>
                     or <b>Queue</b> tables.  Records in other tables  are  automati‐
                     cally deleted from the database when they become unreach‐
                     able from the <b>Open_vSwitch</b> table.  This means that delet‐
                     ing  the  last  reference  to  a record is sufficient for
                     deleting the record itself.  For records in these tables,
                     <b>destroy</b>  is  silently  ignored.  See the <b>EXAMPLES</b> section
                     below for more information.

       <b>wait-until</b> <u>table</u> <u>record</u> [<u>column</u>[<b>:</b><u>key</u>]<b>=</b><u>value</u>]...
              Waits until <u>table</u> contains a record named  <u>record</u>  whose  <u>column</u>
              equals  <u>value</u>  or,  if <u>key</u> is specified, whose <u>column</u> contains a
              <u>key</u> with the specified <u>value</u>.  This command  supports  the  same
              operators and semantics described for the <b>find</b> command above.

              If no <u>column</u>[<b>:</b><u>key</u>]<b>=</b><u>value</u> arguments are given, this command waits
              only until <u>record</u> exists.  If more than  one  such  argument  is
              given, the command waits until all of them are satisfied.

              Caution (ovs-vsctl as example)
                     Usually <b>wait-until</b> should be placed at the beginning of a
                     set  of  <b>ovs-vsctl</b>  commands.   For  example,  <b>wait-until</b>
                     <b>bridge</b>  <b>br0</b>  <b>--</b>  <b>get</b> <b>bridge</b> <b>br0</b> <b>datapath_id</b> waits until a
                     bridge named <b>br0</b> is created, then prints its  <b>datapath_id</b>
                     column,  whereas <b>get</b> <b>bridge</b> <b>br0</b> <b>datapath_id</b> <b>--</b> <b>wait-until</b>
                     <b>bridge</b> <b>br0</b> will abort if no bridge named <b>br0</b> exists  when
                     <b>ovs-vsctl</b> initially connects to the database.

              Consider specifying <b>--timeout=0</b> along with <b>--wait-until</b>, to pre‐
              vent <b>vtep-ctl</b> from terminating after waiting only at most 5 sec‐
              onds.

       <b>comment</b> [<u>arg</u>]...
              This  command  has  no  effect on behavior, but any database log
              record created by the command will include the command  and  its
              arguments.

<b>EXIT</b> <b>STATUS</b>
       0      Successful program execution.

       1      Usage, syntax, or configuration file error.

       2      The  <u>switch</u> argument to <b>ps-exists</b> specified the name of a physi‐
              cal switch that does not exist.

<b>SEE</b> <b>ALSO</b>
       <b>ovsdb-server</b>(1), <b>vtep</b>(5).



Open vSwitch                      March 2013                       vtep-ctl(8)
</pre></body></html>
