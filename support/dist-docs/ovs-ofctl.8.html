<html><head><meta charset="UTF-8"></head><body><pre>
<u>ovs-ofctl</u>(8)                  Open vSwitch Manual                 <u>ovs-ofctl</u>(8)

<b>NAME</b>
       ovs-ofctl - administer OpenFlow switches

<b>SYNOPSIS</b>
       <b>ovs-ofctl</b> [<u>options</u>] <u>command</u> [<u>switch</u>] [<u>args</u>...]

<b>DESCRIPTION</b>
       The  <b>ovs-ofctl</b> program is a command line tool for monitoring and admin‐
       istering OpenFlow switches.  It can also show the current state  of  an
       OpenFlow  switch, including features, configuration, and table entries.
       It should work with any OpenFlow switch, not just Open vSwitch.

   <b>OpenFlow</b> <b>Switch</b> <b>Management</b> <b>Commands</b>
       These commands allow <b>ovs-ofctl</b> to monitor and  administer  an  OpenFlow
       switch.   It  is  able to show the current state of a switch, including
       features, configuration, and table entries.

       Most of these commands take an argument that specifies the  method  for
       connecting to an OpenFlow switch.  The following connection methods are
       supported:

              <b>ssl:</b><u>host</u>[<b>:</b><u>port</u>]
              <b>tcp:</b><u>host</u>[<b>:</b><u>port</u>]
                     The  specified  <u>port</u>  on the given <u>host</u>, which can be ex‐
                     pressed either as a DNS name (if built with  unbound  li‐
                     brary)  or  an IP address in IPv4 or IPv6 address format.
                     Wrap   IPv6   addresses   in   square   brackets,    e.g.
                     <b>tcp:[::1]:6653</b>.   On  Linux,  use  <b>%</b><u>device</u> to designate a
                     scope    for    IPv6    link-level    addresses,     e.g.
                     <b>tcp:[fe80::1234%eth0]:6653</b>.   For <b>ssl</b>, the <b>--private-key</b>,
                     <b>--certificate</b>, and <b>--ca-cert</b> options are mandatory.

                     If <u>port</u> is not specified, it defaults to 6653.

              <b>unix:</b><u>file</u>
                     On POSIX, a Unix domain server socket named <u>file</u>.

                     On Windows, connect to a local named pipe that is  repre‐
                     sented  by  a  file created in the path <u>file</u> to mimic the
                     behavior of a Unix domain socket.

              <u>file</u>   This is short for <b>unix:</b><u>file</u>, as long  as  <u>file</u>  does  not
                     contain a colon.

              <u>bridge</u> This    is    short   for   <b>unix:/usr/local/var/run/open‐</b>
                     <b>vswitch/</b><u>bridge</u><b>.mgmt</b>, as long as <u>bridge</u> does not contain a
                     colon.

              [<u>type</u><b>@</b>]<u>dp</u>
                     Attempts to look up the bridge  associated  with  <u>dp</u>  and
                     open  as above.  If <u>type</u> is given, it specifies the data‐
                     path provider of <u>dp</u>, otherwise the default provider  <b>sys‐</b>
                     <b>tem</b> is assumed.

       <b>show</b> <u>switch</u>
              Prints  to the console information on <u>switch</u>, including informa‐
              tion on its flow tables and ports.

       <b>dump-tables</b> <u>switch</u>
              Prints to the console statistics for each  of  the  flow  tables
              used by <u>switch</u>.

       <b>dump-table-features</b> <u>switch</u>
              Prints  to the console features for each of the flow tables used
              by <u>switch</u>.

       <b>dump-table-desc</b> <u>switch</u>
              Prints to the console configuration for each of the flow  tables
              used by <u>switch</u> for OpenFlow 1.4+.

       <b>mod-table</b> <u>switch</u> <u>table</u> <u>setting</u>
              This  command configures flow table settings in <u>switch</u> for Open‐
              Flow table <u>table</u>, which may be expressed as a number or  (unless
              <b>--no-names</b> is specified) a name.

              The  available  settings  depend on the OpenFlow version in use.
              In OpenFlow 1.1 and 1.2 (which must be enabled with the  <b>-O</b>  op‐
              tion)  only, <b>mod-table</b> configures behavior when no flow is found
              when a packet is looked up in a flow table.  The following  <u>set‐</u>
              <u>ting</u> values are available:

              <b>drop</b>   Drop the packet.

              <b>continue</b>
                     Continue to the next table in the pipeline.  (This is how
                     an OpenFlow 1.0 switch always handles packets that do not
                     match any flow, in tables other than the last one.)

              <b>controller</b>
                     Send  to controller.  (This is how an OpenFlow 1.0 switch
                     always handles packets that do not match any flow in  the
                     last table.)

              In OpenFlow 1.3 and later (which must be enabled with the <b>-O</b> op‐
              tion) and Open vSwitch 2.11 and later only, <b>mod-table</b> can change
              the name of a table:

              <b>name:</b><u>new-name</u>
                     Changes  the name of the table to <u>new-name</u>.  Use an empty
                     <u>new-name</u> to clear the name.  (This will be ineffective if
                     the name is set via the <b>name</b> column in the <b>Flow_Table</b> ta‐
                     ble  in  the  <b>Open_vSwitch</b>  database  as   described   in
                     <b>ovs-vswitchd.conf.db</b>(5).)

              In OpenFlow 1.4 and later (which must be enabled with the <b>-O</b> op‐
              tion)  only, <b>mod-table</b> configures the behavior when a controller
              attempts to add a flow to a flow table that is full.   The  fol‐
              lowing <u>setting</u> values are available:

              <b>evict</b>  Delete  some existing flow from the flow table, according
                     to the algorithm described for the  <b>Flow_Table</b>  table  in
                     <b>ovs-vswitchd.conf.db</b>(5).

              <b>noevict</b>
                     Refuse to add the new flow.  (Eviction might still be en‐
                     abled  through the <b>overflow_policy</b> column in the <b>Flow_Ta‐</b>
                     <b>ble</b> table documented in <b>ovs-vswitchd.conf.db</b>(5).)

              <b>vacancy:</b><u>low</u><b>,</b><u>high</u>
                     Enables sending vacancy events to controllers  using  <b>TA‐</b>
                     <b>BLE_STATUS</b>  messages,  based on percentage thresholds <u>low</u>
                     and <u>high</u>.

              <b>novacancy</b>
                     Disables vacancy events.

       <b>dump-ports</b> <u>switch</u> [<u>netdev</u>]
              Prints to the console statistics for network devices  associated
              with  <u>switch</u>.  If <u>netdev</u> is specified, only the statistics asso‐
              ciated with that device will be printed.  <u>netdev</u> can be an Open‐
              Flow assigned port number or device name, e.g. <b>eth0</b>.

       <b>dump-ports-desc</b> <u>switch</u> [<u>port</u>]
              Prints to the console detailed information about network devices
              associated with <u>switch</u>.  To dump only a specific  port,  specify
              its  number as <u>port</u>.  Otherwise, if <u>port</u> is omitted, or if it is
              specified as <b>ANY</b>, then all ports are printed.  This is a  subset
              of the information provided by the <b>show</b> command.

              If  the  connection  to  <u>switch</u> negotiates OpenFlow 1.0, 1.2, or
              1.2, this command uses an OpenFlow extension only implemented in
              Open vSwitch (version 1.7 and later).

              Only OpenFlow 1.5 and later support  dumping  a  specific  port.
              Earlier versions of OpenFlow always dump all ports.

       <b>mod-port</b> <u>switch</u> <u>port</u> <u>action</u>
              Modify  characteristics  of port <b>port</b> in <u>switch</u>.  <u>port</u> may be an
              OpenFlow port number or name (unless <b>--no-names</b> is specified) or
              the keyword <b>LOCAL</b> (the preferred way to refer  to  the  OpenFlow
              local port).  The <u>action</u> may be any one of the following:
              <b>up</b>
              <b>down</b>   Enable  or  disable the interface.  This is equivalent to
                     <b>ip</b> <b>link</b> <b>set</b> <b>up</b> or <b>ip</b> <b>link</b> <b>set</b> <b>down</b> on a Unix system.

              <b>stp</b>
              <b>no-stp</b> Enable or disable 802.1D spanning tree protocol (STP)  on
                     the  interface.  OpenFlow implementations that don't sup‐
                     port STP will refuse to enable it.

              <b>receive</b>
              <b>no-receive</b>
              <b>receive-stp</b>
              <b>no-receive-stp</b>
                     Enable or disable OpenFlow processing of packets received
                     on this interface.  When packet processing  is  disabled,
                     packets  will  be  dropped  instead  of  being  processed
                     through the OpenFlow table.  The  <b>receive</b>  or  <b>no-receive</b>
                     setting  applies  to  all  packets except 802.1D spanning
                     tree packets, which  are  separately  controlled  by  <b>re‐</b>
                     <b>ceive-stp</b> or <b>no-receive-stp</b>.

              <b>forward</b>
              <b>no-forward</b>
                     Allow  or  disallow  forwarding of traffic to this inter‐
                     face.  By default, forwarding is enabled.

              <b>flood</b>
              <b>no-flood</b>
                     Controls whether an OpenFlow <b>flood</b> action will send traf‐
                     fic out this interface.  By default, flooding is enabled.
                     Disabling flooding is primarily useful to  prevent  loops
                     when a spanning tree protocol is not in use.

              <b>packet-in</b>
              <b>no-packet-in</b>
                     Controls  whether packets received on this interface that
                     do not match a flow table entry generate a ``packet  in''
                     message to the OpenFlow controller.  By default, ``packet
                     in'' messages are enabled.

              The <b>show</b> command displays (among other information) the configu‐
              ration that <b>mod-port</b> changes.

       <b>get-frags</b> <u>switch</u>
              Prints  <u>switch</u>'s  fragment handling mode.  See <b>set-frags</b>, below,
              for a description of each fragment handling mode.

              The <b>show</b> command also prints the fragment  handling  mode  among
              its other output.

       <b>set-frags</b> <u>switch</u> <u>frag</u><b>_</b><u>mode</u>
              Configures  <u>switch</u>'s  treatment of IPv4 and IPv6 fragments.  The
              choices for <u>frag</u><b>_</b><u>mode</u> are:

              <b>normal</b> Fragments pass through the flow table like non-fragmented
                     packets.  The TCP ports, UDP ports,  and  ICMP  type  and
                     code fields are always set to 0, even for fragments where
                     that  information would otherwise be available (fragments
                     with offset 0).  This is the  default  fragment  handling
                     mode for an OpenFlow switch.

              <b>drop</b>   Fragments  are  dropped  without passing through the flow
                     table.

              <b>reassemble</b>
                     The switch reassembles fragments into full IP packets be‐
                     fore passing them through the flow table.   Open  vSwitch
                     does not implement this fragment handling mode.

              <b>nx-match</b>
                     Fragments pass through the flow table like non-fragmented
                     packets.   The  TCP  ports,  UDP ports, and ICMP type and
                     code fields are available for matching for fragments with
                     offset 0, and set to 0 in fragments with nonzero  offset.
                     This mode is a Nicira extension.

              See  the  description of <b>ip_frag</b>, in <b>ovs-fields</b>(7), for a way to
              match on whether a packet is a fragment and on its fragment off‐
              set.

       <b>dump-flows</b> <u>switch</u> [<u>flows</u>]
              Prints to the console all flow entries in <u>switch</u>'s  tables  that
              match  <u>flows</u>.   If <u>flows</u> is omitted, all flows in the switch are
              retrieved.  See <b>Flow</b> <b>Syntax</b>, below, for  the  syntax  of  <u>flows</u>.
              The output format is described in <b>Table</b> <b>Entry</b> <b>Output</b>.

              By default, <b>ovs-ofctl</b> prints flow entries in the same order that
              the switch sends them, which is unlikely to be intuitive or con‐
              sistent.   Use <b>--sort</b> and <b>--rsort</b> to control display order.  The
              <b>--names</b>/<b>--no-names</b> and <b>--stats</b>/<b>--no-stats</b>  options  also  affect
              output formatting.  See the descriptions of these options, under
              <b>OPTIONS</b> below, for more information

       <b>dump-aggregate</b> <u>switch</u> [<u>flows</u>]
              Prints to the console aggregate statistics for flows in <u>switch</u>'s
              tables  that  match  <u>flows</u>.  If <u>flows</u> is omitted, the statistics
              are aggregated across all flows in  the  switch's  flow  tables.
              See  <b>Flow</b>  <b>Syntax</b>,  below,  for the syntax of <u>flows</u>.  The output
              format is described in <b>Table</b> <b>Entry</b> <b>Output</b>.

       <b>queue-stats</b> <u>switch</u> [<u>port</u> [<u>queue</u>]]
              Prints to the console statistics for the specified <u>queue</u> on <u>port</u>
              within <u>switch</u>.  <u>port</u> can be an OpenFlow port number or name, the
              keyword <b>LOCAL</b> (the preferred way to refer to the OpenFlow  local
              port),  or the keyword <b>ALL</b>.  Either of <u>port</u> or <u>queue</u> or both may
              be omitted (or equivalently the keyword <b>ALL</b>).  If both are omit‐
              ted, statistics are printed for all queues  on  all  ports.   If
              only  <u>queue</u>  is  omitted,  then  statistics  are printed for all
              queues on <u>port</u>; if only <u>port</u> is  omitted,  then  statistics  are
              printed for <u>queue</u> on every port where it exists.

       <b>queue-get-config</b> <u>switch</u> <u>[port</u> [<u>queue</u>]]
              Prints  to  the  console  the  configuration of <u>queue</u> on <u>port</u> in
              <u>switch</u>.  If <u>port</u> is omitted or <b>ANY</b>, reports queues for all port.
              If <u>queue</u> is omitted or <b>ANY</b>, reports all  queues.   For  OpenFlow
              1.3 and earlier, the output always includes all queues, ignoring
              <u>queue</u> if specified.

              This command has limited usefulness, because ports often have no
              configured  queues  and  because  the OpenFlow protocol provides
              only very limited  information  about  the  configuration  of  a
              queue.

       <b>dump-ipfix-bridge</b> <u>switch</u>
              Prints to the console the statistics of bridge IPFIX for <u>switch</u>.
              If  bridge  IPFIX  is configured on the <u>switch</u>, IPFIX statistics
              can be retrieved.  Otherwise, error message will be printed.

              This command uses an Open vSwitch extension that is only in Open
              vSwitch 2.6 and later.

       <b>dump-ipfix-flow</b> <u>switch</u>
              Prints to the console the statistics  of  flow-based  IPFIX  for
              <u>switch</u>.   If  flow-based IPFIX is configured on the <u>switch</u>, sta‐
              tistics of all the collector set  ids  on  the  <u>switch</u>  will  be
              printed.  Otherwise, print error message.

              Refer to <b>ovs-vswitchd.conf.db</b>(5) for more details on configuring
              flow based IPFIX and collector set ids.

              This command uses an Open vSwitch extension that is only in Open
              vSwitch 2.6 and later.

       <b>ct-flush-zone</b> <u>switch</u> <u>zone</u>
              Flushes the connection tracking entries in <u>zone</u> on <u>switch</u>.

              This command uses an Open vSwitch extension that is only in Open
              vSwitch 2.6 and later.

       <b>ct-flush</b> <u>switch</u> <u>[zone=N]</u> <u>[mark=X[/M]]</u> <u>[labels=Y[/N]]</u> <u>[ct-orig-tuple</u>
       <u>[ct-reply-tuple]]</u>
              Flushes  the  connection  entries on <u>switch</u> based on <u>zone</u>, <u>mark</u>,
              <u>labels</u> and connection tracking tuples <u>ct-[orig|reply]-tuple</u>.

              If <u>ct-[orig|reply]-tuple</u> is not provided, flushes all  the  con‐
              nection entries.  If <u>zone</u> is specified, only flushes the connec‐
              tions in <u>zone</u>. if <u>mark</u> or <u>labels</u> is provided, it will flush only
              entries that are matching specific <u>mark/labels</u>.

              If <u>ct-[orig|reply]-tuple</u> is provided, flushes the connection en‐
              try  specified  by  <u>ct-[orig|reply]-tuple</u> in <u>zone</u>.  The zone de‐
              faults to 0 if it is not provided.  The <u>mark</u> and <u>labels</u> defaults
              to "0/0" if  it  is  not  provided.   The  userspace  connection
              tracker  requires flushing with the original pre-NATed tuple and
              a warning log will be otherwise generated.   The  tuple  can  be
              partial and will remove all connections that are matching on the
              specified fields.  In order to specify only <u>ct-reply-tuple</u>, pro‐
              vide empty string as <u>ct-orig-tuple</u>.

              Note: Currently there is limitation for matching on ICMP, in or‐
              der  to  partially  match  on  ICMP  parameters the <u>ct-[orig|re‐</u>
              <u>ply]-tuple</u> has to include either source or destination IP.

              An example of an IPv4 ICMP <u>ct-[orig|reply]-tuple</u>:

              "ct_nw_src=10.1.1.1,ct_nw_dst=10.1.1.2,ct_nw_proto=1,icmp_type=8,icmp_code=0,icmp_id=10"

              An example of an IPv6 TCP <u>ct-[orig|reply]-tuple</u>:

              "ct_ipv6_src=fc00::1,ct_ipv6_dst=fc00::2,ct_nw_proto=6,ct_tp_src=1,ct_tp_dst=2"

              This command uses an Open vSwitch extension that is only in Open
              vSwitch 3.1 and later.  Support for matching on <u>mark</u> and  <u>labels</u>
              is only in Open vSwitch 3.3 and later.

   <b>OpenFlow</b> <b>Switch</b> <b>Flow</b> <b>Table</b> <b>Commands</b>
       These  commands  manage  the flow table in an OpenFlow switch.  In each
       case, <u>flow</u> specifies a flow entry in the format described in <b>Flow</b>  <b>Syn‐</b>
       <b>tax</b>, below, <u>file</u> is a text file that contains zero or more flows in the
       same  syntax,  one  per line, and the optional <b>--bundle</b> option operates
       the command as a single atomic transaction, see option <b>--bundle</b>, below.

       [<b>--bundle</b>] <b>add-flow</b> <u>switch</u> <u>flow</u>
       [<b>--bundle</b>] <b>add-flow</b> <u>switch</u> <b>-</b> <b>&lt;</b> <u>file</u>
       [<b>--bundle</b>] <b>add-flows</b> <u>switch</u> <u>file</u>
              Add each flow entry to <u>switch</u>'s tables.  Each flow specification
              (e.g., each line in <u>file</u>) may start with  <b>add</b>,  <b>modify</b>,  <b>delete</b>,
              <b>modify_strict</b>,  or  <b>delete_strict</b>  keyword  to specify whether a
              flow is to be added, modified, or deleted, and whether the  mod‐
              ify  or  delete is strict or not.  For backwards compatibility a
              flow specification without one of these keywords is treated as a
              flow add.  All flow mods are executed in the order specified.

       [<b>--bundle</b>] [<b>--strict</b>] <b>mod-flows</b> <u>switch</u> <u>flow</u>
       [<b>--bundle</b>] [<b>--strict</b>] <b>mod-flows</b> <u>switch</u> <b>-</b> <b>&lt;</b> <u>file</u>
              Modify the actions in entries from <u>switch</u>'s  tables  that  match
              the  specified  flows.  With <b>--strict</b>, wildcards are not treated
              as active for matching purposes.

       [<b>--bundle</b>] <b>del-flows</b> <u>switch</u>
       [<b>--bundle</b>] [<b>--strict</b>] <b>del-flows</b> <u>switch</u> [<u>flow</u>]
       [<b>--bundle</b>] [<b>--strict</b>] <b>del-flows</b> <u>switch</u> <b>-</b> <b>&lt;</b> <u>file</u>
              Deletes entries from <u>switch</u>'s flow table.  With  only  a  <u>switch</u>
              argument,  deletes  all  flows.  Otherwise, deletes flow entries
              that match the specified flows.  With  <b>--strict</b>,  wildcards  are
              not treated as active for matching purposes.

       [<b>--bundle</b>] [<b>--readd</b>] <b>replace-flows</b> <u>switch</u> <u>file</u>
              Reads flow entries from <u>file</u> (or <b>stdin</b> if <u>file</u> is <b>-</b>) and queries
              the  flow  table from <u>switch</u>.  Then it fixes up any differences,
              adding flows from <u>flow</u> that  are  missing  on  <u>switch</u>,  deleting
              flows  from  <u>switch</u>  that are not in <u>file</u>, and updating flows in
              <u>switch</u> whose actions, cookie, or timeouts differ in <u>file</u>.

              With <b>--readd</b>, <b>ovs-ofctl</b> adds all the flows from <u>file</u>, even those
              that exist with the same actions, cookie, and timeout in <u>switch</u>.
              In OpenFlow 1.0 and 1.1, re-adding  a  flow  always  resets  the
              flow's  packet  and  byte counters to 0, and in OpenFlow 1.2 and
              later, it does so only if the <b>reset_counts</b> flag is set.

       <b>diff-flows</b> <u>source1</u> <u>source2</u>
              Reads flow entries from <u>source1</u> and <u>source2</u> and prints the  dif‐
              ferences.   A  flow  that  is  in  <u>source1</u> but not in <u>source2</u> is
              printed preceded by a <b>-</b>, and a flow that is in <u>source2</u>  but  not
              in <u>source1</u> is printed preceded by a <b>+</b>.  If a flow exists in both
              <u>source1</u> and <u>source2</u> with different actions, cookie, or timeouts,
              then  both  versions  are  printed  preceded by <b>-</b> and <b>+</b>, respec‐
              tively.

              <u>source1</u> and <u>source2</u> may each name a file or a switch.  If a name
              begins with <b>/</b> or <b>.</b>, then it is considered to be a file name.   A
              name  that  contains <b>:</b> is considered to be a switch.  Otherwise,
              it is a file if a file by that name exists, a switch if not.

              For this command, an exit status of 0 means that no  differences
              were  found,  1  means  that an error occurred, and 2 means that
              some differences were found.

       <b>packet-out</b> <u>switch</u> <u>packet-out</u>
              Connects to <u>switch</u> and instructs it to  execute  the  <u>packet-out</u>
              OpenFlow message, specified as defined in <b>Packet-Out</b> <b>Syntax</b> sec‐
              tion.

   <b>Group</b> <b>Table</b> <b>Commands</b>
       These  commands  manage the group table in an OpenFlow switch.  In each
       case, <u>group</u> specifies a group entry in the format  described  in  <b>Group</b>
       <b>Syntax</b>,  below,  and  <u>file</u>  is  a  text file that contains zero or more
       groups in the same syntax, one per line, and the optional <b>--bundle</b>  op‐
       tion  operates  the  command as a single atomic transaction, see option
       <b>--bundle</b>, below.

       The group commands work only with switches that support OpenFlow 1.1 or
       later or the Open vSwitch group extensions to OpenFlow  1.0  (added  in
       Open  vSwitch  2.9.90).   For OpenFlow 1.1 or later, it is necessary to
       explicitly enable these protocol versions in <b>ovs-ofctl</b> (using <b>-O</b>).  For
       more information, see ``Q: What versions of OpenFlow does Open  vSwitch
       support?'' in the Open vSwitch FAQ.

       [<b>--bundle</b>] <b>add-group</b> <u>switch</u> <u>group</u>
       [<b>--bundle</b>] <b>add-group</b> <u>switch</u> <b>-</b> <b>&lt;</b> <u>file</u>
       [<b>--bundle</b>] <b>add-groups</b> <u>switch</u> <u>file</u>
              Add  each group entry to <u>switch</u>'s tables.  Each group specifica‐
              tion (e.g., each line in  <u>file</u>)  may  start  with  <b>add</b>,  <b>modify</b>,
              <b>add_or_mod</b>,  <b>delete</b>,  <b>insert_bucket</b>, or <b>remove_bucket</b> keyword to
              specify whether a flow is to be added, modified, or deleted,  or
              whether a group bucket is to be added or removed.  For backwards
              compatibility  a  group  specification without one of these key‐
              words is treated as a group add.  All group mods are executed in
              the order specified.

       [<b>--bundle</b>] [<b>--may-create</b>] <b>mod-group</b> <u>switch</u> <u>group</u>
       [<b>--bundle</b>] [<b>--may-create</b>] <b>mod-group</b> <u>switch</u> <b>-</b> <b>&lt;</b> <u>file</u>
              Modify the action buckets in entries from  <u>switch</u>'s  tables  for
              each  group entry.  If a specified group does not already exist,
              then without <b>--may-create</b>, this  command  has  no  effect;  with
              <b>--may-create</b>,  it  creates a new group.  The <b>--may-create</b> option
              uses an Open vSwitch extension to OpenFlow only  implemented  in
              Open vSwitch 2.6 and later.

       [<b>--bundle</b>] <b>del-groups</b> <u>switch</u>
       [<b>--bundle</b>] <b>del-groups</b> <u>switch</u> [<u>group</u>]
       [<b>--bundle</b>] <b>del-groups</b> <u>switch</u> <b>-</b> <b>&lt;</b> <u>file</u>
              Deletes  entries  from <u>switch</u>'s group table.  With only a <u>switch</u>
              argument, deletes all groups.  Otherwise, deletes the group  for
              each group entry.

       [<b>--bundle</b>] <b>insert-buckets</b> <u>switch</u> <u>group</u>
       [<b>--bundle</b>] <b>insert-buckets</b> <u>switch</u> <b>-</b> <b>&lt;</b> <u>file</u>
              Add  buckets  to an existing group present in the <u>switch</u>'s group
              table.  If no <u>command</u><b>_</b><u>bucket</u><b>_</b><u>id</u> is present in the group specifi‐
              cation then all buckets of the group are removed.

       [<b>--bundle</b>] <b>remove-buckets</b> <u>switch</u> <u>group</u>
       [<b>--bundle</b>] <b>remove-buckets</b> <u>switch</u> <b>-</b> <b>&lt;</b> <u>file</u>
              Remove buckets to an existing  group  present  in  the  <u>switch</u>'s
              group  table.   If  no <u>command</u><b>_</b><u>bucket</u><b>_</b><u>id</u> is present in the group
              specification then all buckets of the group are removed.

       <b>dump-groups</b> <u>switch</u> [<u>group</u>]
              Prints group entries in <u>switch</u>'s tables  to  console.   To  dump
              only  a specific group, specify its number as <u>group</u>.  Otherwise,
              if <u>group</u> is omitted, or if it is  specified  as  <b>ALL</b>,  then  all
              groups are printed.

              Only  OpenFlow  1.5  and later support dumping a specific group.
              Earlier versions of OpenFlow always dump all groups.

       <b>dump-group-features</b> <u>switch</u>
              Prints to the console the group features of the <u>switch</u>.

       <b>dump-group-stats</b> <u>switch</u> [<u>group</u>]
              Prints to the console statistics  for  the  specified  <u>group</u>  in
              <u>switch</u>'s  tables.   If  <u>group</u> is omitted then statistics for all
              groups are printed.

   <b>OpenFlow</b> <b>1.3+</b> <b>Switch</b> <b>Meter</b> <b>Table</b> <b>Commands</b>
       These commands manage the meter table in an OpenFlow switch.   In  each
       case,  <u>meter</u>  specifies  a meter entry in the format described in <b>Meter</b>
       <b>Syntax</b>, below.

       OpenFlow 1.3 introduced support for meters, so these commands only work
       with switches that support OpenFlow 1.3 or later.  It is  necessary  to
       explicitly  enable  these protocol versions in <b>ovs-ofctl</b> (using <b>-O</b>) and
       in the switch itself (with the <b>protocols</b> column in the  <b>Bridge</b>  table).
       For  more  information,  see  ``Q:  What versions of OpenFlow does Open
       vSwitch support?'' in the Open vSwitch FAQ.

       <b>add-meter</b> <u>switch</u> <u>meter</u>
              Add a meter entry to <u>switch</u>'s tables. The <u>meter</u>  syntax  is  de‐
              scribed in section <b>Meter</b> <b>Syntax</b>, below.

       <b>mod-meter</b> <u>switch</u> <u>meter</u>
              Modify an existing meter.

       <b>del-meters</b> <u>switch</u> [<u>meter</u>]
              Delete entries from <u>switch</u>'s meter table.  To delete only a spe‐
              cific  meter,  specify its number as <u>meter</u>.  Otherwise, if <u>meter</u>
              is omitted, or if it is specified as <b>all</b>, then  all  meters  are
              deleted.

       <b>dump-meters</b> <u>switch</u> [<u>meter</u>]
              Print  entries  from <u>switch</u>'s meter table.  To print only a spe‐
              cific meter, specify its number as <u>meter</u>.  Otherwise,  if  <u>meter</u>
              is  omitted,  or  if it is specified as <b>all</b>, then all meters are
              printed.

       <b>meter-stats</b> <u>switch</u> [<u>meter</u>]
              Print meter statistics.  <u>meter</u> can specify a single  meter  with
              syntax <b>meter=</b><u>id</u>, or all meters with syntax <b>meter=all</b>.

       <b>meter-features</b> <u>switch</u>
              Print meter features.

   <b>OpenFlow</b> <b>Switch</b> <b>Bundle</b> <b>Command</b>
       Transactional  updates  to  both flow and group tables can be made with
       the <b>bundle</b> command.  <u>file</u> is a text file that  contains  zero  or  more
       flow  mods, group mods, or packet-outs in <b>Flow</b> <b>Syntax</b>, <b>Group</b> <b>Syntax</b>, or
       <b>Packet-Out</b> <b>Syntax</b>, each line preceded by  <b>flow</b>,  <b>group</b>,  or  <b>packet-out</b>
       keyword,  correspondingly.  The <b>flow</b> keyword may be optionally followed
       by  one  of  the  keywords  <b>add</b>,  <b>modify</b>,  <b>modify_strict</b>,  <b>delete</b>,   or
       <b>delete_strict</b>,  of  which  the  <b>add</b> is assumed if a bare <b>flow</b> is given.
       Similarly, the <b>group</b> keyword may be optionally followed by one  of  the
       keywords   <b>add</b>,  <b>modify</b>,  <b>add_or_mod</b>,  <b>delete</b>,  <b>insert_bucket</b>,  or  <b>re‐</b>
       <b>move_bucket</b>, of which the <b>add</b> is assumed if a bare <b>group</b> is given.

       <b>bundle</b> <u>switch</u> <u>file</u>
              Execute all flow and group mods  in  <u>file</u>  as  a  single  atomic
              transaction  against <u>switch</u>'s tables.  All bundled mods are exe‐
              cuted in the order specified.

   <b>OpenFlow</b> <b>Switch</b> <b>Tunnel</b> <b>TLV</b> <b>Table</b> <b>Commands</b>
       Open vSwitch maintains a mapping table between tunnel option TLVs  (de‐
       fined  by  &lt;class, type, length&gt;) and NXM fields <b>tun_metadata</b><u>n</u>, where <u>n</u>
       ranges from 0 to 63, that can  be  operated  on  for  the  purposes  of
       matches,  actions,  etc.  This  TLV table can be used for Geneve option
       TLVs or other protocols with options in same TLV format as  Geneve  op‐
       tions.  This  mapping  must be explicitly specified by the user through
       the following commands.

       A     TLV     mapping     is     specified     with     the      syntax
       <b>{class=</b><u>class</u><b>,type=</b><u>type</u><b>,len=</b><u>length</u><b>}-&gt;tun_metadata</b><u>n</u>.  When an option map‐
       ping  exists  for  a given <b>tun_metadata</b><u>n</u>, matching on the defined field
       becomes possible, e.g.:

              ovs-ofctl                    add-tlv-map                     br0
              "{class=0xffff,type=0,len=4}-&gt;tun_metadata0"

              ovs-ofctl add-flow br0 tun_metadata0=1234,actions=controller

       A  mapping  should  not be changed while it is in active use by a flow.
       The result of doing so is undefined.

       These commands are Nicira  extensions  to  OpenFlow  and  require  Open
       vSwitch 2.5 or later.


       <b>add-tlv-map</b> <u>switch</u> <u>option</u>[<b>,</b><u>option</u>]...
              Add  each  <u>option</u>  to  <u>switch</u>'s tables. Duplicate fields are re‐
              jected.

       <b>del-tlv-map</b> <u>switch</u> [<u>option</u>[<b>,</b><u>option</u>]]...
              Delete each <u>option</u> from <u>switch</u>'s table, or all option  TLV  map‐
              ping  if  no <u>option</u> is specified.  Fields that aren't mapped are
              ignored.

       <b>dump-tlv-map</b> <u>switch</u>
              Show the currently mapped fields in the switch's option table as
              well as switch capabilities.

   <b>OpenFlow</b> <b>Switch</b> <b>Monitoring</b> <b>Commands</b>
       <b>snoop</b> <u>switch</u>
              Connects to <u>switch</u> and prints to the console all  OpenFlow  mes‐
              sages  received.   Unlike other <b>ovs-ofctl</b> commands, if <u>switch</u> is
              the name of a bridge, then the <b>snoop</b> command connects to a  Unix
              domain socket named <b>/usr/local/var/run/openvswitch/</b><u>switch</u><b>.snoop</b>.
              <b>ovs-vswitchd</b>  listens on such a socket for each bridge and sends
              to it all of the OpenFlow messages sent to or received from  its
              configured  OpenFlow controller.  Thus, this command can be used
              to view OpenFlow protocol activity between a switch and its con‐
              troller.

              When a switch has more than one controller configured, only  the
              traffic  to  and from a single controller is output.  If none of
              the controllers is configured as a primary or a secondary (using
              a Nicira extension to OpenFlow 1.0 or 1.1, or a standard request
              in OpenFlow 1.2 or later), then a controller is chosen arbitrar‐
              ily among them.  If there is a primary controller, it is chosen;
              otherwise, if there are any controllers that are  not  primaries
              or  secondaries,  one  is  chosen arbitrarily; otherwise, a sec‐
              ondary controller is chosen arbitrarily.  This  choice  is  made
              once  at  connection time and does not change as controllers re‐
              configure their roles.

              If a switch has no controller configured, or if  the  configured
              controller  is  disconnected,  no traffic is sent, so monitoring
              will not show any traffic.

       <b>monitor</b> <u>switch</u> [<u>miss-len</u>] [<b>invalid_ttl</b>] [<b>watch:</b>[<u>spec</u>...]]
              Connects to <u>switch</u> and prints to the console all  OpenFlow  mes‐
              sages  received.   Usually,  <u>switch</u> should specify the name of a
              bridge in the <b>ovs-vswitchd</b> database. This is available  only  in
              OpenFlow 1.0 as Nicira extension.

              If  <u>miss-len</u> is provided, <b>ovs-ofctl</b> sends an OpenFlow ``set con‐
              figuration'' message at  connection  setup  time  that  requests
              <u>miss-len</u>  bytes of each packet that misses the flow table.  Open
              vSwitch does not send these and other asynchronous  messages  to
              an <b>ovs-ofctl</b> <b>monitor</b> client connection unless a nonzero value is
              specified  on  this  argument.  (Thus, if <u>miss-len</u> is not speci‐
              fied, very little traffic will ordinarily be printed.)

              If <b>invalid_ttl</b> is passed, <b>ovs-ofctl</b> sends an OpenFlow ``set con‐
              figuration'' message at connection setup time that requests  <b>IN‐</b>
              <b>VALID_TTL_TO_CONTROLLER</b>,  so  that <b>ovs-ofctl</b> <b>monitor</b> can receive
              ``packet-in'' messages when TTL reaches zero on <b>dec_ttl</b>  action.
              Only OpenFlow 1.1 and 1.2 support <b>invalid_ttl</b>; Open vSwitch also
              implements it for OpenFlow 1.0 as an extension.

              <b>watch:</b>[<u>spec</u>...]  causes  <b>ovs-ofctl</b> to send a ``monitor request''
              Nicira extension message to the switch at connection setup time.
              This message causes the switch to send  information  about  flow
              table changes as they occur.  The following comma-separated <u>spec</u>
              syntax is available:

              <b>!initial</b>
                     Do not report the switch's initial flow table contents.

              <b>!add</b>   Do not report newly added flows.

              <b>!delete</b>
                     Do not report deleted flows.

              <b>!modify</b>
                     Do not report modifications to existing flows.

              <b>!own</b>   Abbreviate  changes made to the flow table by <b>ovs-ofctl</b>'s
                     own connection to the switch.  (These  could  only  occur
                     using  the  <b>ofctl/send</b> command described below under <b>RUN‐</b>
                     <b>TIME</b> <b>MANAGEMENT</b> <b>COMMANDS</b>.)

              <b>!actions</b>
                     Do not report actions as part of flow updates.

              <b>table=</b><u>table</u>
                     Limits the monitoring to the table with the given  <u>table</u>,
                     which  may  be expressed as a number between 0 and 254 or
                     (unless <b>--no-names</b> is specified) a name.  By default, all
                     tables are monitored.

              <b>out_port=</b><u>port</u>
                     If set, only flows that output  to  <u>port</u>  are  monitored.
                     The  <u>port</u> may be an OpenFlow port number or keyword (e.g.
                     <b>LOCAL</b>).

              <b>out_group=</b><u>group</u>
                     If set, only flows that output to <u>group</u> number are  moni‐
                     tored.   This  field requires OpenFlow 1.4 (-OOpenFlow14)
                     or later.

              <u>field</u><b>=</b><u>value</u>
                     Monitors only flows that  have  <u>field</u>  specified  as  the
                     given <u>value</u>.  Any syntax valid for matching on <b>dump-flows</b>
                     may be used.

              This  command  may  be useful for debugging switch or controller
              implementations.  With <b>watch:</b>, it is particularly useful for ob‐
              serving how a controller updates flow tables.

   <b>OpenFlow</b> <b>Switch</b> <b>and</b> <b>Controller</b> <b>Commands</b>
       The following commands, like those in the previous section, may be  ap‐
       plied  to  OpenFlow  switches,  using any of the connection methods de‐
       scribed in that section.  Unlike those commands, these may also be  ap‐
       plied to OpenFlow controllers.

       <b>probe</b> <u>target</u>
              Sends a single OpenFlow echo-request message to <u>target</u> and waits
              for the response.  With the <b>-t</b> or <b>--timeout</b> option, this command
              can test whether an OpenFlow switch or controller is up and run‐
              ning.

       <b>ping</b> <u>target</u> [<u>n</u>]
              Sends  a  series  of 10 echo request packets to <u>target</u> and times
              each reply.  The echo request packets  consist  of  an  OpenFlow
              header plus <u>n</u> bytes (default: 64) of randomly generated payload.
              This measures the latency of individual requests.

       <b>benchmark</b> <u>target</u> <u>n</u> <u>count</u>
              Sends  <u>count</u>  echo request packets that each consist of an Open‐
              Flow header plus <u>n</u> bytes of payload and waits for each response.
              Reports the total time required.  This is a measure of the maxi‐
              mum bandwidth to <u>target</u> for round-trips of <u>n</u>-byte messages.

   <b>Other</b> <b>Commands</b>
       <b>ofp-parse</b> <u>file</u>
              Reads <u>file</u> (or <b>stdin</b> if <u>file</u> is <b>-</b>) as a series of OpenFlow  mes‐
              sages  in  the binary format used on an OpenFlow connection, and
              prints them to the console.  This can  be  useful  for  printing
              OpenFlow messages captured from a TCP stream.

       <b>ofp-parse-pcap</b> <u>file</u> [<u>port</u>...]
              Reads  <u>file</u>,  which  must  be in the PCAP format used by network
              capture tools such as <b>tcpdump</b> or <b>wireshark</b>, extracts all the TCP
              streams for OpenFlow connections, and prints the  OpenFlow  mes‐
              sages in those connections in human-readable format on <b>stdout</b>.

              OpenFlow connections are distinguished by TCP port number.  Non-
              OpenFlow  packets  are  ignored.   By default, data on TCP ports
              6633 and 6653 are considered to be  OpenFlow.   Specify  one  or
              more <u>port</u> arguments to override the default.

              This  command  cannot  usefully print SSL/TLS encrypted traffic.
              It does not understand IPv6.

   <b>Flow</b> <b>Syntax</b>
       Some <b>ovs-ofctl</b> commands accept an argument that  describes  a  flow  or
       flows.  Such flow descriptions comprise a series of <u>field</u><b>=</b><u>value</u> assign‐
       ments,  separated  by  commas or white space.  (Embedding spaces into a
       flow description normally requires quoting to prevent  the  shell  from
       breaking the description into multiple arguments.)

       Flow descriptions should be in <b>normal</b> <b>form</b>.  This means that a flow may
       only  specify a value for an L3 field if it also specifies a particular
       L2 protocol, and that a flow may only specify an L4 field  if  it  also
       specifies  particular L2 and L3 protocol types.  For example, if the L2
       protocol type <b>dl_type</b> is wildcarded, then L3 fields <b>nw_src</b>, <b>nw_dst</b>, and
       <b>nw_proto</b> must also be wildcarded.  Similarly, if  <b>dl_type</b>  or  <b>nw_proto</b>
       (the  L3 protocol type) is wildcarded, so must be the L4 fields <b>tcp_dst</b>
       and <b>tcp_src</b>.  <b>ovs-ofctl</b> will warn about flows not in normal form.

       <b>ovs-fields</b>(7) describes the supported fields and how to match them.  In
       addition to match fields, commands that operate on flows accept  a  few
       additional key-value pairs:

       <b>table=</b><u>table</u>
              For  flow dump commands, limits the flows dumped to those in <u>ta‐</u>
              <u>ble</u>, which may be expressed as a number between  0  and  255  or
              (unless  <b>--no-names</b>  is specified) a name.  If not specified (or
              if 255 is specified as <u>table</u>), then  flows  in  all  tables  are
              dumped.

              For  flow  table modification commands, behavior varies based on
              the OpenFlow version used to connect to the switch:

              OpenFlow 1.0
                     OpenFlow 1.0 does not support <b>table</b> for modifying  flows.
                     <b>ovs-ofctl</b>  will  exit  with an error if <b>table</b> (other than
                     <b>table=255</b>) is specified for a switch that  only  supports
                     OpenFlow 1.0.

                     In  OpenFlow 1.0, the switch chooses the table into which
                     to insert a new flow.  The Open vSwitch  software  switch
                     always chooses table 0.  Other Open vSwitch datapaths and
                     other  OpenFlow  implementations may choose different ta‐
                     bles.

                     The OpenFlow 1.0 behavior in Open vSwitch  for  modifying
                     or  removing  flows  depends on whether <b>--strict</b> is used.
                     Without <b>--strict</b>, the command applies to  matching  flows
                     in  all  tables.  With <b>--strict</b>, the command will operate
                     on any single matching flow in  any  table;  it  will  do
                     nothing  if  there  are  matches  in more than one table.
                     (The distinction between these behaviors only matters  if
                     non-OpenFlow  1.0  commands were also used, because Open‐
                     Flow 1.0 alone cannot add flows with  the  same  matching
                     criteria to multiple tables.)

              OpenFlow 1.0 with table_id extension
                     Open vSwitch implements an OpenFlow extension that allows
                     the  controller to specify the table on which to operate.
                     <b>ovs-ofctl</b> automatically enables the extension when  <b>table</b>
                     is  specified  and OpenFlow 1.0 is used.  <b>ovs-ofctl</b> auto‐
                     matically detects whether the switch supports the  exten‐
                     sion.   As  of this writing, this extension is only known
                     to be implemented by Open vSwitch.

                     With this extension, <b>ovs-ofctl</b> operates on the  requested
                     table  when <b>table</b> is specified, and acts as described for
                     OpenFlow 1.0 above when no <b>table</b> is specified (or for <b>ta‐</b>
                     <b>ble=255</b>).

              OpenFlow 1.1
                     OpenFlow 1.1 requires flow table modification commands to
                     specify a table.  When <b>table</b> is  not  specified  (or  <b>ta‐</b>
                     <b>ble=255</b> is specified), <b>ovs-ofctl</b> defaults to table 0.

              OpenFlow 1.2 and later
                     OpenFlow  1.2 and later allow flow deletion commands, but
                     not other flow table modification commands, to operate on
                     all flow tables, with the behavior  described  above  for
                     OpenFlow 1.0.

       <b>duration=</b>...
       <b>n_packet=</b>...
       <b>n_bytes=</b>...
              <b>ovs-ofctl</b>  ignores assignments to these ``fields'' to allow out‐
              put from the <b>dump-flows</b> command to be used as  input  for  other
              commands that parse flows.

       The  <b>add-flow</b>,  <b>add-flows</b>, and <b>mod-flows</b> commands require an additional
       field, which must be the final field specified:

       <b>actions=</b>[<u>action</u>][<b>,</b><u>action</u>...]
              Specifies a comma-separated list of actions to take on a  packet
              when  the  flow  entry matches.  If no <u>action</u> is specified, then
              packets matching the flow are dropped.  See  <b>ovs-actions</b>(7)  for
              details on the syntax and semantics of actions.  K

       An  opaque  identifier called a cookie can be used as a handle to iden‐
       tify a set of flows:

       <b>cookie=</b><u>value</u>
              A cookie can be associated  with  a  flow  using  the  <b>add-flow</b>,
              <b>add-flows</b>, and <b>mod-flows</b> commands.  <u>value</u> can be any 64-bit num‐
              ber  and need not be unique among flows.  If this field is omit‐
              ted, a default cookie value of 0 is used.

       <b>cookie=</b><u>value</u><b>/</b><u>mask</u>
              When using NXM, the cookie can be used as a handle for querying,
              modifying, and deleting flows.  <u>value</u> and <u>mask</u> may  be  supplied
              for  the  <b>del-flows</b>,  <b>mod-flows</b>,  <b>dump-flows</b>, and <b>dump-aggregate</b>
              commands to limit matching cookies.  A 1-bit in  <u>mask</u>  indicates
              that  the  corresponding bit in <u>cookie</u> must match exactly, and a
              0-bit wildcards that bit.  A mask of -1 may be used  to  exactly
              match a cookie.

              The <b>mod-flows</b> command can update the cookies of flows that match
              a  cookie by specifying the <u>cookie</u> field twice (once with a mask
              for matching and once without to indicate the new value):

              <b>ovs-ofctl</b> <b>mod-flows</b> <b>br0</b> <b>cookie=1,actions=normal</b>
                     Change all flows' cookies to 1 and change  their  actions
                     to <b>normal</b>.

              <b>ovs-ofctl</b> <b>mod-flows</b> <b>br0</b> <b>cookie=1/-1,cookie=2,actions=normal</b>
                     Update  cookies  with  a value of 1 to 2 and change their
                     actions to <b>normal</b>.

              The ability to match on cookies was added in Open vSwitch 1.5.0.

       The following additional field sets the priority for flows added by the
       <b>add-flow</b> and <b>add-flows</b> commands.   For  <b>mod-flows</b>  and  <b>del-flows</b>  when
       <b>--strict</b>  is  specified, priority must match along with the rest of the
       flow specification.  For <b>mod-flows</b> without <b>--strict</b>, priority  is  only
       significant  if  the  command  creates  a new flow, that is, non-strict
       <b>mod-flows</b> does not match on priority and will not change  the  priority
       of  existing  flows.  Other commands do not allow priority to be speci‐
       fied.

       <b>priority=</b><u>value</u>
              The priority at which a wildcarded entry will match in  compari‐
              son  to  others.   <u>value</u> is a number between 0 and 65535, inclu‐
              sive.  A higher <u>value</u> will match before a lower one.  An  exact-
              match  entry  will always have priority over an entry containing
              wildcards, so it has an implicit priority value of 65535.   When
              adding  a flow, if the field is not specified, the flow's prior‐
              ity will default to 32768.

              OpenFlow leaves behavior undefined when two or more  flows  with
              the  same priority can match a single packet.  Some users expect
              ``sensible'' behavior, such as more specific flows taking prece‐
              dence over less specific flows, but OpenFlow  does  not  specify
              this  and  Open  vSwitch  does  not  implement it.  Users should
              therefore take care to use priorities  to  ensure  the  behavior
              that they expect.

       The  <b>add-flow</b>,  <b>add-flows</b>, and <b>mod-flows</b> commands support the following
       additional options.  These options affect only new  flows.   Thus,  for
       <b>add-flow</b>  and  <b>add-flows</b>, these options are always significant, but for
       <b>mod-flows</b> they are significant only if the command creates a new  flow,
       that is, their values do not update or affect existing flows.

       <b>idle_timeout=</b><u>seconds</u>
              Causes  the  flow to expire after the given number of seconds of
              inactivity.  A value of 0 (the default) prevents a flow from ex‐
              piring due to inactivity.

       <b>hard_timeout=</b><u>seconds</u>
              Causes the flow to expire after the given number of seconds, re‐
              gardless of activity.  A value of 0 (the default) gives the flow
              no hard expiration deadline.

       <b>importance=</b><u>value</u>
              Sets the importance of a flow.  The flow entry  eviction  mecha‐
              nism  can  use  importance as a factor in deciding which flow to
              evict.  A value of 0 (the default) makes the flow  non-evictable
              on  the  basis  of  importance.   Specify  a value between 0 and
              65535.

              Only OpenFlow 1.4 and later support <b>importance</b>.

       <b>send_flow_rem</b>
              Marks the flow with a flag that causes the switch to generate  a
              ``flow  removed''  message and send it to interested controllers
              when the flow later expires or is removed.

       <b>check_overlap</b>
              Forces the switch to check that the flow match does not  overlap
              that  of  any  different flow with the same priority in the same
              table.  (This check is expensive so it is best to avoid it.)

       <b>reset_counts</b>
              When this flag is specified on a flow being added to  a  switch,
              and  the  switch  already has a flow with an identical match, an
              OpenFlow 1.2 (or later) switch resets the flow's packet and byte
              counters to 0.  Without the flag, the packet and  byte  counters
              are preserved.

              OpenFlow 1.0 and 1.1 switches always reset counters in this sit‐
              uation, as if <b>reset_counts</b> were always specified.

              Open vSwitch 1.10 added support for <b>reset_counts</b>.

       <b>no_packet_counts</b>
       <b>no_byte_counts</b>
              Adding  these flags to a flow advises an OpenFlow 1.3 (or later)
              switch that the controller does not need packet  or  byte  coun‐
              ters,  respectively,  for the flow.  Some switch implementations
              might achieve higher performance or reduce resource  consumption
              when  these  flags  are used.  These flags provide no benefit to
              the Open vSwitch software switch implementation.

              OpenFlow 1.2 and earlier do not support these flags.

              Open  vSwitch  1.10  added  support  for  <b>no_packet_counts</b>   and
              <b>no_byte_counts</b>.

       The <b>dump-flows</b>, <b>dump-aggregate</b>, <b>del-flow</b> and <b>del-flows</b> commands support
       these additional optional fields:

       <b>out_port=</b><u>port</u>
              If  set,  a matching flow must include an output action to <u>port</u>,
              which must be an OpenFlow port number or name (e.g. <b>local</b>).

       <b>out_group=</b><u>group</u>
              If set, a matching flow must  include  an  <b>group</b>  action  naming
              <u>group</u>,  which  must  be an OpenFlow group number.  This field is
              supported in Open vSwitch 2.5 and later  and  requires  OpenFlow
              1.1 or later.

   <b>Table</b> <b>Entry</b> <b>Output</b>
       The <b>dump-tables</b> and <b>dump-aggregate</b> commands print information about the
       entries in a datapath's tables.  Each line of output is a flow entry as
       described in <b>Flow</b> <b>Syntax</b>, above, plus some additional fields:

       <b>duration=</b><u>secs</u>
              The  time,  in  seconds,  that  the entry has been in the table.
              <u>secs</u> includes as much precision as the switch provides, possibly
              to nanosecond resolution.

       <b>n_packets</b>
              The number of packets that have matched the entry.

       <b>n_bytes</b>
              The total number of bytes from packets that have matched the en‐
              try.

       The following additional fields are included only if the switch is Open
       vSwitch 1.6 or later and the NXM flow format is used to dump  the  flow
       (see the description of the <b>--flow-format</b> option below).  The values of
       these  additional  fields  are  approximations  only  and in particular
       <b>idle_age</b> will sometimes become nonzero even for busy flows.

       <b>hard_age=</b><u>secs</u>
              The integer number of seconds since the flow was added or  modi‐
              fied.  <b>hard_age</b> is displayed only if it differs from the integer
              part  of  <b>duration</b>.   (This  is  separate  from <b>duration</b> because
              <b>mod-flows</b> restarts the <b>hard_timeout</b> timer without zeroing  <b>dura‐</b>
              <b>tion</b>.)

       <b>idle_age=</b><u>secs</u>
              The integer number of seconds that have passed without any pack‐
              ets passing through the flow.

   <b>Packet-Out</b> <b>Syntax</b>
       <b>ovs-ofctl</b>  <b>bundle</b>  command  accepts  packet-outs to be specified in the
       bundle file.  Each packet-out comprises of a series of <u>field</u><b>=</b><u>value</u>  as‐
       signments,  separated by commas or white space.  (Embedding spaces into
       a packet-out description normally requires quoting to prevent the shell
       from breaking the description into multiple arguments.).  Unless  noted
       otherwise  only the last instance of each field is honoured.  This same
       syntax is also supported by the <b>ovs-ofctl</b> <b>packet-out</b> command.

       <b>in_port=</b><u>port</u>
              The port number to be considered the in_port when processing ac‐
              tions.  This can be any valid OpenFlow port number,  or  any  of
              the <b>LOCAL</b>, <b>CONTROLLER</b>, or <b>NONE</b>.  This field is required.


       <u>pipeline</u><b>_</b><u>field</u>=<u>value</u>
              Optionally,  user  can  specify  a list of pipeline fields for a
              packet-out message. The supported pipeline fields includes  <b>tun‐</b>
              <b>nel</b> <b>fields</b> and <b>register</b> <b>fields</b> as defined in <b>ovs-fields</b>(7).


       <b>packet=</b><u>hex-string</u>
              The  actual packet to send, expressed as a string of hexadecimal
              bytes.  This field is required.


       <b>actions=</b>[<u>action</u>][<b>,</b><u>action</u>...]
              The syntax of actions are identical to the  <b>actions=</b>  field  de‐
              scribed  in <b>Flow</b> <b>Syntax</b> above.  Specifying <b>actions=</b> is optional,
              but omitting actions is interpreted as a  drop,  so  the  packet
              will  not  be  sent  anywhere  from the switch.  <b>actions</b> must be
              specified at the end of each line, like for flow mods.

   <b>Group</b> <b>Syntax</b>
       Some <b>ovs-ofctl</b> commands accept an argument that describes  a  group  or
       groups.   Such  flow descriptions comprise a series <u>field</u><b>=</b><u>value</u> assign‐
       ments, separated by commas or white space.  (Embedding  spaces  into  a
       group  description  normally requires quoting to prevent the shell from
       breaking the description into multiple arguments.). Unless noted other‐
       wise only the last instance of each field is honoured.

       <b>group_id=</b><u>id</u>
              The integer group id of group.  When this field is specified  in
              <b>del-groups</b> or <b>dump-groups</b>, the keyword "all" may be used to des‐
              ignate all groups.  This field is required.



       <b>type=</b><u>type</u>
              The type of the group.  The <b>add-group</b>, <b>add-groups</b> and <b>mod-groups</b>
              commands  require  this  field.  It is prohibited for other com‐
              mands. The following keywords designated the allowed types:

              <b>all</b>    Execute all buckets in the group.

              <b>select</b> Execute one bucket in the  group,  balancing  across  the
                     buckets  according to their weights.  To select a bucket,
                     for each live bucket, Open vSwitch hashes flow data  with
                     the  bucket ID and multiplies by the bucket weight to ob‐
                     tain a ``score,'' and then selects the  bucket  with  the
                     highest  score.  Use <b>selection_method</b> to control the flow
                     data used for selection.

              <b>indirect</b>
                     Executes the one bucket in the group.

              <b>ff</b>
              <b>fast_failover</b>
                     Executes the first live bucket in the group which is  as‐
                     sociated with a live port or group.


       <b>command_bucket_id=</b><u>id</u>
              The bucket to operate on.  The <b>insert-buckets</b> and <b>remove-buckets</b>
              commands  require  this  field.  It is prohibited for other com‐
              mands.  <u>id</u> may be an integer or one of the following keywords:

              <b>all</b>    Operate on all buckets in the  group.   Only  valid  when
                     used  with  the  <b>remove-buckets</b> command in which case the
                     effect is to remove all buckets from the group.

              <b>first</b>  Operate on the first bucket present in the group.  In the
                     case of the <b>insert-buckets</b> command the effect is  to  in‐
                     sert  new  bucets  just  before  the first bucket already
                     present in the group; or to replace the  buckets  of  the
                     group  if  there  are  no  buckets already present in the
                     group.  In the case of the <b>remove-buckets</b> command the ef‐
                     fect is to remove the first bucket of the  group;  or  do
                     nothing if there are no buckets present in the group.

              <b>last</b>   Operate  on the last bucket present in the group.  In the
                     case of the <b>insert-buckets</b> command the effect is  to  in‐
                     sert  new  bucets  just  after  the  last  bucket already
                     present in the group; or to replace the  buckets  of  the
                     group  if  there  are  no  buckets already present in the
                     group.  In the case of the <b>remove-buckets</b> command the ef‐
                     fect is to remove the last bucket of  the  group;  or  do
                     nothing if there are no buckets present in the group.

              If  <u>id</u>  is an integer then it should correspond to the <b>bucket_id</b>
              of a bucket present in the group.  In case of the <b>insert-buckets</b>
              command the effect is to insert buckets just before  the  bucket
              in  the  group  whose  <b>bucket_id</b> is <u>id</u>.  In case of the <b>iremove-</b>
              <b>buckets</b> command the effect is to remove the in the  group  whose
              <b>bucket_id</b>  is  <u>id</u>.  It is an error if there is no bucket persent
              group in whose <b>bucket_id</b> is <u>id</u>.


       <b>selection_method</b>=<u>method</u>
              The selection method used to select a bucket for a select group.
              This is a string of 1 to 15 bytes in length known to lower  lay‐
              ers.   This  field  is  optional  for  <b>add-group</b>, <b>add-groups</b> and
              <b>mod-group</b> commands on groups of type <b>select</b>.  Prohibited  other‐
              wise.   If  no selection method is specified, Open vSwitch up to
              release 2.9 applies the <b>hash</b> method with  default  fields.  From
              2.10  onwards  Open  vSwitch defaults to the <b>dp_hash</b> method with
              symmetric L3/L4 hash algorithm, as long as  the  weighted  group
              buckets  can  be  mapped to dp_hash values with sufficient accu‐
              racy.  In 2.10 this was restricted to a maximum of  64  buckets,
              and  in 2.17 the limit was raised to 256 buckets.  In those rare
              cases Open vSwitch 2.10 and later fall back to the  <b>hash</b>  method
              with the default set of hash fields.

              <b>dp_hash</b>
                     Use  a  datapath computed hash value.  The hash algorithm
                     varies   across   different   datapath   implementations.
                     <b>dp_hash</b>   uses   the   upper   32   bits  of  the  <b>selec‐</b>
                     <b>tion_method_param</b> as the datapath hash  algorithm  selec‐
                     tor.   The  supported values are <b>0</b> (corresponding to hash
                     computation over the IP 5-tuple) and <b>1</b> (corresponding  to
                     a  <u>symmetric</u>  hash computation over the IP 5-tuple).  Se‐
                     lecting specific fields with the  <b>fields</b>  option  is  not
                     supported  with  <b>dp_hash</b>).  The lower 32 bits are used as
                     the hash basis.

                     Using <b>dp_hash</b> has the advantage that it does not  require
                     the  generated  datapath  flows  to exact match any addi‐
                     tional packet header fields.  For example, even if multi‐
                     ple TCP connections thus hashed to different select group
                     buckets have different source port numbers, generally all
                     of them would be handled with a small set of already  es‐
                     tablished  datapath  flows, resulting in less latency for
                     TCP SYN packets.  The downside is that the  shared  data‐
                     path  flows must match each packet twice, as the datapath
                     hash value calculation happens only when  needed,  and  a
                     second match is required to match some bits of its value.
                     This  double-matching  incurs  a small additional latency
                     cost for each packet, but this latency is orders of  mag‐
                     nitude  less  than  the  latency of creating new datapath
                     flows for new TCP connections.

              <b>hash</b>   Use a hash computed over the fields  specified  with  the
                     <b>fields</b>  option,  see below.  If no hash fields are speci‐
                     fied, <b>hash</b> defaults to a symmetric hash over the combina‐
                     tion of MAC addresses, VLAN  tags,  Ether  type,  IP  ad‐
                     dresses  and  L4  port  numbers.   <b>hash</b>  uses  the <b>selec‐</b>
                     <b>tion_method_param</b> as the hash basis.

                     Note that the hashed fields become exact matched  by  the
                     datapath  flows.   For example, if the TCP source port is
                     hashed, the created datapath flows will  match  the  spe‐
                     cific  TCP  source  port  value present in the packet re‐
                     ceived.  Since each TCP connection generally has  a  dif‐
                     ferent  source  port value, a separate datapath flow will
                     be need to be  inserted  for  each  TCP  connection  thus
                     hashed to a select group bucket.

              This  option  uses  a Netronome OpenFlow extension which is only
              supported when using Open vSwitch 2.4 and  later  with  OpenFlow
              1.5 and later.


       <b>selection_method_param</b>=<u>param</u>
              64-bit integer parameter to the selection method selected by the
              <b>selection_method</b>  field.   The parameter's use is defined by the
              lower-layer that implements the  <b>selection_method</b>.   It  is  op‐
              tional if the <b>selection_method</b> field is specified as a non-empty
              string.  Prohibited otherwise. The default value is zero.

              This  option  uses  a Netronome OpenFlow extension which is only
              supported when using Open vSwitch 2.4 and  later  with  OpenFlow
              1.5 and later.


       <b>fields</b>=<u>field</u>
       <b>fields(</b><u>field</u>[<b>=</b><u>mask</u>]...<b>)</b>
              The  field parameters to selection method selected by the <b>selec‐</b>
              <b>tion_method</b> field.  The syntax is described in <b>Flow</b> <b>Syntax</b>  with
              the  additional  restrictions  that if a value is provided it is
              treated as a wildcard mask and wildcard masks following a  slash
              are prohibited. The pre-requisites of fields must be provided by
              any  flows  that  output to the group.  The use of the fields is
              defined by the lower-layer that implements the <b>selection_method</b>.
              They are optional if the <b>selection_method</b> field is specified  as
              ``hash', prohibited otherwise.  The default is no fields.

              This  option  will  use  a Netronome OpenFlow extension which is
              only supported when using Open vSwitch 2.4 and later with  Open‐
              Flow 1.5 and later.


       <b>bucket</b>=<u>bucket</u><b>_</b><u>parameters</u>
              The  <b>add-group</b>,  <b>add-groups</b>  and  <b>mod-group</b>  commands require at
              least one bucket field. Bucket  fields  must  appear  after  all
              other  fields.  Multiple bucket fields to specify multiple buck‐
              ets.  The order in which buckets are  specified  corresponds  to
              their order in the group. If the type of the group is "indirect"
              then  only  one  group may be specified.  <u>bucket</u><b>_</b><u>parameters</u> con‐
              sists of a list of <u>field</u><b>=</b><u>value</u> assignments, separated by  commas
              or  white  space  followed by a comma-separated list of actions.
              The fields for <u>bucket</u><b>_</b><u>parameters</u> are:

              <b>bucket_id=</b><u>id</u>
                     The 32-bit  integer  group  id  of  the  bucket.   Values
                     greater  than  0xffffff00  are  reserved.  This field was
                     added in Open vSwitch 2.4 to conform  with  the  OpenFlow
                     1.5  specification. It is not supported when earlier ver‐
                     sions of OpenFlow are used.  Open vSwitch will  automati‐
                     cally allocate bucket ids when they are not specified.

              <b>actions=</b>[<u>action</u>][<b>,</b><u>action</u>...]
                     The syntax of actions are identical to the <b>actions=</b> field
                     described  in  <b>Flow</b>  <b>Syntax</b> above. Specifying <b>actions=</b> is
                     optional, any unknown bucket  parameter  will  be  inter‐
                     preted as an action.

              <b>weight=</b><u>value</u>
                     The relative weight of the bucket as an integer. This may
                     be  used  by  the  switch during bucket select for groups
                     whose <b>type</b> is <b>select</b>.

              <b>watch_port=</b><u>port</u>
                     Port used to determine liveness of group.   This  or  the
                     <b>watch_group</b> field is required for groups whose <b>type</b> is <b>ff</b>
                     or <b>fast_failover</b>.  This or the <b>watch_group</b> field can also
                     be used for groups whose <b>type</b> is <b>select</b>.

              <b>watch_group=</b><u>group</u><b>_</b><u>id</u>
                     Group  identifier  of group used to determine liveness of
                     group.  This or the  <b>watch_port</b>  field  is  required  for
                     groups  whose  <b>type</b>  is <b>ff</b> or <b>fast_failover</b>.  This or the
                     <b>watch_port</b> field can also be used for groups  whose  <b>type</b>
                     is <b>select</b>.

   <b>Meter</b> <b>Syntax</b>
       The  meter  table  commands  accept an argument that describes a meter.
       Such meter descriptions comprise a series <u>field</u><b>=</b><u>value</u> assignments, sep‐
       arated by commas or white space.  (Embedding spaces into  a  group  de‐
       scription  normally requires quoting to prevent the shell from breaking
       the description into multiple arguments.). Unless noted otherwise  only
       the last instance of each field is honoured.

       <b>meter=</b><u>id</u>
              The  identifier  for the meter.  An integer is used to specify a
              user-defined meter.  In  addition,  the  keywords  "all",  "con‐
              troller",  and "slowpath", are also supported as virtual meters.
              The "controller" and "slowpath" virtual meters apply to  packets
              sent to the controller and to the OVS userspace, respectively.

              When this field is specified in <b>del-meter</b>, <b>dump-meter</b>, or <b>meter-</b>
              <b>stats</b>,  the  keyword  "all" may be used to designate all meters.
              This field is required, except for <b>meter-stats</b>, which dumps  all
              stats when this field is not specified.

       <b>kbps</b>
       <b>pktps</b>  The  unit  for  the  <b>rate</b>  and <b>burst_size</b> band parameters.  <b>kbps</b>
              specifies kilobits per second, and <b>pktps</b> specifies  packets  per
              second.  A unit is required for the <b>add-meter</b> and <b>mod-meter</b> com‐
              mands.


       <b>burst</b>  If  set,  enables  burst  support  for  meter  bands through the
              <b>burst_size</b> parameter.


       <b>stats</b>  If set, enables the collection of meter and band statistics.


       <b>bands</b>=<u>band</u><b>_</b><u>parameters</u>
              The <b>add-meter</b> and <b>mod-meter</b> commands require at least  one  band
              specification. Bands must appear after all other fields.

              <b>type=</b><u>type</u>
                     The  type  of  the meter band.  This keyword starts a new
                     band specification.  Each band  specifies  a  rate  above
                     which the band is to take some action. The action depends
                     on  the  band type.  If multiple bands' rate is exceeded,
                     then the band with the highest rate  among  the  exceeded
                     bands  is selected.  The following keywords designate the
                     allowed meter band types:

                     <b>drop</b>   Drop packets exceeding the band's rate limit.

              The other <u>band</u><b>_</b><u>parameters</u> are:

              <b>rate=</b><u>value</u>
                     The relative rate limit for this band,  in  kilobits  per
                     second  or  packets per second, depending on whether <b>kbps</b>
                     or <b>pktps</b> was specified.

              <b>burst_size=</b><u>size</u>
                     If <b>burst</b> is specified for the meter entry, configures the
                     maximum burst allowed for the band in kilobits  or  pack‐
                     ets,  depending  on  whether <b>kbps</b> or <b>pktps</b> was specified.
                     If unspecified, the switch is free to select some reason‐
                     able value depending on its configuration.

<b>OPTIONS</b>
       <b>--strict</b>
              Uses strict matching when running flow modification commands.

       <b>--names</b>
       <b>--no-names</b>
              Every OpenFlow port has a name and a number, and every  OpenFlow
              flow  table  has  a  number  and  sometimes a name.  By default,
              <b>ovs-ofctl</b> commands accept both port and table names and numbers,
              and they display port and table names if <b>ovs-ofctl</b> is running on
              an  interactive  console,  numbers  otherwise.   With   <b>--names</b>,
              <b>ovs-ofctl</b> commands both accept and display port and table names;
              with  <b>--no-names</b>,  commands  neither accept nor display port and
              table names.

              If a port or table name contains special characters or might  be
              confused  with  a  keyword  within a flow, it may be enclosed in
              double quotes (escaped from the  shell).   If  necessary,  JSON-
              style  escape  sequences may be used inside quotes, as specified
              in RFC 7159.  When it displays port and table  names,  <b>ovs-ofctl</b>
              quotes  any  name  that does not start with a letter followed by
              letters or digits.

              Open vSwitch added support for port  names  and  these  options.
              Open  vSwitch  2.10 added support for table names.  Earlier ver‐
              sions always behaved as if <b>--no-names</b> were specified.

              Open vSwitch does not place its own limit on the length of  port
              names,  but  OpenFlow  limits  port  names to 15 bytes.  Because
              ovs-ofctl uses OpenFlow to retrieve  the  mapping  between  port
              names  and  numbers,  names longer than this limit will be trun‐
              cated for both display  and  acceptance.   Truncation  can  also
              cause  long  names  that are different to appear to be the same;
              when a switch has two ports  with  the  same  (truncated)  name,
              <b>ovs-ofctl</b>  refuses to display or accept the name, using the num‐
              ber instead.

              OpenFlow and Open vSwitch limit table names to 32 bytes.

       <b>--stats</b>
       <b>--no-stats</b>
              The <b>dump-flows</b> command by default,  or  with  <b>--stats</b>,  includes
              flow  duration, packet and byte counts, and idle and hard age in
              its output.  With <b>--no-stats</b>, it omits all of these, as well  as
              cookie values and table IDs if they are zero.

       <b>--read-only</b>
              Do not execute read/write commands.

       <b>--bundle</b>
              Execute flow mods as an OpenFlow 1.4 atomic bundle transaction.

              •      Within a bundle, all flow mods are processed in the order
                     they  appear  and as a single atomic transaction, meaning
                     that if one of them fails, the  whole  transaction  fails
                     and none of the changes are made to the <u>switch</u>'s flow ta‐
                     ble,  and  that each given datapath packet traversing the
                     OpenFlow tables sees the flow tables either as before the
                     transaction, or after all the flow  mods  in  the  bundle
                     have been successfully applied.

              •      The  beginning and the end of the flow table modification
                     commands in a bundle are delimited with OpenFlow 1.4 bun‐
                     dle control messages, which makes it possible  to  stream
                     the included commands without explicit OpenFlow barriers,
                     which  are otherwise used after each flow table modifica‐
                     tion command.  This may make large modifications  execute
                     faster as a bundle.

              •      Bundles  require  OpenFlow 1.4 or higher.  An explicit <b>-O</b>
                     <b>OpenFlow14</b> option is not needed, but you may need to  en‐
                     able  OpenFlow  1.4  support for OVS by setting the OVSDB
                     <u>protocols</u> column in the <u>bridge</u> table.

       <b>-O</b> [<u>version</u>[<b>,</b><u>version</u>]...]
       <b>--protocols=</b>[<u>version</u>[<b>,</b><u>version</u>]...]
              Sets the OpenFlow protocol versions that are allowed when estab‐
              lishing an OpenFlow session.

              These protocol versions are enabled by default:

              •      <b>OpenFlow10</b>, for OpenFlow 1.0.
       The following protocol versions are generally supported, but  for  com‐
       patibility  with older versions of Open vSwitch they are not enabled by
       default:

              •      <b>OpenFlow11</b>, for OpenFlow 1.1.

              •      <b>OpenFlow12</b>, for OpenFlow 1.2.

              •      <b>OpenFlow13</b>, for OpenFlow 1.3.

              •      <b>OpenFlow14</b>, for OpenFlow 1.4.

              •      <b>OpenFlow15</b>, for OpenFlow 1.5.

       <b>-F</b> <u>format</u>[<b>,</b><u>format</u>...]
       <b>--flow-format=</b><u>format</u>[<b>,</b><u>format</u>...]
              <b>ovs-ofctl</b> supports the following individual  flow  formats,  any
              number of which may be listed as <u>format</u>:

              <b>OpenFlow10-table_id</b>
                     This is the standard OpenFlow 1.0 flow format.  All Open‐
                     Flow  switches  and  all versions of Open vSwitch support
                     this flow format.

              <b>OpenFlow10+table_id</b>
                     This is the standard OpenFlow  1.0  flow  format  plus  a
                     Nicira  extension  that  allows  <b>ovs-ofctl</b> to specify the
                     flow table in which a particular flow should  be  placed.
                     Open vSwitch 1.2 and later supports this flow format.

              <b>NXM-table_id</b> (Nicira Extended Match)
                     This  Nicira extension to OpenFlow is flexible and exten‐
                     sible.  It supports all of the  Nicira  flow  extensions,
                     such as <b>tun_id</b> and registers.  Open vSwitch 1.1 and later
                     supports this flow format.

              <b>NXM+table_id</b> (Nicira Extended Match)
                     This  combines  Nicira Extended match with the ability to
                     place a flow in a specific table.  Open vSwitch  1.2  and
                     later supports this flow format.

              <b>OXM-OpenFlow12</b>
              <b>OXM-OpenFlow13</b>
              <b>OXM-OpenFlow14</b>
              <b>OXM-OpenFlow15</b>
                     These  are  the  standard OXM (OpenFlow Extensible Match)
                     flow format in OpenFlow 1.2 and later.

              <b>ovs-ofctl</b> also supports the following abbreviations for  collec‐
              tions of flow formats:

              <b>any</b>    Any supported flow format.

              <b>OpenFlow10</b>
                     <b>OpenFlow10-table_id</b> or <b>OpenFlow10+table_id</b>.

              <b>NXM</b>    <b>NXM-table_id</b> or <b>NXM+table_id</b>.

              <b>OXM</b>    <b>OXM-OpenFlow12</b>, <b>OXM-OpenFlow13</b>, or <b>OXM-OpenFlow14</b>.

              For  commands  that  modify the flow table, <b>ovs-ofctl</b> by default
              negotiates the most widely supported flow format  that  supports
              the  flows being added.  For commands that query the flow table,
              <b>ovs-ofctl</b> by default uses the most advanced format supported  by
              the switch.

              This  option,  where  <u>format</u> is a comma-separated list of one or
              more of the formats listed above, limits <b>ovs-ofctl</b>'s  choice  of
              flow format.  If a command cannot work as requested using one of
              the specified flow formats, <b>ovs-ofctl</b> will report a fatal error.

       <b>-P</b> <u>format</u>
       <b>--packet-in-format=</b><u>format</u>
              <b>ovs-ofctl</b> supports the following ``packet-in'' formats, in order
              of increasing capability:

              <b>standard</b>
                     This   uses  the  <b>OFPT_PACKET_IN</b>  message,  the  standard
                     ``packet-in'' message for  any  given  OpenFlow  version.
                     Every OpenFlow switch that supports a given OpenFlow ver‐
                     sion supports this format.

              <b>nxt_packet_in</b>
                     This  uses  the <b>NXT_PACKET_IN</b> message, which adds many of
                     the capabilities of the OpenFlow 1.1 and later  ``packet-
                     in''  messages before those OpenFlow versions were avail‐
                     able in Open vSwitch.  Open vSwitch 1.1 and later support
                     this format.  Only Open vSwitch 2.6 and  later,  however,
                     support  it for OpenFlow 1.1 and later (but there is lit‐
                     tle reason to use it with those versions of OpenFlow).

              <b>nxt_packet_in2</b>
                     This uses the <b>NXT_PACKET_IN2</b> message, which is extensible
                     and should avoid the need to define  new  formats  later.
                     In  particular,  this  format  supports passing arbitrary
                     user-provided data to a controller using the <b>userdata</b> <b>op‐</b>
                     <b>tion</b> <b>on</b> <b>the</b> <b>controller</b>  action.   Open  vSwitch  2.6  and
                     later support this format.

              Without  this  option,  <b>ovs-ofctl</b>  prefers <b>nxt_packet_in2</b> if the
              switch supports it.  Otherwise,  if  OpenFlow  1.0  is  in  use,
              <b>ovs-ofctl</b> prefers <b>nxt_packet_in</b> if the switch supports it.  Oth‐
              erwise,  <b>ovs-ofctl</b>  falls back to the <b>standard</b> packet-in format.
              When this option is specified, <b>ovs-ofctl</b> insists on the selected
              format.  If the switch does not support  the  requested  format,
              <b>ovs-ofctl</b> will report a fatal error.

              Before  version  2.6,  Open vSwitch called <b>standard</b> format <b>open‐</b>
              <b>flow10</b> and <b>nxt_packet_in</b> format <b>nxm</b>, and <b>ovs-ofctl</b> still accepts
              these names as synonyms.  (The name <b>openflow10</b>  was  a  misnomer
              because this format actually varies from one OpenFlow version to
              another; it is not consistently OpenFlow 1.0 format.  Similarly,
              when  <b>nxt_packet_in2</b> was introduced, the name <b>nxm</b> became confus‐
              ing because it also uses OXM/NXM.)

              This option affects only the <b>monitor</b> command.

       <b>--timestamp</b>
              Print a timestamp before each received packet.  This option only
              affects the <b>monitor</b>, <b>snoop</b>, and <b>ofp-parse-pcap</b> commands.

       <b>-m</b>
       <b>--more</b> Increases the verbosity of OpenFlow messages printed and  logged
              by  <b>ovs-ofctl</b>  commands.   Specify this option more than once to
              increase verbosity further.

       <b>--sort</b>[<b>=</b><u>field</u>]
       <b>--rsort</b>[<b>=</b><u>field</u>]
              Display output sorted by flow <u>field</u> in ascending (<b>--sort</b>) or de‐
              scending (<b>--rsort</b>) order, where <u>field</u> is any of the fields  that
              are  allowed for matching or <b>priority</b> to sort by priority.  When
              <u>field</u> is omitted, the output is  sorted  by  priority.   Specify
              these options multiple times to sort by multiple fields.

              Any  given flow will not necessarily specify a value for a given
              field.  This requires special treatement:

              •      A flow that does not specify any part of a field that  is
                     used  for  sorting  is sorted after all the flows that do
                     specify the field.  For example, <b>--sort=tcp_src</b> will sort
                     all the flows that specify a TCP source port in ascending
                     order, followed by the flows that do not  specify  a  TCP
                     source port at all.

              •      A flow that only specifies some bits in a field is sorted
                     as  if  the  wildcarded  bits  were  zero.   For example,
                     <b>--sort=nw_src</b>  would   sort   a   flow   that   specifies
                     <b>nw_src=192.168.0.0/24</b> the same as <b>nw_src=192.168.0.0</b>.

              These options currently affect only <b>dump-flows</b> output.

   <b>Daemon</b> <b>Options</b>
       The following options are valid on POSIX based platforms.

       <b>--pidfile</b>[<b>=</b><u>pidfile</u>]
              Causes a file (by default, <b>ovs-ofctl.pid</b>) to be created indicat‐
              ing  the PID of the running process.  If the <u>pidfile</u> argument is
              not specified, or if it does not begin with <b>/</b>, then it  is  cre‐
              ated in <b>/usr/local/var/run/openvswitch</b>.

              If <b>--pidfile</b> is not specified, no pidfile is created.

       <b>--overwrite-pidfile</b>
              By  default,  when <b>--pidfile</b> is specified and the specified pid‐
              file  already  exists  and  is  locked  by  a  running  process,
              <b>ovs-ofctl</b>  refuses  to  start.   Specify  <b>--overwrite-pidfile</b> to
              cause it to instead overwrite the pidfile.

              When <b>--pidfile</b> is not specified, this option has no effect.

       <b>--detach</b>
              Runs <b>ovs-ofctl</b> as a background process.  The process forks,  and
              in  the  child it starts a new session, closes the standard file
              descriptors (which has the side effect of disabling  logging  to
              the console), and changes its current directory to the root (un‐
              less  <b>--no-chdir</b>  is  specified).  After the child completes its
              initialization, the parent exits.  <b>ovs-ofctl</b> detaches only  when
              executing the <b>monitor</b> or <b>snoop</b> commands.

       <b>--monitor</b>
              Creates  an  additional process to monitor the <b>ovs-ofctl</b> daemon.
              If the daemon dies due to a signal that indicates a  programming
              error   (<b>SIGABRT</b>,  <b>SIGALRM</b>,  <b>SIGBUS</b>,  <b>SIGFPE</b>,  <b>SIGILL</b>,  <b>SIGPIPE</b>,
              <b>SIGSEGV</b>, <b>SIGXCPU</b>, or <b>SIGXFSZ</b>) then the monitor process starts  a
              new copy of it.  If the daemon dies or exits for another reason,
              the monitor process exits.

              This  option  is  normally used with <b>--detach</b>, but it also func‐
              tions without it.

       <b>--no-chdir</b>
              By default, when <b>--detach</b> is specified,  <b>ovs-ofctl</b>  changes  its
              current  working  directory  to  the root directory after it de‐
              taches.  Otherwise, invoking <b>ovs-ofctl</b> from a carelessly  chosen
              directory  would  prevent  the administrator from unmounting the
              file system that holds that directory.

              Specifying  <b>--no-chdir</b>  suppresses  this  behavior,   preventing
              <b>ovs-ofctl</b> from changing its current working directory.  This may
              be useful for collecting core files, since it is common behavior
              to  write  core dumps into the current working directory and the
              root directory is not a good directory to use.

              This option has no effect when <b>--detach</b> is not specified.

       <b>--no-self-confinement</b>
              By default daemon will try to self-confine itself to  work  with
              files  under well-known directories determined during build.  It
              is better to stick with this default behavior  and  not  to  use
              this  flag  unless  some other Access Control is used to confine
              daemon.  Note that in contrast to other access control implemen‐
              tations that are typically enforced from kernel-space (e.g.  DAC
              or  MAC), self-confinement is imposed from the user-space daemon
              itself and hence should not be considered as a full  confinement
              strategy, but instead should be viewed as an additional layer of
              security.

       <b>--user</b> Causes  <b>ovs-ofctl</b>  to  run  as  a  different  user  specified in
              "user:group", thus dropping most of the root  privileges.  Short
              forms "user" and ":group" are also allowed, with current user or
              group are assumed respectively. Only daemons started by the root
              user accepts this argument.

              On   Linux,   daemons   will   be   granted   CAP_IPC_LOCK   and
              CAP_NET_BIND_SERVICES before dropping root  privileges.  Daemons
              that  interact  with  a  datapath, such as <b>ovs-vswitchd</b>, will be
              granted three  additional  capabilities,  namely  CAP_NET_ADMIN,
              CAP_NET_BROADCAST  and  CAP_NET_RAW.  The capability change will
              apply even if the new user is root.

              On Windows, this option is not currently supported. For security
              reasons, specifying this option will cause  the  daemon  process
              not to start.

       <b>--unixctl=</b><u>socket</u>
              Sets  the  name of the control socket on which <b>ovs-ofctl</b> listens
              for runtime management commands  (see  <b>RUNTIME</b>  <b>MANAGEMENT</b>  <b>COM‐</b>
              <b>MANDS</b>,  below).   If  <u>socket</u> does not begin with <b>/</b>, it is inter‐
              preted  as  relative  to   <b>/usr/local/var/run/openvswitch</b>.    If
              <b>--unixctl</b>  is  not  used  at all, the default socket is <b>/usr/lo‐</b>
              <b>cal/var/run/openvswitch/ovs-ofctl.</b><u>pid</u><b>.ctl</b>,    where    <u>pid</u>    is
              <b>ovs-ofctl</b>'s process ID.

              On Windows a local named pipe is used to listen for runtime man‐
              agement  commands.   A  file  is created in the absolute path as
              pointed by <u>socket</u> or if <b>--unixctl</b> is not used at all, a file  is
              created as <b>ovs-ofctl.ctl</b> in the configured <u>OVS</u><b>_</b><u>RUNDIR</u> directory.
              The  file  exists  just  to  mimic the behavior of a Unix domain
              socket.

              Specifying <b>none</b> for <u>socket</u> disables the control socket feature.

   <b>Public</b> <b>Key</b> <b>Infrastructure</b> <b>Options</b>
       <b>-p</b> <u>privkey.pem</u>
       <b>--private-key=</b><u>privkey.pem</u>
              Specifies  a  PEM  file  containing  the  private  key  used  as
              <b>ovs-ofctl</b>'s identity for outgoing SSL/TLS connections.

       <b>-c</b> <u>cert.pem</u>
       <b>--certificate=</b><u>cert.pem</u>
              Specifies a PEM file containing a certificate that certifies the
              private  key specified on <b>-p</b> or <b>--private-key</b> to be trustworthy.
              The certificate must be signed by the certificate authority (CA)
              that the peer in SSL/TLS connections will use to verify it.

       <b>-C</b> <u>cacert.pem</u>
       <b>--ca-cert=</b><u>cacert.pem</u>
              Specifies  a  PEM  file  containing  the  CA  certificate   that
              <b>ovs-ofctl</b>  should  use to verify certificates presented to it by
              SSL/TLS peers.  (This may be the same certificate  that  SSL/TLS
              peers  use  to  verify the certificate specified on <b>-c</b> or <b>--cer‐</b>
              <b>tificate</b>, or it may be a different one, depending on the PKI de‐
              sign in use.)

       <b>-C</b> <b>none</b>
       <b>--ca-cert=none</b>
              Disables  verification  of  certificates  presented  by  SSL/TLS
              peers.   This  introduces a security risk, because it means that
              certificates cannot be verified to be  those  of  known  trusted
              hosts.

       <b>-v</b>[<u>spec</u>]
       <b>--verbose=</b>[<u>spec</u>]
              Sets  logging  levels.  Without any <u>spec</u>, sets the log level for
              every module and destination to <b>dbg</b>.  Otherwise, <u>spec</u> is a  list
              of words separated by spaces or commas or colons, up to one from
              each category below:

              •      A  valid  module name, as displayed by the <b>vlog/list</b> com‐
                     mand on <b>ovs-appctl</b>(8), limits the log level change to the
                     specified module.

              •      <b>syslog</b>, <b>console</b>, or <b>file</b>, to limit the log  level  change
                     to  only to the system log, to the console, or to a file,
                     respectively.   (If  <b>--detach</b>  is  specified,   <b>ovs-ofctl</b>
                     closes  its  standard file descriptors, so logging to the
                     console will have no effect.)

                     On Windows platform, <b>syslog</b> is accepted as a word and  is
                     only  useful  along  with the <b>--syslog-target</b> option (the
                     word has no effect otherwise).

              •      <b>off</b>, <b>emer</b>, <b>err</b>, <b>warn</b>, <b>info</b>, or <b>dbg</b>, to  control  the  log
                     level.   Messages of the given severity or higher will be
                     logged, and messages of lower severity will  be  filtered
                     out.   <b>off</b>  filters  out all messages.  See <b>ovs-appctl</b>(8)
                     for a definition of each log level.

              Case is not significant within <u>spec</u>.

              Regardless of the log levels set for <b>file</b>,  logging  to  a  file
              will not take place unless <b>--log-file</b> is also specified (see be‐
              low).

              For compatibility with older versions of OVS, <b>any</b> is accepted as
              a word but has no effect.

       <b>-v</b>
       <b>--verbose</b>
              Sets  the  maximum logging verbosity level, equivalent to <b>--ver‐</b>
              <b>bose=dbg</b>.

       <b>-vPATTERN:</b><u>destination</u><b>:</b><u>pattern</u>
       <b>--verbose=PATTERN:</b><u>destination</u><b>:</b><u>pattern</u>
              Sets the log pattern  for  <u>destination</u>  to  <u>pattern</u>.   Refer  to
              <b>ovs-appctl</b>(8) for a description of the valid syntax for <u>pattern</u>.

       <b>-vFACILITY:</b><u>facility</u>
       <b>--verbose=FACILITY:</b><u>facility</u>
              Sets  the  RFC5424  facility of the log message. <u>facility</u> can be
              one of <b>kern</b>, <b>user</b>, <b>mail</b>, <b>daemon</b>, <b>auth</b>, <b>syslog</b>, <b>lpr</b>, <b>news</b>,  <b>uucp</b>,
              <b>clock</b>,  <b>ftp</b>,  <b>ntp</b>, <b>audit</b>, <b>alert</b>, <b>clock2</b>, <b>local0</b>, <b>local1</b>, <b>local2</b>,
              <b>local3</b>, <b>local4</b>, <b>local5</b>, <b>local6</b> or <b>local7</b>. If this option is  not
              specified,  <b>daemon</b>  is  used as the default for the local system
              syslog and <b>local0</b> is used while sending a message to the  target
              provided via the <b>--syslog-target</b> option.

       <b>--log-file</b>[<b>=</b><u>file</u>]
              Enables  logging  to  a  file.  If <u>file</u> is specified, then it is
              used as the exact name for the log file.  The default  log  file
              name   used  if  <u>file</u>  is  omitted  is  <b>/usr/local/var/log/open‐</b>
              <b>vswitch/ovs-ofctl.log</b>.

       <b>--syslog-target=</b><u>host</u><b>:</b><u>port</u>
              Send syslog messages to UDP <u>port</u> on <u>host</u>,  in  addition  to  the
              system  syslog.   The <u>host</u> must be a numerical IP address, not a
              hostname.

       <b>--syslog-method=</b><u>method</u>
              Specify <u>method</u> how syslog messages should be sent to syslog dae‐
              mon.  Following forms are supported:

              •      <b>libc</b>, use libc <b>syslog()</b> function.  Downside of using this
                     options is that libc adds fixed prefix to  every  message
                     before  it  is  actually  sent  to the syslog daemon over
                     <b>/dev/log</b> UNIX domain socket.

              •      <b>unix:</b><u>file</u>, use UNIX domain socket directly.  It is possi‐
                     ble to specify arbitrary message format with this option.
                     However, <b>rsyslogd</b> <b>8.9</b> and older versions use  hard  coded
                     parser  function  anyway  that  limits UNIX domain socket
                     use.  If you want to use arbitrary  message  format  with
                     older <b>rsyslogd</b> versions, then use UDP socket to localhost
                     IP address instead.

              •      <b>udp:</b><u>ip</u>:<u>port</u>, use UDP socket.  With this method it is pos‐
                     sible  to  use  arbitrary  message format also with older
                     <b>rsyslogd</b>.  When sending syslog messages over  UDP  socket
                     extra  precaution needs to be taken into account, for ex‐
                     ample, syslog daemon needs to be configured to listen  on
                     the  specified  UDP port, accidental iptables rules could
                     be interfering with local syslog traffic  and  there  are
                     some  security  considerations that apply to UDP sockets,
                     but do not apply to UNIX domain sockets.

              •      <b>null</b>, discards all messages logged to syslog.

              The default is  taken  from  the  <b>OVS_SYSLOG_METHOD</b>  environment
              variable; if it is unset, the default is <b>libc</b>.

       <b>--color</b>[<b>=</b><u>when</u>]
              Colorize  the output (for some commands); <u>when</u> can be <b>never</b>, <b>al‐</b>
              <b>ways</b>, or <b>auto</b> (the default).

              Only some commands support output coloring.  Color names and de‐
              fault colors may change in future releases.

              The environment variable <b>OVS_COLORS</b> can be used to specify user-
              defined colors and other attributes used  to  highlight  various
              parts of the output. If set, its value is a colon-separated list
              of         capabilities         that         defaults         to
              <b>ac:01;31:dr=34:le=31:pm=36:pr=35:sp=33:vl=32</b>. Supported capabil‐
              ities were initially designed for coloring flows from  <b>ovs-ofctl</b>
              <b>dump-flows</b> <u>switch</u> command, and they are as follows.

                     <b>ac=01;31</b>
                            SGR substring for <b>actions=</b> keyword in a flow.  The
                            default is a bold red text foreground.

                     <b>dr=34</b>  SGR  substring for <b>drop</b> keyword.  The default is a
                            dark blue text foreground.

                     <b>le=31</b>  SGR substring for <b>learn=</b> keyword in a  flow.   The
                            default is a red text foreground.

                     <b>pm=36</b>  SGR substring for flow match attribute names.  The
                            default is a cyan text foreground.

                     <b>pr=35</b>  SGR substring for keywords in a flow that are fol‐
                            lowed  by  arguments  inside parenthesis.  The de‐
                            fault is a magenta text foreground.

                     <b>sp=33</b>  SGR substring for some special keywords in a flow,
                            notably: <b>table=</b>, <b>priority=</b>, <b>load:</b>, <b>output:</b>, <b>move:</b>,
                            <b>group:</b>, <b>CONTROLLER:</b>, <b>set_field:</b>, <b>resubmit:</b>,  <b>exit</b>.
                            The default is a yellow text foreground.

                     <b>vl=32</b>  SGR substring for a lone flow match attribute with
                            no  field name.  The default is a green text fore‐
                            ground.

              See the Select Graphic Rendition (SGR) section in the documenta‐
              tion of the text terminal that is used for permitted values  and
              their meaning as character attributes.

       <b>-h</b>
       <b>--help</b> Prints a brief help message to the console.

       <b>-V</b>
       <b>--version</b>
              Prints version information to the console.

<b>RUNTIME</b> <b>MANAGEMENT</b> <b>COMMANDS</b>
       <b>ovs-appctl</b>(8)  can  send  commands to a running <b>ovs-ofctl</b> process.  The
       supported commands are listed below.

       <b>exit</b>   Causes <b>ovs-ofctl</b> to gracefully terminate.  This command  applies
              only when executing the <b>monitor</b> or <b>snoop</b> commands.

       <b>ofctl/set-output-file</b> <u>file</u>
              Causes  all  subsequent  output to go to <u>file</u> instead of stderr.
              This command applies only when executing the  <b>monitor</b>  or  <b>snoop</b>
              commands.

       <b>ofctl/send</b> <u>ofmsg</u>...
              Sends each <u>ofmsg</u>, specified as a sequence of hex digits that ex‐
              press  an  OpenFlow  message,  on the OpenFlow connection.  This
              command is useful only when executing the <b>monitor</b> command.

       <b>ofctl/packet-out</b> <u>packet-out</u>
              Sends an OpenFlow PACKET_OUT  message  specified  in  <b>Packet-Out</b>
              <b>Syntax</b>,  on the OpenFlow connection.  See <b>Packet-Out</b> <b>Syntax</b> sec‐
              tion for more information.  This command is useful only when ex‐
              ecuting the <b>monitor</b> command.

       <b>ofctl/barrier</b>
              Sends an OpenFlow barrier request on the OpenFlow connection and
              waits for a reply.  This command is useful only for the  <b>monitor</b>
              command.

<b>EXAMPLES</b>
       The  following examples assume that <b>ovs-vswitchd</b> has a bridge named <b>br0</b>
       configured.

       <b>ovs-ofctl</b> <b>dump-tables</b> <b>br0</b>
              Prints out the switch's table stats.  (This is more  interesting
              after some traffic has passed through.)

       <b>ovs-ofctl</b> <b>dump-flows</b> <b>br0</b>
              Prints the flow entries in the switch.

       <b>ovs-ofctl</b> <b>add-flow</b> <b>table=0</b> <b>actions=learn(table=1,hard_timeout=10,</b>
       <b>NXM_OF_VLAN_TCI[0..11],output:NXM_OF_IN_PORT[]),</b> <b>resubmit(,1)</b>
              <b>ovs-ofctl</b>  <b>add-flow</b>  <b>table=1</b> <b>priority=0</b> <b>actions=flood</b> Implements
              a level 2 MAC learning switch using the learn.

       <b>ovs-ofctl</b> <b>add-flow</b> <b>br0</b> <b>'table=0,priority=0</b> <b>ac‐</b>
       <b>tions=load:3-&gt;NXM_NX_REG0[0..15],learn(table=0,priority=1,idle_time‐</b>
       <b>out=10,NXM_OF_ETH_SRC[],NXM_OF_VLAN_TCI[0..11],out‐</b>
       <b>put:NXM_NX_REG0[0..15]),output:2</b>
              In this use of a learn action, the first packet from each source
              MAC will be sent to port 2. Subsequent packets will be output to
              port 3, with an idle timeout of 10 seconds.  NXM field names and
              match field names are both accepted, e.g.  <b>NXM_NX_REG0</b>  or  <b>reg0</b>
              for the first register, and empty brackets may be omitted.

              Additional  examples  may be found documented as part of related
              sections.

<b>SEE</b> <b>ALSO</b>
       <b>ovs-fields</b>(7),    <b>ovs-actions</b>(7),    <b>ovs-appctl</b>(8),    <b>ovs-vswitchd</b>(8),
       <b>ovs-vswitchd.conf.db</b>(8)

Open vSwitch                         3.6.0                        <u>ovs-ofctl</u>(8)
</pre></body></html>
