'\" p
.\" -*- nroff -*-
.TH "ovn-nbctl" 8 "ovn-nbctl" "Open vSwitch 2\[char46]5\[char46]90" "Open vSwitch Manual"
.fp 5 L CR              \\" Make fixed-width font available as \\fL.
.de TQ
.  br
.  ns
.  TP "\\$1"
..
.de ST
.  PP
.  RS -0.15in
.  I "\\$1"
.  RE
..
.SH "NAME"
.PP
ovn-nbctl \- Open Virtual Network northbound db management utility
.SH "SYNOPSIS"
.PP
\fBovn\-nbctl\fR [\fIoptions\fR] \fIcommand\fR [\fIarg\fR\[char46]\[char46]\[char46]]
.SH "DESCRIPTION"
.PP
This utility can be used to manage the OVN northbound database\[char46]
.SH "GENERAL COMMANDS"
.RS
.TP
\fBinit\fR
Initializes the database, if it is empty\[char46]  If the database has already
been initialized, this command has no effect\[char46]
.TP
\fBshow [\fIswitch\fB | \fIrouter\fB]\fR
Prints a brief overview of the database contents\[char46]  If
\fIswitch\fR is provided, only records related to that
logical switch are shown\[char46] If
\fIrouter\fR is provided, only records related to that
logical router are shown\[char46]
.RE
.SH "LOGICAL SWITCH COMMANDS"
.RS
.TP
\fBls\-add\fR
Creates a new, unnamed logical switch, which initially has no ports\[char46]
The switch does not have a name, other commands must refer to this
switch by its UUID\[char46]
.TP
[\fB\-\-may\-exist\fR | \fB\-\-add\-duplicate\fR] \fBls\-add\fR \fIswitch\fR
Creates a new logical switch named \fIswitch\fR, which
initially has no ports\[char46]
.IP
The OVN northbound database schema does not require logical switch
names to be unique, but the whole point to the names is to provide an
easy way for humans to refer to the switches, making duplicate names
unhelpful\[char46]  Thus, without any options, this command regards it as an
error if \fIswitch\fR is a duplicate name\[char46]  With
\fB\-\-may\-exist\fR, adding a duplicate name succeeds but does
not create a new logical switch\[char46]  With \fB\-\-add\-duplicate\fR,
the command really creates a new logical switch with a duplicate
name\[char46]  It is an error to specify both options\[char46]  If there are multiple
logical switches with a duplicate name, configure the logical switches
using the UUID instead of the \fIswitch\fR name\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBls\-del\fR \fIswitch\fR
Deletes \fIswitch\fR\[char46]  It is an error if \fIswitch\fR does
not exist, unless \fB\-\-if\-exists\fR is specified\[char46]
.TP
\fBls\-list\fR
Lists all existing switches on standard output, one per line\[char46]
.RE
.SH "LOGICAL SWITCH ACL COMMANDS"
.RS
.TP
[\fB\-\-log\fR] \fBacl\-add\fR \fIswitch\fR \fIdirection\fR \fIpriority\fR \fImatch\fR \fIaction\fR
Adds the specified ACL to \fIswitch\fR\[char46]
\fIdirection\fR must be either \fBfrom\-lport\fR or
\fBto\-lport\fR\[char46]  \fIpriority\fR must be between
\fB1\fR and \fB65534\fR, inclusive\[char46]  If
\fB\-\-log\fR is specified, packet logging is enabled for the
ACL\[char46]  A full description of the fields are in \fBovn\-nb\fR(5)\[char46]
.TP
\fBacl\-del\fR \fIswitch\fR [\fIdirection\fR [\fIpriority\fR \fImatch\fR]]
Deletes ACLs from \fIswitch\fR\[char46]  If only
\fIswitch\fR is supplied, all the ACLs from the logical
switch are deleted\[char46]  If \fIdirection\fR is also specified,
then all the flows in that direction will be deleted from the
logical switch\[char46]  If all the fields are given, then a single flow
that matches all the fields will be deleted\[char46]
.TP
\fBacl\-list\fR \fIswitch\fR
Lists the ACLs on \fIswitch\fR\[char46]
.RE
.SH "LOGICAL SWITCH PORT COMMANDS"
.RS
.TP
[\fB\-\-may\-exist\fR] \fBlsp\-add\fR \fIswitch\fR \fIport\fR
Creates on \fIlswitch\fR a new logical switch port named
\fIport\fR\[char46]
.IP
It is an error if a logical port named \fIport\fR already
exists, unless \fB\-\-may\-exist\fR is specified\[char46]  Regardless of
\fB\-\-may\-exist\fR, it is an error if the existing port is in
some logical switch other than \fIswitch\fR or if it has a
parent port\[char46]
.TP
[\fB\-\-may\-exist\fR] \fBlsp\-add\fR \fIswitch\fR \fIport\fR \fIparent\fR \fItag\fR
Creates on \fIswitch\fR a logical switch port named
\fIport\fR that is a child of \fIparent\fR that is
identifed with VLAN ID \fItag\fR\[char46]  This is useful in
cases such as virtualized container environments where Open
vSwitch does not have a direct connection to the container\(cqs
port and it must be shared with the virtual machine\(cqs port\[char46]
.IP
It is an error if a logical port named \fIport\fR already
exists, unless \fB\-\-may\-exist\fR is specified\[char46]  Regardless of
\fB\-\-may\-exist\fR, it is an error if the existing port is not
in \fIswitch\fR or if it does not have the specified
\fIparent\fR and \fItag\fR\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBlsp\-del\fR \fIport\fR
Deletes \fIport\fR\[char46]  It is an error if \fIport\fR does
not exist, unless \fB\-\-if\-exists\fR is specified\[char46]
.TP
\fBlsp\-list\fR \fIswitch\fR
Lists all the logical switch ports within \fIswitch\fR on
standard output, one per line\[char46]
.TP
\fBlsp\-get\-parent\fR \fIport\fR
If set, get the parent port of \fIport\fR\[char46]  If not set, print
nothing\[char46]
.TP
\fBlsp\-get\-tag\fR \fIport\fR
If set, get the tag for \fIport\fR traffic\[char46]  If not set, print
nothing\[char46]
.TP
\fBlsp\-set\-addresses\fR \fIport\fR [\fIaddress\fR]\[char46]\[char46]\[char46]
Sets the addresses associated with \fIport\fR to
\fIaddress\fR\[char46]  Each \fIaddress\fR should be either an
Ethernet address or an Ethernet address followed by IP addresses
(separated by space and quoted to form a single command-line
argument)\[char46]  The special form \fBunknown\fR is also valid\[char46]
Multiple Ethernet addresses or Ethernet+IPs combinations may be set\[char46]
If no \fIaddress\fR argument is given, \fIport\fR will have
no addresses associated with it\[char46]
.TP
\fBlsp\-get\-addresses\fR \fIport\fR
Lists all the addresses associated with \fIport\fR on standard
output, one per line\[char46]
.TP
\fBlsp\-set\-port\-security\fR \fIport\fR [\fIaddrs\fR]\[char46]\[char46]\[char46]
Sets the port security addresses associated with \fIport\fR to
\fIaddrs\fR\[char46]  Multiple sets of addresses may be set by using
multiple \fIaddrs\fR arguments\[char46]  If no \fIaddrs\fR argument
is given, \fIport\fR will not have port security enabled\[char46]
.IP
Port security limits the addresses from which a logical port may send
packets and to which it may receive packets\[char46]  See the
\fBovn\-nb\fR(5) documentation for the \fBport_security\fR column in
the \fBLogical_Switch_Port\fR table for details\[char46]
.TP
\fBlsp\-get\-port\-security\fR \fIport\fR
Lists all the port security addresses associated with \fIport\fR
on standard output, one per line\[char46]
.TP
\fBlsp\-get\-up\fR \fIport\fR
Prints the state of \fIport\fR, either \fBup\fR or
\fBdown\fR\[char46]
.TP
\fBlsp\-set\-enabled\fR \fIport\fR \fIstate\fR
Set the administrative state of \fIport\fR, either \fBenabled\fR
or \fBdisabled\fR\[char46]  When a port is disabled, no traffic is allowed into
or out of the port\[char46]
.TP
\fBlsp\-get\-enabled\fR \fIport\fR
Prints the administrative state of \fIport\fR, either \fBenabled\fR
or \fBdisabled\fR\[char46]
.TP
\fBlsp\-set\-type\fR \fIport\fR \fItype\fR
Set the type for the logical port\[char46]  No special types have been implemented yet\[char46]
.TP
\fBlsp\-get\-type\fR \fIport\fR
Get the type for the logical port\[char46]
.TP
\fBlsp\-set\-options\fR \fIport\fR [\fIkey=value\fR]\[char46]\[char46]\[char46]
Set type-specific key-value options for the logical port\[char46]
.TP
\fBlsp\-get\-options\fR \fIport\fR
Get the type-specific options for the logical port\[char46]
.RE
.SH "LOGICAL ROUTER COMMANDS"
.RS
.TP
\fBlr\-add\fR
Creates a new, unnamed logical router, which initially has no ports\[char46]
The router does not have a name, other commands must refer to this
router by its UUID\[char46]
.TP
[\fB\-\-may\-exist\fR | \fB\-\-add\-duplicate\fR] \fBlr\-add\fR \fIrouter\fR
Creates a new logical router named \fIrouter\fR, which
initially has no ports\[char46]
.IP
The OVN northbound database schema does not require logical router
names to be unique, but the whole point to the names is to provide an
easy way for humans to refer to the routers, making duplicate names
unhelpful\[char46]  Thus, without any options, this command regards it as an
error if \fIrouter\fR is a duplicate name\[char46]  With
\fB\-\-may\-exist\fR, adding a duplicate name succeeds but does
not create a new logical router\[char46]  With \fB\-\-add\-duplicate\fR,
the command really creates a new logical router with a duplicate
name\[char46]  It is an error to specify both options\[char46]  If there are multiple
logical routers with a duplicate name, configure the logical routers
using the UUID instead of the \fIrouter\fR name\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBlr\-del\fR \fIrouter\fR
Deletes \fIrouter\fR\[char46]  It is an error if \fIrouter\fR does
not exist, unless \fB\-\-if\-exists\fR is specified\[char46]
.TP
\fBlr\-list\fR
Lists all existing routers on standard output, one per line\[char46]
.RE
.SH "LOGICAL ROUTER PORT COMMANDS"
.RS
.TP
[\fB\-\-may\-exist\fR] \fBlrp\-add\fR \fIrouter\fR \fIport\fR \fImac\fR \fInetwork\fR\[char46]\[char46]\[char46] [\fBpeer=\fR\fIpeer\fR]
Creates on \fIrouter\fR a new logical router port named
\fIport\fR with Ethernet address \fImac\fR and one
or more IP address/netmask for each \fInetwork\fR\[char46]
.IP
The optional argument \fBpeer\fR identifies a logical
router port that connects to this one\[char46]  The following example
adds a router port with an IPv4 and IPv6 address with peer
\fBlr1\fR:
.IP
\fBlrp\-add lr0 lrp0 00:11:22:33:44:55 192\[char46]168\[char46]0\[char46]1/24 2001:db8::1/64 peer=lr1\fR
.IP
It is an error if a logical router port named \fIport\fR
already exists, unless \fB\-\-may\-exist\fR is specified\[char46]
Regardless of \fB\-\-may\-exist\fR, it is an error if the
existing router port is in some logical router other than
\fIrouter\fR\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBlrp\-del\fR \fIport\fR
Deletes \fIport\fR\[char46]  It is an error if \fIport\fR does
not exist, unless \fB\-\-if\-exists\fR is specified\[char46]
.TP
\fBlrp\-list\fR \fIrouter\fR
Lists all the logical router ports within \fIrouter\fR on
standard output, one per line\[char46]
.TP
\fBlrp\-set\-enabled\fR \fIport\fR \fIstate\fR
Set the administrative state of \fIport\fR, either
\fBenabled\fR or \fBdisabled\fR\[char46]  When a port is
disabled, no traffic is allowed into or out of the port\[char46]
.TP
\fBlrp\-get\-enabled\fR \fIport\fR
Prints the administrative state of \fIport\fR, either
\fBenabled\fR or \fBdisabled\fR\[char46]
.RE
.SH "LOGICAL ROUTER STATIC ROUTE COMMANDS"
.RS
.TP
[\fB\-\-may\-exist\fR] \fBlr\-route\-add\fR \fIrouter\fR \fIprefix\fR \fInexthop\fR [\fIport\fR]
Adds the specified route to \fIrouter\fR\[char46]
\fIprefix\fR describes an IPv4 or IPv6 prefix for this
route, such as \fB192\[char46]168\[char46]100\[char46]0/24\fR\[char46]
\fInexthop\fR specifies the gateway to use for this
route, which should be the IP address of one of
\fIrouter\fR logical router ports or the IP address of a
logical port\[char46]  If \fIport\fR is specified, packets that
match this route will be sent out that port\[char46]  When
\fIport\fR is omitted, OVN infers the output port based
on \fInexthop\fR\[char46]
.IP
It is an error if a route with \fIprefix\fR already exists,
unless \fB\-\-may\-exist\fR is specified\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBlr\-route\-del\fR \fIrouter\fR [\fIprefix\fR]
Deletes routes from \fIrouter\fR\[char46]  If only \fIrouter\fR
is supplied, all the routes from the logical router are
deleted\[char46]  If \fIprefix\fR is also specified, then all the
routes that match the prefix will be deleted from the logical
router\[char46]
.IP
It is an error if \fBprefix\fR is specified and there
is no matching route entry, unless \fB\-\-if\-exists\fR is
specified\[char46]
.TP
\fBlr\-route\-list\fR \fIrouter\fR
Lists the routes on \fIrouter\fR\[char46]
.RE
.SH "DHCP OPTIONS COMMANDS"
.RS
.TP
\fBdhcp\-options\-create\fR \fIcidr\fR [\fIkey=value\fR]
Creates a new DHCP Options entry in the \fBDHCP_Options\fR table
with the specified \fBcidr\fR and optional \fBexternal\-ids\fR\[char46]
.TP
\fBdhcp\-options\-list\fR
Lists the DHCP Options entries\[char46]
.TP
\fBdhcp\-options\-del\fR \fIdhcp-option\fR
Deletes the DHCP Options entry referred by \fIdhcp-option\fR UUID\[char46]
.TP
\fBdhcp\-options\-set\-options\fR \fIdhcp-option\fR [\fIkey=value\fR]\[char46]\[char46]\[char46]
Set the DHCP Options for the \fIdhcp-option\fR UUID\[char46]
.TP
\fBdhcp\-options\-get\-options\fR \fIdhcp-option\fR
Lists the DHCP Options for the \fIdhcp-option\fR UUID\[char46]
.RE
.SH "DATABASE COMMANDS"
.PP
These commands query and modify the contents of \fBovsdb\fR tables\[char46]
They are a slight abstraction of the \fBovsdb\fR interface and
as suchthey operate at a lower level than other \fBovn\-nbctl\fR commands\[char46]
.PP
\fIIdentifying Tables, Records, and Columns\fR
.PP
Each of these commands has a \fItable\fR parameter to identify a table
within the database\[char46]  Many of them also take a \fIrecord\fR parameter
that identifies a particular record within a table\[char46]  The \fIrecord\fR
parameter may be the UUID for a record, and many tables offer
additional ways to identify records\[char46]  Some commands also take
\fIcolumn\fR parameters that identify a particular field within the
records in a table\[char46]
.PP
The following tables are currently defined:
.RS
.TP
\fBLogical_Switch\fR
An L2 logical switch\[char46]  Records may be identified by name\[char46]
.TP
\fBLogical_Switch_Port\fR
A port within an L2 logical switch\[char46]  Records may be identified by name\[char46]
.TP
\fBACL\fR
An ACL rule for a logical switch that points to it through its \fIacls\fR column\[char46]
.TP
\fBLogical_Router\fR
An L3 logical router\[char46]  Records may be identified by name\[char46]
.TP
\fBLogical_Router_Port\fR
A port within an L3 logical router\[char46]  Records may be identified by name\[char46]
.TP
\fBLogical_Router_Static_Route\fR
A static route belonging to an L3 logical router\[char46]
.RE
.PP
\fIDatabase Values\fR
.PP
Each column in the database accepts a fixed type of data\[char46]  The
currently defined basic types, and their representations, are:
.RS
.TP
integer
A decimal integer in the range \-2**63 to 2**63\-1, inclusive\[char46]
.TP
real
A floating-point number\[char46]
.TP
Boolean
True or false, written \fBtrue\fR or \fBfalse\fR, respectively\[char46]
.TP
string
An arbitrary Unicode string, except that null bytes are not allowed\[char46]
Quotes are optional for most strings that begin with an English letter
or underscore and consist only of letters, underscores, hyphens, and
periods\[char46]  However, \fBtrue\fR and \fBfalse\fR and strings that match
the syntax of UUIDs (see below) must be enclosed in double quotes to
distinguish them from other basic types\[char46]  When double quotes are used,
the syntax is that of strings in JSON, e\[char46]g\[char46] backslashes may be used to
escape special characters\[char46]  The empty string must be represented as a
pair of double quotes (\fB\(dq\(dq\fR)\[char46]
.TP
UUID
Either a universally unique identifier in the style of RFC 4122,
e\[char46]g\[char46] \fBf81d4fae\-7dec\-11d0\-a765\-00a0c91e6bf6\fR, or an \fB@\fR\fIname\fR
defined by a \fBget\fR or \fBcreate\fR command within the same \fBovn\-nbctl\fR
invocation\[char46]
.RE
.PP
Multiple values in a single column may be separated by spaces or a
single comma\[char46]  When multiple values are present, duplicates are not
allowed, and order is not important\[char46]  Conversely, some database
columns can have an empty set of values, represented as \fB[]\fR, and
square brackets may optionally enclose other non-empty sets or single
values as well\[char46]
.PP
A few database columns are ``maps\(cq\(cq of key-value pairs, where the key
and the value are each some fixed database type\[char46]  These are specified
in the form \fIkey\fR\fB=\fR\fIvalue\fR, where \fIkey\fR and \fIvalue\fR
follow the syntax for the column\(cqs key type and value type,
respectively\[char46]  When multiple pairs are present (separated by spaces or
a comma), duplicate keys are not allowed, and again the order is not
important\[char46]  Duplicate values are allowed\[char46]  An empty map is represented
as \fB{}\fR\[char46]  Curly braces may optionally enclose non-empty maps as
well (but use quotes to prevent the shell from expanding
\fBother\-config={0=x,1=y}\fR into \fBother\-config=0=x
other\-config=1=y\fR, which may not have the desired effect)\[char46]
.PP
\fIDatabase Command Syntax\fR
.RS
.TP
[\fB\-\-if\-exists\fR] [\fB\-\-columns=\fR\fIcolumn\fR[\fB,\fR\fIcolumn\fR]\[char46]\[char46]\[char46]] \fBlist\fR \fItable\fR [\fIrecord\fR]\[char46]\[char46]\[char46]
Lists the data in each specified \fIrecord\fR\[char46]  If no
records are specified, lists all the records in \fItable\fR\[char46]
.IP
If \fB\-\-columns\fR is specified, only the requested columns are
listed, in the specified order\[char46]  Otherwise, all columns are listed, in
alphabetical order by column name\[char46]
.IP
Without \fB\-\-if\-exists\fR, it is an error if any specified
\fIrecord\fR does not exist\[char46]  With \fB\-\-if\-exists\fR, the command
ignores any \fIrecord\fR that does not exist, without producing any
output\[char46]
.TP
[\fB\-\-columns=\fR\fIcolumn\fR[\fB,\fR\fIcolumn\fR]\[char46]\[char46]\[char46]] \fBfind\fR \fItable\fR [\fIcolumn\fR[\fB:\fR\fIkey\fR]\fB=\fR\fIvalue\fR]\[char46]\[char46]\[char46]
Lists the data in each record in \fItable\fR whose \fIcolumn\fR equals
\fIvalue\fR or, if \fIkey\fR is specified, whose \fIcolumn\fR contains
a \fIkey\fR with the specified \fIvalue\fR\[char46]  The following operators
may be used where \fB=\fR is written in the syntax summary:
.RS
.TP
\fB= != < > <= >=\fR
Selects records in which \fIcolumn\fR[\fB:\fR\fIkey\fR] equals, does not
equal, is less than, is greater than, is less than or equal to, or is
greater than or equal to \fIvalue\fR, respectively\[char46]
.IP
Consider \fIcolumn\fR[\fB:\fR\fIkey\fR] and \fIvalue\fR as sets of
elements\[char46]  Identical sets are considered equal\[char46]  Otherwise, if the
sets have different numbers of elements, then the set with more
elements is considered to be larger\[char46]  Otherwise, consider a element
from each set pairwise, in increasing order within each set\[char46]  The
first pair that differs determines the result\[char46]  (For a column that
contains key-value pairs, first all the keys are compared, and values
are considered only if the two sets contain identical keys\[char46])
.TP
\fB{=} {!=}\fR
Test for set equality or inequality, respectively\[char46]
.TP
\fB{<=}\fR
Selects records in which \fIcolumn\fR[\fB:\fR\fIkey\fR] is a subset of
\fIvalue\fR\[char46]  For example, \fBflood\-vlans{<=}1,2\fR selects records in
which the \fBflood\-vlans\fR column is the empty set or contains 1 or 2
or both\[char46]
.TP
\fB{<}\fR
Selects records in which \fIcolumn\fR[\fB:\fR\fIkey\fR] is a proper
subset of \fIvalue\fR\[char46]  For example, \fBflood\-vlans{<}1,2\fR selects
records in which the \fBflood\-vlans\fR column is the empty set or
contains 1 or 2 but not both\[char46]
.TP
\fB{>=} {>}\fR
Same as \fB{<=}\fR and \fB{<}\fR, respectively, except that the
relationship is reversed\[char46]  For example, \fBflood\-vlans{>=}1,2\fR
selects records in which the \fBflood\-vlans\fR column contains both 1
and 2\[char46]
.RE
.IP
For arithmetic operators (\fB= != < > <= >=\fR), when \fIkey\fR is
specified but a particular record\(cqs \fIcolumn\fR does not contain
\fIkey\fR, the record is always omitted from the results\[char46]  Thus, the
condition \fBother\-config:mtu!=1500\fR matches records that have a
\fBmtu\fR key whose value is not 1500, but not those that lack an
\fBmtu\fR key\[char46]
.IP
For the set operators, when \fIkey\fR is specified but a particular
record\(cqs \fIcolumn\fR does not contain \fIkey\fR, the comparison is
done against an empty set\[char46]  Thus, the condition
\fBother\-config:mtu{!=}1500\fR matches records that have a \fBmtu\fR
key whose value is not 1500 and those that lack an \fBmtu\fR key\[char46]
.IP
Don\(cqt forget to escape \fB<\fR or \fB>\fR from interpretation by the
shell\[char46]
.IP
If \fB\-\-columns\fR is specified, only the requested columns are
listed, in the specified order\[char46]  Otherwise all columns are listed, in
alphabetical order by column name\[char46]
.IP
The UUIDs shown for rows created in the same \fBovn\-nbctl\fR
invocation will be wrong\[char46]
.TP
[\fB\-\-if\-exists\fR] [\fB\-\-id=@\fR\fIname\fR] \fBget\fR \fItable record\fR [\fIcolumn\fR[\fB:\fR\fIkey\fR]]\[char46]\[char46]\[char46]
Prints the value of each specified \fIcolumn\fR in the given
\fIrecord\fR in \fItable\fR\[char46]  For map columns, a \fIkey\fR may
optionally be specified, in which case the value associated with
\fIkey\fR in the column is printed, instead of the entire map\[char46]
.IP
Without \fB\-\-if\-exists\fR, it is an error if \fIrecord\fR does not
exist or \fIkey\fR is specified, if \fIkey\fR does not exist in
\fIrecord\fR\[char46]  With \fB\-\-if\-exists\fR, a missing \fIrecord\fR
yields no output and a missing \fIkey\fR prints a blank line\[char46]
.IP
If \fB@\fR\fIname\fR is specified, then the UUID for \fIrecord\fR may be
referred to by that name later in the same \fBovn\-nbctl\fR
invocation in contexts where a UUID is expected\[char46]
.IP
Both \fB\-\-id\fR and the \fIcolumn\fR arguments are optional, but
usually at least one or the other should be specified\[char46]  If both are
omitted, then \fBget\fR has no effect except to verify that
\fIrecord\fR exists in \fItable\fR\[char46]
.IP
\fB\-\-id\fR and \fB\-\-if\-exists\fR cannot be used together\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBset\fR \fItable record column\fR[\fB:\fR\fIkey\fR]\fB=\fR\fIvalue\fR\[char46]\[char46]\[char46]
Sets the value of each specified \fIcolumn\fR in the given
\fIrecord\fR in \fItable\fR to \fIvalue\fR\[char46]  For map columns, a
\fIkey\fR may optionally be specified, in which case the value
associated with \fIkey\fR in that column is changed (or added, if none
exists), instead of the entire map\[char46]
.IP
Without \fB\-\-if\-exists\fR, it is an error if \fIrecord\fR does not
exist\[char46]  With \fB\-\-if\-exists\fR, this command does nothing if
\fIrecord\fR does not exist\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBadd\fR \fItable record column\fR [\fIkey\fR\fB=\fR]\fIvalue\fR\[char46]\[char46]\[char46]
Adds the specified value or key-value pair to \fIcolumn\fR in
\fIrecord\fR in \fItable\fR\[char46]  If \fIcolumn\fR is a map, then \fIkey\fR
is required, otherwise it is prohibited\[char46]  If \fIkey\fR already exists
in a map column, then the current \fIvalue\fR is not replaced (use the
\fBset\fR command to replace an existing value)\[char46]
.IP
Without \fB\-\-if\-exists\fR, it is an error if \fIrecord\fR does not
exist\[char46]  With \fB\-\-if\-exists\fR, this command does nothing if
\fIrecord\fR does not exist\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBremove\fR \fItable record column value\fR\[char46]\[char46]\[char46]
.IP
[\fB\-\-if\-exists\fR] \fBremove\fR \fItable record column key\fR\[char46]\[char46]\[char46]
.IP
[\fB\-\-if\-exists\fR] \fBremov\fR \fItable record column key\fR\fB=\fR\fIvalue\fR\[char46]\[char46]\[char46]
Removes the specified values or key-value pairs from \fIcolumn\fR in
\fIrecord\fR in \fItable\fR\[char46]  The first form applies to columns that
are not maps: each specified \fIvalue\fR is removed from the column\[char46]
The second and third forms apply to map columns: if only a \fIkey\fR
is specified, then any key-value pair with the given \fIkey\fR is
removed, regardless of its value; if a \fIvalue\fR is given then a
pair is removed only if both key and value match\[char46]
.IP
It is not an error if the column does not contain the specified key or
value or pair\[char46]
.IP
Without \fB\-\-if\-exists\fR, it is an error if \fIrecord\fR does not
exist\[char46]  With \fB\-\-if\-exists\fR, this command does nothing if
\fIrecord\fR does not exist\[char46]
.TP
[\fB\-\-if\-exists\fR] \fBclear\fR \fItable record column\fR\[char46]\[char46]\[char46]
Sets each \fIcolumn\fR in \fIrecord\fR in \fItable\fR to the empty set
or empty map, as appropriate\[char46]  This command applies only to columns
that are allowed to be empty\[char46]
.IP
Without \fB\-\-if\-exists\fR, it is an error if \fIrecord\fR does not
exist\[char46]  With \fB\-\-if\-exists\fR, this command does nothing if
\fIrecord\fR does not exist\[char46]
.TP
[\fB\-\-id=@\fR\fIname\fR] \fBcreate\fR \fItable column\fR[\fB:\fR\fIkey\fR]\fB=\fR\fIvalue\fR\[char46]\[char46]\[char46]
Creates a new record in \fItable\fR and sets the initial values of
each \fIcolumn\fR\[char46]  Columns not explicitly set will receive their
default values\[char46]  Outputs the UUID of the new row\[char46]
.IP
If \fB@\fR\fIname\fR is specified, then the UUID for the new row may be
referred to by that name elsewhere in the same \fB\e*(PN\fR
invocation in contexts where a UUID is expected\[char46]  Such references may
precede or follow the \fBcreate\fR command\[char46]
.RS
.TP
Caution (ovs-vsctl as exmaple)
Records in the Open vSwitch database are significant only when they
can be reached directly or indirectly from the \fBOpen_vSwitch\fR
table\[char46]  Except for records in the \fBQoS\fR or \fBQueue\fR tables,
records that are not reachable from the \fBOpen_vSwitch\fR table are
automatically deleted from the database\[char46]  This deletion happens
immediately, without waiting for additional \fBovs\-vsctl\fR commands
or other database activity\[char46]  Thus, a \fBcreate\fR command must
generally be accompanied by additional commands \fIwithin the same\fR
\fBovs\-vsctl\fR \fIinvocation\fR to add a chain of references to the
newly created record from the top-level \fBOpen_vSwitch\fR record\[char46]
The \fBEXAMPLES\fR section gives some examples that show how to do
this\[char46]
.RE
.TP
[\fB\-\-if\-exists\fR] \fBdestroy\fR \fItable record\fR\[char46]\[char46]\[char46]
Deletes each specified \fIrecord\fR from \fItable\fR\[char46]  Unless
\fB\-\-if\-exists\fR is specified, each \fIrecord\fRs must exist\[char46]
.TP
\fB\-\-all destroy\fR \fItable\fR
Deletes all records from the \fItable\fR\[char46]
.RS
.TP
Caution (ovs-vsctl as exmaple)
The \fBdestroy\fR command is only useful for records in the \fBQoS\fR
or \fBQueue\fR tables\[char46]  Records in other tables are automatically
deleted from the database when they become unreachable from the
\fBOpen_vSwitch\fR table\[char46]  This means that deleting the last reference
to a record is sufficient for deleting the record itself\[char46]  For records
in these tables, \fBdestroy\fR is silently ignored\[char46]  See the
\fBEXAMPLES\fR section below for more information\[char46]
.RE
.TP
\fBwait\-until\fR \fItable record\fR [\fIcolumn\fR[\fB:\fR\fIkey\fR]\fB=\fR\fIvalue\fR]\[char46]\[char46]\[char46]
Waits until \fItable\fR contains a record named \fIrecord\fR whose
\fIcolumn\fR equals \fIvalue\fR or, if \fIkey\fR is specified, whose
\fIcolumn\fR contains a \fIkey\fR with the specified \fIvalue\fR\[char46]  Any
of the operators \fB!=\fR, \fB<\fR, \fB>\fR, \fB<=\fR, or \fB>=\fR may
be substituted for \fB=\fR to test for inequality, less than, greater
than, less than or equal to, or greater than or equal to,
respectively\[char46]  (Don\(cqt forget to escape \fB<\fR or \fB>\fR from
interpretation by the shell\[char46])
.IP
If no \fIcolumn\fR[\fB:\fR\fIkey\fR]\fB=\fR\fIvalue\fR arguments are given,
this command waits only until \fIrecord\fR exists\[char46]  If more than one
such argument is given, the command waits until all of them are
satisfied\[char46]
.RS
.TP
Caution (ovs-vsctl as exmaple)
Usually \fBwait\-until\fR should be placed at the beginning of a set
of \fBovs\-vsctl\fR commands\[char46]  For example, \fBwait\-until bridge br0
\-\- get bridge br0 datapath_id\fR waits until a bridge named
\fBbr0\fR is created, then prints its \fBdatapath_id\fR column,
whereas \fBget bridge br0 datapath_id \-\- wait\-until bridge br0\fR
will abort if no bridge named \fBbr0\fR exists when \fBovs\-vsctl\fR
initially connects to the database\[char46]
.RE
.IP
Consider specifying \fB\-\-timeout=0\fR along with
\fB\-\-wait\-until\fR, to prevent \fBovn\-nbctl\fR from terminating
after waiting only at most 5 seconds\[char46]
.TP
\fBcomment\fR [\fIarg\fR]\[char46]\[char46]\[char46]
This command has no effect on behavior, but any database log record
created by the command will include the command and its arguments\[char46]
.RE
.SH "SYNCHRONIZATION COMMANDS"
.RS
.TP
sync
Ordinarily, \fB\-\-wait=sb\fR or \fB\-\-wait=hv\fR only waits
for changes by the current \fBovn\-nbctl\fR invocation to take
effect\[char46]  This means that, if none of the commands supplied to
\fBovn\-nbctl\fR change the database, then the command does not
wait at all\[char46]  With the \fBsync\fR command, however,
\fBovn\-nbctl\fR waits even for earlier changes to the database
to propagate down to the southbound database or all of the OVN chassis,
according to the argument to \fB\-\-wait\fR\[char46]
.RE
.SH "OPTIONS"
.RS
.TP
\fB\-\-no\-wait\fR | \fB\-\-wait=none\fR
.TQ .5in
\fB\-\-wait=sb\fR
.TQ .5in
\fB\-\-wait=hv\fR
These options control whether and how \fBovn\-nbctl\fR waits
for the OVN system to become up-to-date with changes made in an
\fBovn\-nbctl\fR invocation\[char46]
.IP
By default, or if \fB\-\-no\-wait\fR or \fB\-\-wait=none\fR,
\fBovn\-nbctl\fR exits immediately after confirming that
changes have been committed to the northbound database, without
waiting\[char46]
.IP
With \fB\-\-wait=sb\fR, before \fBovn\-nbctl\fR exits, it
waits for \fBovn\-northd\fR to bring the southbound database
up-to-date with the northbound database updates\[char46]
.IP
With \fB\-\-wait=hv\fR, before \fBovn\-nbctl\fR exits, it
additionally waits for all OVN chassis (hypervisors and gateways) to
become up-to-date with the northbound database updates\[char46]  (This can
become an indefinite wait if any chassis is malfunctioning\[char46])
.IP
Ordinarily, \fB\-\-wait=sb\fR or \fB\-\-wait=hv\fR only
waits for changes by the current \fBovn\-nbctl\fR invocation to
take effect\[char46]  This means that, if none of the commands supplied to
\fBovn\-nbctl\fR change the database, then the command does not
wait at all\[char46]  Use the \fBsync\fR command to override this
behavior\[char46]
.TP
\fB\-\-db\fR \fIdatabase\fR
The OVSDB database remote to contact\[char46]  If the \fBOVN_NB_DB\fR
environment variable is set, its value is used as the default\[char46]
Otherwise, the default is \fBunix:/usr/local/var/run/openvswitch/db\[char46]sock\fR, but this
default is unlikely to be useful outside of single-machine OVN test
environments\[char46]
.RE
.SH "LOGGING OPTIONS"
.RS
.TP
\fB\-v\fR[\fIspec\fR]
.TQ .5in
\fB\-\-verbose=\fR[\fIspec\fR]
Sets logging levels\[char46]  Without any \fIspec\fR, sets the log level for
every module and destination to \fBdbg\fR\[char46]  Otherwise,
\fIspec\fR is a list of words separated by spaces or commas or
colons, up to one from each category below:
.RS
.IP \(bu
A valid module name, as displayed by the \fBvlog/list\fR command
on \fBovs\-appctl\fR(8), limits the log level change to the
specified module\[char46]
.IP \(bu
\fBsyslog\fR, \fBconsole\fR, or \fBfile\fR, to
limit the log level change to only to the system log, to the console,
or to a file, respectively\[char46]  (If \fB\-\-detach\fR is specified,
the daemon closes its standard file descriptors, so logging to the
console will have no effect\[char46])
.IP
On Windows platform, \fBsyslog\fR is accepted as a word and is
only useful along with the \fB\-\-syslog\-target\fR option (the
word has no effect otherwise)\[char46]
.IP \(bu
\fBoff\fR, \fBemer\fR, \fBerr\fR,
\fBwarn\fR, \fBinfo\fR, or \fBdbg\fR, to control
the log level\[char46]  Messages of the given severity or higher will be
logged, and messages of lower severity will be filtered out\[char46]
\fBoff\fR filters out all messages\[char46]  See
\fBovs\-appctl\fR(8) for a definition of each log level\[char46]
.RE
.IP
Case is not significant within \fIspec\fR\[char46]
.IP
Regardless of the log levels set for \fBfile\fR, logging to a file
will not take place unless \fB\-\-log\-file\fR is also specified (see
below)\[char46]
.IP
For compatibility with older versions of OVS, \fBany\fR is
accepted as a word but has no effect\[char46]
.TP
\fB\-v\fR
.TQ .5in
\fB\-\-verbose\fR
Sets the maximum logging verbosity level, equivalent to
\fB\-\-verbose=dbg\fR\[char46]
.TP
\fB\-vPATTERN:\fR\fIdestination\fR\fB:\fR\fIpattern\fR
.TQ .5in
\fB\-\-verbose=PATTERN:\fR\fIdestination\fR\fB:\fR\fIpattern\fR
Sets the log pattern for \fIdestination\fR to \fIpattern\fR\[char46]
Refer to \fBovs\-appctl\fR(8) for a description of the valid syntax
for \fIpattern\fR\[char46]
.TP
\fB\-vFACILITY:\fR\fIfacility\fR
.TQ .5in
\fB\-\-verbose=FACILITY:\fR\fIfacility\fR
Sets the RFC5424 facility of the log message\[char46] \fIfacility\fR can be
one of \fBkern\fR, \fBuser\fR, \fBmail\fR,
\fBdaemon\fR, \fBauth\fR, \fBsyslog\fR,
\fBlpr\fR, \fBnews\fR, \fBuucp\fR, \fBclock\fR,
\fBftp\fR, \fBntp\fR, \fBaudit\fR, \fBalert\fR,
\fBclock2\fR, \fBlocal0\fR, \fBlocal1\fR,
\fBlocal2\fR, \fBlocal3\fR, \fBlocal4\fR,
\fBlocal5\fR, \fBlocal6\fR or \fBlocal7\fR\[char46] If this
option is not specified, \fBdaemon\fR is used as the default for the
local system syslog and \fBlocal0\fR is used while sending a message
to the target provided via the \fB\-\-syslog\-target\fR option\[char46]
.TP
\fB\-\-log\-file\fR[\fB=\fR\fIfile\fR]
Enables logging to a file\[char46]  If \fIfile\fR is specified, then it is
used as the exact name for the log file\[char46]  The default log file name used if
\fIfile\fR is omitted is \fB/usr/local/var/log/openvswitch/\fIprogram\fB\[char46]log\fR\[char46]
.TP
\fB\-\-syslog\-target=\fR\fIhost\fR\fB:\fR\fIport\fR
Send syslog messages to UDP \fIport\fR on \fIhost\fR, in addition
to the system syslog\[char46]  The \fIhost\fR must be a numerical IP address,
not a hostname\[char46]
.TP
\fB\-\-syslog\-method=\fR\fImethod\fR
Specify \fImethod\fR as how syslog messages should be sent to syslog
daemon\[char46]  The following forms are supported:
.RS
.IP \(bu
\fBlibc\fR, to use the libc \fBsyslog()\fR function\[char46]
This is the default behavior\[char46]  Downside of using this options is that
libc adds fixed prefix to every message before it is actually sent to
the syslog daemon over \fB/dev/log\fR UNIX domain socket\[char46]
.IP \(bu
\fBunix:\fIfile\fB\fR, to use a UNIX domain socket
directly\[char46]  It is possible to specify arbitrary message format with this
option\[char46]  However, \fBrsyslogd 8\[char46]9\fR and older versions use hard
coded parser function anyway that limits UNIX domain socket use\[char46]  If
you want to use arbitrary message format with older
\fBrsyslogd\fR versions, then use UDP socket to localhost IP
address instead\[char46]
.IP \(bu
\fBudp:\fIip\fB:\fIport\fB\fR, to use a UDP socket\[char46]
With this method it is possible to use arbitrary message format also
with older \fBrsyslogd\fR\[char46]  When sending syslog messages over
UDP socket extra precaution needs to be taken into account, for
example, syslog daemon needs to be configured to listen on the
specified UDP port, accidental iptables rules could be interfering with
local syslog traffic and there are some security considerations that
apply to UDP sockets, but do not apply to UNIX domain sockets\[char46]
.RE
.RE
.SS "PKI Options"
.PP
PKI configuration is required to use SSL for the connection to the
database\[char46]
.RS
.TP
\fB\-p\fR \fIprivkey\[char46]pem\fR
.TQ .5in
\fB\-\-private\-key=\fR\fIprivkey\[char46]pem\fR
Specifies a PEM file containing the private key used as
identity for outgoing SSL connections\[char46]
.TP
\fB\-c\fR \fIcert\[char46]pem\fR
.TQ .5in
\fB\-\-certificate=\fR\fIcert\[char46]pem\fR
Specifies a PEM file containing a certificate that certifies the
private key specified on \fB\-p\fR or \fB\-\-private\-key\fR to be
trustworthy\[char46]  The certificate must be signed by the certificate
authority (CA) that the peer in SSL connections will use to verify it\[char46]
.TP
\fB\-C\fR \fIcacert\[char46]pem\fR
.TQ .5in
\fB\-\-ca\-cert=\fR\fIcacert\[char46]pem\fR
Specifies a PEM file containing the CA certificate for
verifying certificates presented to this program by SSL peers\[char46]  (This
may be the same certificate that SSL peers use to verify the
certificate specified on \fB\-c\fR or \fB\-\-certificate\fR, or it may
be a different one, depending on the PKI design in use\[char46])
.TP
\fB\-C none\fR
.TQ .5in
\fB\-\-ca\-cert=none\fR
Disables verification of certificates presented by SSL peers\[char46]  This
introduces a security risk, because it means that certificates cannot
be verified to be those of known trusted hosts\[char46]
.RE
.SS "Other Options"
.RS
.TP
\fB\-h\fR
.TQ .5in
\fB\-\-help\fR
Prints a brief help message to the console\[char46]
.TP
\fB\-V\fR
.TQ .5in
\fB\-\-version\fR
Prints version information to the console\[char46]
.RE
